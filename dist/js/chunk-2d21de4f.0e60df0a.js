(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21de4f"],{d2f1:function(e,t,c){"use strict";c.r(t);c("a4d3"),c("e01a");var o=c("7a23"),r={class:"container"},a={class:"row py-8"},n={class:"col-lg-4"},s={class:"d-flex justify-content-between mb-6 px-2"},l=Object(o["createVNode"])("p",{class:"h3"},"立即預購",-1),i={class:"text-end"},d={class:"h3"},u=Object(o["createTextVNode"])(" 起 "),b={class:"list-group list-group-flush"},p={class:"list-group-item"},m={class:"col-lg-8"},f=Object(o["createVNode"])("button",{type:"button",class:"btn extend-img-btn","data-bs-toggle":"modal","data-bs-target":"#productPageImgModal"},[Object(o["createVNode"])("i",{class:"bi bi-arrows-fullscreen"})],-1),O={class:"modal fade p-0",id:"productPageImgModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},j={class:"modal-dialog modal-xl"},h={class:"modal-content rounded-0"},g={class:"modal-body p-0"},N={class:"px-6 pt-6 pb-3"},k={class:"text-primary text-center fw-bold mb-6"},V={class:"d-flex justify-content-center mb-6"},I=Object(o["createVNode"])("i",{class:"bi bi-record-circle mb-1"},null,-1),v={class:"bg-light d-flex justify-content-center py-3"},y=Object(o["createVNode"])("i",{class:"bi bi-people-fill"},null,-1),w={class:"ms-2"},x={key:0,class:"ms-6"},B=Object(o["createVNode"])("i",{class:"bi bi-clock"},null,-1),S={key:0,class:"ms-2"},C={key:1,class:"ms-2"},D={key:2,class:"ms-2"},A={class:"px-6 pt-6 pb-8"},P={class:"d-flex justify-content-between mb-3",id:"packageOptionsSection"},T=Object(o["createVNode"])("h3",{class:"text-primary"},"選擇方案",-1),M={class:"d-flex h5"},L={class:"d-flex flex-column align-items-center"},F=Object(o["createVNode"])("label",{for:"tktAdultNum",class:"mb-1"},"成人（ 12+ ）",-1),U={class:"d-flex align-items-center"},_=Object(o["createVNode"])("i",{class:"bi bi-dash-lg"},null,-1),$={class:"p-1"},E=Object(o["createVNode"])("i",{class:"bi bi-plus-lg"},null,-1),R={class:"d-flex flex-column align-items-center ms-2"},q=Object(o["createVNode"])("label",{for:"tktChildNum",class:"mb-1"},"孩童（ 6~12 ）",-1),J={class:"d-flex align-items-center"},Y=Object(o["createVNode"])("i",{class:"bi bi-dash-lg"},null,-1),z={class:"p-1"},G=Object(o["createVNode"])("i",{class:"bi bi-plus-lg"},null,-1),H={class:"d-flex flex-column align-items-center ms-2"},K=Object(o["createVNode"])("label",{for:"startDate",class:"mb-2 text-center"},"選擇日期",-1),Q={class:"mb-5"},W={class:"card-body"},X={class:"card-title mb-3"},Z={class:"h4 ms-2"},ee=Object(o["createVNode"])("i",{class:"bi bi-check2"},null,-1),te={class:"d-flex flex-column align-items-end"},ce={class:"mb-1"},oe={class:"h3"},re=Object(o["createVNode"])("div",{class:"spinner-border spinner-border-sm text-dark d-none",role:"status"},[Object(o["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),ae={key:0,class:"ms-1"},ne={key:1,class:"ms-1"},se={id:"ruleSection"},le=Object(o["createVNode"])("h3",{class:"text-primary mb-5"},"相關規定",-1),ie={class:"bg-light pt-6 pb-8",id:"moreActivitiesSection"},de={class:"container"},ue=Object(o["createVNode"])("h3",{class:"text-primary mb-5"},"更多相似活動",-1),be={class:"row"},pe={class:"card-img-outer"},me={class:"card-body"},fe={class:"card-title ellipsis"},Oe={class:"h3 text-end"},je={class:"h4"};function he(e,t,c,he,ge,Ne){var ke=Object(o["resolveComponent"])("SwiperSlide"),Ve=Object(o["resolveComponent"])("Swiper"),Ie=Object(o["resolveComponent"])("swiper"),ve=Object(o["resolveComponent"])("flat-pickr"),ye=Object(o["resolveComponent"])("router-link"),we=Object(o["resolveComponent"])("alert");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[Object(o["createVNode"])("div",r,[Object(o["createVNode"])("div",a,[Object(o["createVNode"])("div",n,[Object(o["createVNode"])("div",s,[l,Object(o["createVNode"])("p",i,[Object(o["createVNode"])("span",d,"NT "+Object(o["toDisplayString"])(ge.moreInfo.productInfo.lowestPrice),1),u])]),Object(o["createVNode"])("ul",b,[Object(o["createVNode"])("li",p,[Object(o["createVNode"])("a",{href:"#",class:"list-group-link",onClick:t[1]||(t[1]=Object(o["withModifiers"])((function(e){return Ne.goAnchor("#packageOptionsSection")}),["prevent"]))},"選擇方案")]),Object(o["createVNode"])("li",{class:"list-group-item",onClick:t[3]||(t[3]=Object(o["withModifiers"])((function(){return e.toRules&&e.toRules.apply(e,arguments)}),["prevent"]))},[Object(o["createVNode"])("a",{href:"#",class:"list-group-link",onClick:t[2]||(t[2]=Object(o["withModifiers"])((function(e){return Ne.goAnchor("#ruleSection")}),["prevent"]))},"相關規定")]),Object(o["createVNode"])("li",{class:"list-group-item",onClick:t[5]||(t[5]=Object(o["withModifiers"])((function(){return e.toMoreActivities&&e.toMoreActivities.apply(e,arguments)}),["prevent"]))},[Object(o["createVNode"])("a",{href:"#",class:"list-group-link",onClick:t[4]||(t[4]=Object(o["withModifiers"])((function(e){return Ne.goAnchor("#moreActivitiesSection")}),["prevent"]))},"更多相似活動")])])]),Object(o["createVNode"])("div",m,[Object(o["createVNode"])(Ve,{autoplay:{delay:5e3,disableOnInteraction:!1},loop:!0,"slides-per-view":3,spaceBetween:200,centeredSlides:!0,class:"mySwiper"},{default:Object(o["withCtx"])((function(){return[f,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(ge.moreInfo.productInfo.imagesUrl,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(ke,{key:e.id},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("img",{src:e,class:"swiper-img opacity-50"},null,8,["src"])]})),_:2},1024)})),128))]})),_:1}),Object(o["createVNode"])("div",O,[Object(o["createVNode"])("div",j,[Object(o["createVNode"])("div",h,[Object(o["createVNode"])("div",g,[Object(o["createVNode"])(Ve,{autoplay:{delay:5e3,disableOnInteraction:!1},loop:!0,centeredSlides:!0,navigation:!0,thumbs:{swiper:e.thumbsSwiper},class:"gallery-top"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(ge.moreInfo.productInfo.imagesUrl,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(ke,{key:e.id},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("img",{src:e,class:"swiper-img"},null,8,["src"])]})),_:2},1024)})),128))]})),_:1},8,["thumbs"]),Object(o["createVNode"])(Ie,{onSwiper:Ne.setThumbsSwiper,loop:!0,slidesPerView:4,spaceBetween:10,freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,class:"gallery-thumbs"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(ge.moreInfo.productInfo.imagesUrl,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(ke,{key:e.id},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("img",{src:e,class:"swiper-img"},null,8,["src"])]})),_:2},1024)})),128))]})),_:1},8,["onSwiper"])])])])]),Object(o["createVNode"])("div",N,[Object(o["createVNode"])("h2",k,Object(o["toDisplayString"])(ge.moreInfo.productInfo.title),1),Object(o["createVNode"])("div",V,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(ge.moreInfo.productInfo.attractionArr,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:t,class:["d-flex flex-column align-items-center h3 attraction-line",{"ms-5":0!==t}]},[I,Object(o["createVNode"])("p",null,Object(o["toDisplayString"])(e),1)],2)})),128))]),Object(o["createVNode"])("p",null,Object(o["toDisplayString"])(ge.moreInfo.productInfo.description),1)]),Object(o["createVNode"])("div",v,[Object(o["createVNode"])("p",null,[y,Object(o["createVNode"])("span",w,Object(o["toDisplayString"])(ge.moreInfo.productInfo.ageRestriction),1)]),ge.moreInfo.productInfo.duration?(Object(o["openBlock"])(),Object(o["createBlock"])("p",x,[B,ge.moreInfo.productInfo.duration.day>0?(Object(o["openBlock"])(),Object(o["createBlock"])("span",S,Object(o["toDisplayString"])(ge.moreInfo.productInfo.duration.day)+" 天",1)):Object(o["createCommentVNode"])("",!0),ge.moreInfo.productInfo.duration.hours>0?(Object(o["openBlock"])(),Object(o["createBlock"])("span",C,Object(o["toDisplayString"])(ge.moreInfo.productInfo.duration.hours)+" 小時",1)):Object(o["createCommentVNode"])("",!0),ge.moreInfo.productInfo.duration.min>0?(Object(o["openBlock"])(),Object(o["createBlock"])("span",D,Object(o["toDisplayString"])(ge.moreInfo.productInfo.duration.min)+" 分",1)):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("div",A,[Object(o["createVNode"])("div",P,[T,Object(o["createVNode"])("div",M,[Object(o["createVNode"])("div",L,[F,Object(o["createVNode"])("div",U,[Object(o["createVNode"])("button",{class:"border-0 bg-transparent p-2",onClick:t[6]||(t[6]=function(e){return Ne.changeTktNum("adult","minus")})},[_]),Object(o["createVNode"])("p",$,Object(o["toDisplayString"])(ge.moreInfo.tktNum.adult),1),Object(o["createVNode"])("button",{class:"border-0 bg-transparent p-2",onClick:t[7]||(t[7]=function(e){return Ne.changeTktNum("adult","plus")})},[E])])]),Object(o["createVNode"])("div",R,[q,Object(o["createVNode"])("div",J,[Object(o["createVNode"])("button",{class:"border-0 bg-transparent p-2",onClick:t[8]||(t[8]=function(e){return Ne.changeTktNum("child","minus")})},[Y]),Object(o["createVNode"])("p",z,Object(o["toDisplayString"])(ge.moreInfo.tktNum.child),1),Object(o["createVNode"])("button",{class:"border-0 bg-transparent p-2",onClick:t[9]||(t[9]=function(e){return Ne.changeTktNum("child","plus")})},[G])])]),Object(o["createVNode"])("div",H,[K,Object(o["createVNode"])(ve,{id:"startDate",ref:"startDate",config:ge.config,modelValue:ge.moreInfo.startDate,"onUpdate:modelValue":t[10]||(t[10]=function(e){return ge.moreInfo.startDate=e}),class:"py-1 text-center"},null,8,["config","modelValue"])])])]),Object(o["createVNode"])("ul",Q,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(ge.moreInfo.productInfo.packageOptions,(function(e,c){return Object(o["openBlock"])(),Object(o["createBlock"])("li",{key:e.optionName,class:["card card-row bg-light",{"mb-3":c!==ge.moreInfo.productInfo.packageOptions.length-1}]},[Object(o["createVNode"])("img",{class:"card-row-img",src:ge.moreInfo.productInfo.imageUrl,alt:e.optionName},null,8,["src","alt"]),Object(o["createVNode"])("div",W,[Object(o["createVNode"])("div",null,[Object(o["createVNode"])("h3",X,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.optionName)+" ",1),Object(o["createVNode"])("span",Z,Object(o["toDisplayString"])(e.meetingTime)+" 集合",1)]),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.contentArr,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("p",{key:t},[ee,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e),1)])})),128))]),Object(o["createVNode"])("div",te,[Object(o["createVNode"])("p",ce,[Object(o["createVNode"])("span",oe,"NT "+Object(o["toDisplayString"])(e.price),1),Object(o["createTextVNode"])(" / "+Object(o["toDisplayString"])(e.unit),1)]),Object(o["createVNode"])("button",{type:"button",class:"btn btn-primary w-25 d-flex justify-content-center align-items-center",ref:"addCartBtn",onClick:t[11]||(t[11]=function(e){return Ne.addCart()}),disabled:""===ge.moreInfo.startDate||ge.moreInfo.tktNum.adult<1},[re,""===ge.moreInfo.startDate?(Object(o["openBlock"])(),Object(o["createBlock"])("p",ae,"填寫上方日期")):(Object(o["openBlock"])(),Object(o["createBlock"])("p",ne,"現在預訂"))],8,["disabled"])])])],2)})),128))]),Object(o["createVNode"])("div",se,[le,Object(o["createVNode"])("p",null,Object(o["toDisplayString"])(ge.moreInfo.productInfo.policy),1)])])])])]),Object(o["createVNode"])("div",ie,[Object(o["createVNode"])("div",de,[ue,Object(o["createVNode"])("div",be,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(ge.randomProducts,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"col-4",key:t},[Object(o["createVNode"])(ye,{to:"/product/".concat(e.id),title:"查看更多",class:"card overflow-hidden"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",pe,[Object(o["createVNode"])("img",{src:e.imageUrl,alt:e.title,class:"card-img"},null,8,["src","alt"])]),Object(o["createVNode"])("div",me,[Object(o["createVNode"])("h4",fe,Object(o["toDisplayString"])(e.title),1),Object(o["createVNode"])("p",Oe,[Object(o["createTextVNode"])(" NT "+Object(o["toDisplayString"])(e.lowestPrice)+" 起 ",1),Object(o["createVNode"])("span",je," / "+Object(o["toDisplayString"])(e.lowestPriceUnit),1)])])]})),_:2},1032,["to"])])})),128))])])]),ge.showAlert?(Object(o["openBlock"])(),Object(o["createBlock"])(we,{key:0,"alert-msg":ge.alertMsg},null,8,["alert-msg"])):Object(o["createCommentVNode"])("",!0)])}var ge=c("3835"),Ne=(c("99af"),c("4de4"),c("d81d"),c("4e82"),c("159b"),c("7db0"),c("d3b7"),c("6062"),c("3ca3"),c("ddb0"),c("98ab")),ke=c("c38f"),Ve=c.n(ke),Ie=(c("0952"),{data:function(){return{config:{altFormat:"F j, Y",dateFormat:"Y-m-d",minDate:"today"},moreInfo:{productInfo:{},startDate:"",tktNum:{adult:1,child:0}},totalProducts:[],randomProducts:[],showAlert:!1,alertMsg:""}},props:["id"],components:{alert:Ne["a"],flatPickr:Ve.a},methods:{getData:function(){var e=this,t=this.id;this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/product/").concat(t)).then((function(t){if(t.data.success){e.moreInfo.productInfo=t.data.product,e.moreInfo.productInfo.imagesUrl=e.moreInfo.productInfo.imagesUrl.filter((function(e){return""!==e}));var c=e.moreInfo.productInfo.packageOptions.map((function(e){return e.price}));c=c.sort((function(e,t){return e-t}));var o=c,r=Object(ge["a"])(o,1);e.moreInfo.productInfo.lowestPrice=r[0],e.getTotalProducts()}else e.customAlert(t.data.message)})).catch((function(t){e.customAlert(t.response)}))},getTotalProducts:function(){var e=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/products/all")).then((function(t){t.data.success?(e.totalProducts=t.data.products,e.totalProducts.forEach((function(t,c){var o=t.packageOptions.map((function(e){return e.price}));o=o.sort((function(e,t){return e-t}));var r=o,a=Object(ge["a"])(r,1),n=a[0];e.totalProducts[c].lowestPrice=n,t.packageOptions.forEach((function(t){t.price===n&&(e.totalProducts[c].lowestPriceUnit=t.unit)}))})),e.getRandomProducts()):e.customAlert(t.data.message)})).catch((function(t){e.customAlert(t.response)}))},getRandomProducts:function(){var e=this,t=this.moreInfo.productInfo.tagCheck;console.log(t);var c=t.find((function(e){return"雙北"===e||"中彰投"===e||"嘉南"===e||"高屏"===e||"花東"===e})),o=[];this.totalProducts.forEach((function(t){t.tagCheck.forEach((function(r){r===c&&t.title!==e.moreInfo.productInfo.title&&o.push(t)}))}));for(var r=new Set([]),a=o.length<3?o.length:3,n=0;r.size<a;n+1){var s=o.length,l=Math.floor(Math.random(s)*s);r.add(l)}r.forEach((function(t){e.randomProducts.push(o[t])}))},goAnchor:function(e){var t=this.$el.querySelector(e);document.body.scrollTop=t.offsetTop,document.documentElement.scrollTop=t.offsetTop},setThumbsSwiper:function(e){this.thumbsSwiper=e},addCart:function(){var e=this,t=this.$refs.addCartBtn;t.classList.add("disabled"),t.children[0].classList.remove("d-none");var c={data:{product_id:this.moreInfo.productInfo.id,qty:this.moreInfo.tktNum,start_date:this.moreInfo.startDate}};this.$http.post("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/cart"),c).then((function(c){c.data.success?(e.customAlert("已加入購物車"),window.setTimeout(e.closeCustomAlert,5e3),e.moreInfo.startDate="",e.moreInfo.tktNum.adult=1,e.moreInfo.tktNum.child=0,t.classList.remove("disabled"),t.children[0].classList.add("d-none")):e.customAlert(c.data.message)})).catch((function(t){e.customAlert(t.response)}))},changeTktNum:function(e,t){"adult"===e?"plus"===t?this.moreInfo.tktNum.adult+=1:"minus"===t&&this.moreInfo.tktNum.adult>=2&&(this.moreInfo.tktNum.adult-=1):"child"===e&&("plus"===t?this.moreInfo.tktNum.child+=1:"minus"===t&&this.moreInfo.tktNum.child>=1&&(this.moreInfo.tktNum.child-=1))},customAlert:function(e){this.alertMsg=e,this.showAlert=!0},closeCustomAlert:function(){this.showAlert=!1}},created:function(){this.getData()},watch:{"$route.params.id":{handler:function(){this.$router.go()}}}});Ie.render=he;t["default"]=Ie}}]);
//# sourceMappingURL=chunk-2d21de4f.0e60df0a.js.map