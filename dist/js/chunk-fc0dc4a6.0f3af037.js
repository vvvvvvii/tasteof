(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fc0dc4a6"],{"466d":function(e,t,c){"use strict";var a=c("d784"),l=c("825a"),o=c("50c4"),r=c("1d80"),i=c("8aa5"),s=c("14c3");a("match",1,(function(e,t,c){return[function(t){var c=r(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,c):new RegExp(t)[e](String(c))},function(e){var a=c(t,e,this);if(a.done)return a.value;var r=l(e),n=String(this);if(!r.global)return s(r,n);var d=r.unicode;r.lastIndex=0;var m,b=[],u=0;while(null!==(m=s(r,n))){var p=String(m[0]);b[u]=p,""===p&&(r.lastIndex=i(n,o(r.lastIndex),d)),u++}return 0===u?null:b}]}))},"61c5":function(e,t,c){"use strict";c.r(t);c("a4d3"),c("e01a");var a=c("7a23"),l={class:"bg-light"},o={class:"container p-4"},r={class:"d-flex justify-content-between"},i=Object(a["createVNode"])("label",{for:"searchArticle",class:"search-icon"},[Object(a["createVNode"])("span",{class:"material-icons"}," search ")],-1),s={class:"mb-4"},n={key:0},d={key:0,class:"ms-6 text-dark-primary"},m={key:1},b={key:1},u={key:0,class:"ms-6 text-dark-primary"},p={key:1},h={class:"container py-4"},O={class:"table mb-6"},g=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",{width:"150"},"發布時間"),Object(a["createVNode"])("th",null,"文章標題"),Object(a["createVNode"])("th",{width:"350"},"標籤"),Object(a["createVNode"])("th",{width:"120"})])],-1),f=Object(a["createVNode"])("td",{width:"150"},null,-1),j={class:"pe-4"},v=Object(a["createVNode"])("td",{width:"350"},null,-1),A={width:"120"},V={class:"ms-2"};function N(e,t,c,N,k,y){var w=Object(a["resolveComponent"])("alert"),M=Object(a["resolveComponent"])("pagination"),B=Object(a["resolveComponent"])("article-edit-modal"),x=Object(a["resolveComponent"])("article-delete-modal");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])("div",l,[Object(a["createVNode"])("div",o,[Object(a["createVNode"])("div",r,[Object(a["createVNode"])("div",null,[i,Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"search",id:"searchArticle",class:"search-bar",placeholder:"搜尋文章","onUpdate:modelValue":t[1]||(t[1]=function(e){return k.searchArticle=e})},null,512),[[a["vModelText"],k.searchArticle]])]),Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-primary d-inline-flex me-2",onClick:t[2]||(t[2]=function(e){return y.openModal(e,"addArticle")})}," 新增文章 ")]),Object(a["createVNode"])("div",s,[""===k.searchArticle?(Object(a["openBlock"])(),Object(a["createBlock"])("small",n,[0==k.totalArticles.length?(Object(a["openBlock"])(),Object(a["createBlock"])("p",d,"目前尚無文章")):(Object(a["openBlock"])(),Object(a["createBlock"])("p",m,"目前有 "+Object(a["toDisplayString"])(k.totalArticles.length)+" 篇文章",1))])):(Object(a["openBlock"])(),Object(a["createBlock"])("small",b,[0==y.filterArticle.length?(Object(a["openBlock"])(),Object(a["createBlock"])("p",u,"目前尚無文章")):(Object(a["openBlock"])(),Object(a["createBlock"])("p",p,"目前有 "+Object(a["toDisplayString"])(y.filterArticle.length)+" 篇文章",1))]))])])]),Object(a["createVNode"])("div",h,[Object(a["createVNode"])("table",O,[g,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(y.filterArticle,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e.id,"data-bs-toggle":"collapse",href:"#collapseArticle-"+t,"aria-expanded":"false","aria-controls":"collapseArticle-"+t,class:"light-primary-hover",title:"點擊看詳細內容"},[f,Object(a["createVNode"])("td",j,[Object(a["createVNode"])("p",null,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.title)+" ",1),Object(a["createVNode"])("i",{class:["bi align-bottom d-inline",{"text-success":e.isPublic,"bi-check-circle-fill":e.isPublic,"text-gray":!e.isPublic,"bi-dash-circle":!e.isPublic}]},null,2)]),Object(a["createVNode"])("small",{class:"collapse",id:"collapseArticle-"+t},Object(a["toDisplayString"])(e.description),9,["id"])]),v,Object(a["createVNode"])("td",A,[Object(a["createVNode"])("a",null,[Object(a["createVNode"])("span",{class:"material-icons",onClick:function(t){return y.openModal(e,"editArticle")}}," mode_edit ",8,["onClick"])]),Object(a["createVNode"])("a",V,[Object(a["createVNode"])("span",{class:"material-icons",onClick:function(t){return y.openModal(e,"deleteArticle")},"data-bs-toggle":"modal","data-bs-target":"#deleteModal"}," delete ",8,["onClick"])])])],8,["href","aria-controls"])})),128))])]),k.showAlert?(Object(a["openBlock"])(),Object(a["createBlock"])(w,{key:0,"alert-msg":k.alertMsg},null,8,["alert-msg"])):Object(a["createCommentVNode"])("",!0),k.pagination.total_pages>1?(Object(a["openBlock"])(),Object(a["createBlock"])(M,{key:1,page:k.pagination,onEmitPagination:y.getData},null,8,["page","onEmitPagination"])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(B,{"modal-title":k.modalTitle,temp:k.temp,onEmitArticleModal:y.addNewArticle,ref:"articleModal"},null,8,["modal-title","temp","onEmitArticleModal"]),Object(a["createVNode"])(x,{temp:k.temp,onEmitDeleteModal:y.deleteArticle},null,8,["temp","onEmitDeleteModal"])])],64)}var k=c("5530"),y=(c("99af"),c("4de4"),c("ac1f"),c("466d"),c("98ab")),w=c("1799"),M=c("7b17"),B={id:"articleModal",class:"modal fade",tabindex:"-1","aria-labelledby":"articleModalLabel","aria-hidden":"true"},x={class:"modal-dialog modal-xl"},C={class:"modal-content article-modal-bg"},T={class:"modal-body"},D=Object(a["createVNode"])("button",{type:"button",class:"close-modal-btn close-modal-lg-btn bg-light-primary","data-bs-dismiss":"modal","aria-label":"Close"},[Object(a["createVNode"])("span",{class:"material-icons"}," clear ")],-1),U={class:"container-fluid"},I={class:"row"},S={class:"col-4"},L={class:"bg-light-primary p-3 rounded-3"},E={class:"mb-2"},P=Object(a["createVNode"])("label",{for:"imgUrl",class:"form-label"},"文章圖片",-1),$=Object(a["createVNode"])("button",{type:"button",class:"btn btn-dark-primary mb-2","data-bs-toggle":"collapse",href:"#collapseAddImgs","aria-expanded":"false","aria-controls":"collapseAddImgs"}," 新增其他圖片 ",-1),J={class:"collapse",id:"collapseAddImgs"},_={class:"d-flex mb-2"},F=Object(a["createVNode"])("span",{class:"material-icons"}," add_task ",-1),R={class:"row g-1"},q={class:"col-4 mb-2"},z=Object(a["createVNode"])("span",{class:"modal-delete-btn material-icons"}," delete ",-1),G={key:1,class:"modal-img-default"},H=Object(a["createVNode"])("span",{class:"modal-delete-btn material-icons"}," delete ",-1),K={key:1,class:"modal-img-default"},Q={class:"col-8"},W={class:"mb-4"},X={class:"mb-2"},Y=Object(a["createVNode"])("label",{for:"articleTitle",class:"form-label"},"文章標題",-1),Z={class:"mb-2"},ee=Object(a["createVNode"])("label",{for:"articleTag",class:"form-label"},"文章標籤",-1),te={class:"d-flex"},ce=Object(a["createVNode"])("span",{class:"material-icons"}," add_task ",-1),ae={class:"mb-2"},le=Object(a["createVNode"])("label",{for:"articleDescription",class:"form-label"},"文章描述",-1),oe={class:"mb-2"},re=Object(a["createVNode"])("label",{for:"articleContent",class:"form-label"},"適用規定",-1),ie={class:"form-check"},se=Object(a["createVNode"])("label",{class:"form-check-label",for:"articleEnabled"},"文章是否公開發佈",-1),ne={class:"d-flex justify-content-center"},de=Object(a["createVNode"])("div",{class:"spinner-border spinner-border-sm text-dark d-none",role:"status"},[Object(a["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),me={class:"ms-1"},be=Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-dark w-25 d-block ms-3","data-bs-dismiss":"modal"}," 取消 ",-1);function ue(e,t,c,l,o,r){var i=Object(a["resolveComponent"])("alert");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])("div",B,[Object(a["createVNode"])("div",x,[Object(a["createVNode"])("div",C,[Object(a["createVNode"])("div",T,[D,Object(a["createVNode"])("div",U,[Object(a["createVNode"])("div",I,[Object(a["createVNode"])("div",S,[Object(a["createVNode"])("div",L,[Object(a["createVNode"])("div",E,[P,Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",id:"imgUrl",class:"form-control",placeholder:"請輸入圖片網址","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.tempArticle.image=e})},null,512),[[a["vModelText"],o.tempArticle.image]])]),$,Object(a["createVNode"])("div",J,[Object(a["createVNode"])("div",_,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",class:"form-control",placeholder:"請輸入圖片網址","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.tempArticle.otherImageUrl=e})},null,512),[[a["vModelText"],o.tempArticle.otherImageUrl]]),Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-dark-primary rounded-pill ms-2",onClick:t[3]||(t[3]=function(){return r.addImgs&&r.addImgs.apply(r,arguments)})},[F])])]),Object(a["createVNode"])("ul",R,[Object(a["createVNode"])("li",q,[o.tempArticle.image?(Object(a["openBlock"])(),Object(a["createBlock"])("button",{key:0,class:"modal-img-outer",type:"button",onClick:t[4]||(t[4]=function(e){return r.deleteImgs(e,"mainImg")})},[Object(a["createVNode"])("img",{src:o.tempArticle.image,alt:"主圖片",class:"modal-img"},null,8,["src"]),z])):(Object(a["openBlock"])(),Object(a["createBlock"])("div",G))]),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(o.tempArticle.imagesUrl,(function(e,c){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{class:"col-4 mb-2",key:e},[e?(Object(a["openBlock"])(),Object(a["createBlock"])("button",{key:0,class:"modal-img-outer",type:"button",onClick:t[5]||(t[5]=function(e){return r.deleteImgs(e,"subImg")}),"data-img":c},[Object(a["createVNode"])("img",{src:e,alt:"副圖片",class:"modal-img"},null,8,["src"]),H],8,["data-img"])):(Object(a["openBlock"])(),Object(a["createBlock"])("div",K))])})),128))])])]),Object(a["createVNode"])("div",Q,[Object(a["createVNode"])("form",W,[Object(a["createVNode"])("div",X,[Y,Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",id:"articleTitle",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=function(e){return o.tempArticle.title=e})},null,512),[[a["vModelText"],o.tempArticle.title]])]),Object(a["createVNode"])("div",Z,[ee,Object(a["createVNode"])("div",te,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{name:"articleTag",id:"articleTag",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=function(e){return o.tempArticle.tempTag=e})},null,512),[[a["vModelText"],o.tempArticle.tempTag]]),Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-dark-primary rounded-pill ms-2",onClick:t[8]||(t[8]=function(){var t;return o.tempArticle.tag[e.key]&&(t=o.tempArticle.tag)[e.key].apply(t,arguments)})},[ce])])]),Object(a["createVNode"])("div",ae,[le,Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{name:"articleDescription",id:"articleDescription",class:"form-control",cols:"30",rows:"3","onUpdate:modelValue":t[9]||(t[9]=function(e){return o.tempArticle.description=e})},null,512),[[a["vModelText"],o.tempArticle.description]])]),Object(a["createVNode"])("div",oe,[re,Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{name:"articleContent",id:"articleContent",class:"form-control",cols:"30",rows:"3","onUpdate:modelValue":t[10]||(t[10]=function(e){return o.tempArticle.content=e})},null,512),[[a["vModelText"],o.tempArticle.content]])]),Object(a["createVNode"])("div",ie,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"checkbox",class:"form-check-input",id:"articleEnabled","onUpdate:modelValue":t[11]||(t[11]=function(e){return o.tempArticle.isPublic=e})},null,512),[[a["vModelCheckbox"],o.tempArticle.isPublic]]),se])]),Object(a["createVNode"])("div",ne,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-primary w-25 d-flex justify-content-center align-items-center",ref:"articleAdminBtn",onClick:t[12]||(t[12]=function(t){return e.$emit("emit-article-modal",c.modalTitle,o.tempArticle)})},[de,Object(a["createVNode"])("p",me,Object(a["toDisplayString"])(c.modalTitle),1)],512),be])])])])])])])]),o.showAlert?(Object(a["openBlock"])(),Object(a["createBlock"])(i,{key:0,"alert-msg":o.alertMsg},null,8,["alert-msg"])):Object(a["createCommentVNode"])("",!0)],64)}c("a434");var pe={props:["modalTitle","temp"],data:function(){return{tempArticle:{},showAlert:!1,alertMsg:""}},components:{alert:y["a"]},methods:{customAlert:function(e){this.alertMsg=e,this.showAlert=!0},closeCustomAlert:function(){this.showAlert=!1},addImgs:function(){this.tempArticle.imagesUrl.length<5?(this.tempArticle.imagesUrl.push(this.tempArticle.otherImageUrl),this.tempArticle.otherImageUrl=""):this.customAlert("最多只可上傳六張照片")},deleteImgs:function(e,t){if("mainImg"===t)this.tempArticle.image="";else if("subImg"===t){var c=e.currentTarget.dataset.img;this.tempArticle.imagesUrl.splice(c,1)}}},watch:{temp:function(){this.tempArticle=JSON.parse(JSON.stringify(this.temp)),this.tempArticle.tag=this.temp.tag||[]}},created:function(){this.tempArticle=JSON.parse(JSON.stringify(this.temp))}};pe.render=ue;var he=pe,Oe=c("ec05"),ge={data:function(){return{temp:{title:"",description:"",image:"",tag:[],tempTag:"",create_at:0,author:"",isPublic:!0,content:"",otherImageUrl:"",imagesUrl:[]},articles:[],totalArticles:[],pagination:{},modalTitle:"",articleModal:{},deleteModal:{},searchArticle:"",showAlert:!1,alertMsg:""}},components:{alert:y["a"],pagination:w["a"],articleEditModal:he,articleDeleteModal:Oe["a"]},methods:{getData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/admin/articles/?page=").concat(t)).then((function(t){if(t.data.success){var c=t.data;e.articles=c.articles,e.pagination=t.data.pagination}else e.customAlert(t.data.message)})).catch((function(t){e.customAlert(t.response)}))},customAlert:function(e){this.alertMsg=e,this.showAlert=!0},closeCustomAlert:function(){this.showAlert=!1},openModal:function(e,t){switch(t){case"addArticle":this.clearModal(),this.modalTitle="新增",this.articleModal.show();break;case"editArticle":this.modalTitle="完成編輯",this.temp=Object(k["a"])({},e),!1===Object.prototype.hasOwnProperty.call(this.temp,"imagesUrl")?this.temp.imagesUrl=[]:this.temp.imagesUrl=this.temp.imagesUrl.filter((function(e){return""!==e})),this.articleModal.show();break;case"deleteArticle":this.temp=Object(k["a"])({},e);break;default:break}},clearModal:function(){this.temp={}},addNewArticle:function(e,t){var c=this,a=this.$refs.articleModal.$refs.articleAdminBtn;a.classList.add("disabled"),a.children[0].classList.remove("d-none");var l={};if(l.data=Object(k["a"])({},t),l.data.isPublic=l.data.isPublic?1:0,delete l.data.otherImageUrl,"新增"===e)this.$http.post("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/admin/article"),l).then((function(e){e.data.success?(c.customAlert("新增完成"),c.getData(),a.classList.remove("disabled"),a.children[0].classList.add("d-none"),c.articleModal.hide(),window.setTimeout(c.closeCustomAlert,5e3)):(c.customAlert(e.data.message),a.classList.remove("disabled"),a.children[0].classList.add("d-none"))})).catch((function(e){c.customAlert(e.response),a.classList.remove("disabled"),a.children[0].classList.add("d-none")}));else if("完成編輯"===e){var o=t.id;this.$http.put("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/admin/article/").concat(o),l).then((function(e){e.data.success?(c.customAlert("編輯成功"),c.getData(),a.classList.remove("disabled"),a.children[0].classList.add("d-none"),c.articleModal.hide(),window.setTimeout(c.closeCustomAlert,5e3)):(c.customAlert(e.data.message),a.classList.remove("disabled"),a.children[0].classList.add("d-none"))})).catch((function(e){c.customAlert(e.response),a.classList.remove("disabled"),a.children[0].classList.add("d-none")}))}},deleteArticle:function(){var e=this,t=this.temp.id;this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/admin/article/").concat(t)).then((function(t){t.data.success?(e.customAlert("刪除成功"),e.getData(),e.clearModal(),e.deleteModal.hide(),window.setTimeout(e.closeCustomAlert,5e3)):e.customAlert(t.data.message)})).catch((function(t){e.customAlert(t.response)}))}},computed:{filterArticle:function(){var e=this;return""!==this.searchArticle?this.totalArticles.filter((function(t){return t.title.match(e.searchArticle)})):this.articles}},created:function(){this.getData()},mounted:function(){this.articleModal=new M["a"](document.getElementById("articleModal"),{keyboard:!1}),this.deleteModal=new M["a"](document.getElementById("deleteModal"),{keyboard:!1})}};ge.render=N;t["default"]=ge},a434:function(e,t,c){"use strict";var a=c("23e7"),l=c("23cb"),o=c("a691"),r=c("50c4"),i=c("7b0b"),s=c("65f0"),n=c("8418"),d=c("1dde"),m=d("splice"),b=Math.max,u=Math.min,p=9007199254740991,h="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!m},{splice:function(e,t){var c,a,d,m,O,g,f=i(this),j=r(f.length),v=l(e,j),A=arguments.length;if(0===A?c=a=0:1===A?(c=0,a=j-v):(c=A-2,a=u(b(o(t),0),j-v)),j+c-a>p)throw TypeError(h);for(d=s(f,a),m=0;m<a;m++)O=v+m,O in f&&n(d,m,f[O]);if(d.length=a,c<a){for(m=v;m<j-a;m++)O=m+a,g=m+c,O in f?f[g]=f[O]:delete f[g];for(m=j;m>j-a+c;m--)delete f[m-1]}else if(c>a)for(m=j-a;m>v;m--)O=m+a-1,g=m+c-1,O in f?f[g]=f[O]:delete f[g];for(m=0;m<c;m++)f[m+v]=arguments[m+2];return f.length=j-a+c,d}})},e01a:function(e,t,c){"use strict";var a=c("23e7"),l=c("83ab"),o=c("da84"),r=c("5135"),i=c("861d"),s=c("9bf2").f,n=c("e893"),d=o.Symbol;if(l&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var m={},b=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof b?new d(e):void 0===e?d():d(e);return""===e&&(m[t]=!0),t};n(b,d);var u=b.prototype=d.prototype;u.constructor=b;var p=u.toString,h="Symbol(test)"==String(d("test")),O=/^Symbol\((.*)\)[^)]+$/;s(u,"description",{configurable:!0,get:function(){var e=i(this)?this.valueOf():this,t=p.call(e);if(r(m,e))return"";var c=h?t.slice(7,-1):t.replace(O,"$1");return""===c?void 0:c}}),a({global:!0,forced:!0},{Symbol:b})}}}]);
//# sourceMappingURL=chunk-fc0dc4a6.0f3af037.js.map