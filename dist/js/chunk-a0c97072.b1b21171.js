(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a0c97072"],{"07ac":function(e,t,c){var a=c("23e7"),o=c("6f53").values;a({target:"Object",stat:!0},{values:function(e){return o(e)}})},2355:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),o={class:"pt-7 flex-fill"},r={class:"pt-5"},l={key:0,class:"step-list d-flex justify-content-center"},n={class:"step-icon"},s={key:0,class:"bi bi-flag-fill d-block"},i={class:"step-icon"},d={key:0,class:"bi bi-flag-fill d-block"},b={class:"step-item ms-md-5 ms-3"},u={class:"step-icon"},m={key:0,class:"bi bi-flag-fill d-block"},p=Object(a["createVNode"])("p",{class:"step-text h3-md h4 text-center"}," 完成 ",-1);function j(e,t,c,j,O,h){var f=Object(a["resolveComponent"])("CheckCart"),N=Object(a["resolveComponent"])("ConfirmCart"),V=Object(a["resolveComponent"])("FinishCart"),g=Object(a["resolveComponent"])("Alert");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])("div",o,[Object(a["createVNode"])("div",r,[O.checkCartPageShow||O.confirmCartPageShow?(Object(a["openBlock"])(),Object(a["createBlock"])("ul",l,[Object(a["createVNode"])("li",{class:["step-item",{"bg-secondary":O.checkCartPageShow}]},[Object(a["createVNode"])("div",n,[O.checkCartPageShow?(Object(a["openBlock"])(),Object(a["createBlock"])("i",s)):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("p",{class:["step-text h3-md h4 text-center",{"text-light":O.checkCartPageShow}]}," 查看 ",2)],2),Object(a["createVNode"])("li",{class:["step-item ms-md-5 ms-3",{"bg-secondary":O.confirmCartPageShow}]},[Object(a["createVNode"])("div",i,[O.confirmCartPageShow?(Object(a["openBlock"])(),Object(a["createBlock"])("i",d)):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("p",{class:["step-text h3-md h4 text-center",{"text-light":O.confirmCartPageShow}]}," 確認 ",2)],2),Object(a["createVNode"])("li",b,[Object(a["createVNode"])("div",u,[O.finishCartPageShow?(Object(a["openBlock"])(),Object(a["createBlock"])("i",m)):Object(a["createCommentVNode"])("",!0)]),p])])):Object(a["createCommentVNode"])("",!0),O.checkCartPageShow?(Object(a["openBlock"])(),Object(a["createBlock"])(f,{key:1,ref:"checkCart",customer:O.customerDetail,"other-info":O.otherDetail,"cart-info":O.cart,"scroll-btn-status":O.scrollBtnShow,"contact-info-input-status":O.contactInfoInputShow,"product-max-pax":O.productMaxPaxQty,"total-products-max-pax":O.totalProductsMaxPaxQty,onEmitChangeTktNum:h.changeTktNum,onEmitDeleteTab:h.deleteTab,onEmitDeleteProduct:h.deleteProduct,onEmitNextPage:h.saveCustomerDetail,onEmitAlert:h.customAlert},null,8,["customer","other-info","cart-info","scroll-btn-status","contact-info-input-status","product-max-pax","total-products-max-pax","onEmitChangeTktNum","onEmitDeleteTab","onEmitDeleteProduct","onEmitNextPage","onEmitAlert"])):Object(a["createCommentVNode"])("",!0),O.confirmCartPageShow?(Object(a["openBlock"])(),Object(a["createBlock"])(N,{key:2,ref:"confirmCart",customer:O.customerDetail,"cart-info":O.cart,"other-info":O.otherDetail,payment:O.paymentDetail,"scroll-btn-status":O.scrollBtnShow,onEmitCheckCoupon:h.checkCoupon,onEmitPrePage:h.backToFirstPage,onEmitAddOrder:h.addOrder},null,8,["customer","cart-info","other-info","payment","scroll-btn-status","onEmitCheckCoupon","onEmitPrePage","onEmitAddOrder"])):Object(a["createCommentVNode"])("",!0),O.finishCartPageShow?(Object(a["openBlock"])(),Object(a["createBlock"])(V,{key:3,"order-detail":O.orderDetail,onEmitAlert:h.customAlert},null,8,["order-detail","onEmitAlert"])):Object(a["createCommentVNode"])("",!0)])]),O.showAlert?(Object(a["openBlock"])(),Object(a["createBlock"])(g,{key:0,"alert-msg":O.alertMsg},null,8,["alert-msg"])):Object(a["createCommentVNode"])("",!0)],64)}var O=c("2909"),h=c("5530"),f=c("3835"),N=(c("99af"),c("159b"),c("caad"),c("2532"),c("b64b"),c("0481"),c("7db0"),c("d81d"),c("4e82"),c("a630"),c("3ca3"),c("a434"),c("b0c0"),c("a02d")),V=(c("a15b"),c("ac1f"),c("1276"),{class:"container py-8 position-relative"}),g={class:"bg-light rounded-3 p-sm-7 p-3"},k={class:"row g-sm-7 g-3"},y={class:"col-lg-6 cart-scroll-box position-relative d-lg-block d-flex mb-lg-0 mb-md-3 mb-6",ref:"scrollBtn"},v={class:"pb-3 mb-3 border-bottom border-gray"},x={class:"row justify-content-between mb-sm-3 mb-2"},D={class:"col-4"},B={class:"h5 mb-2 d-sm-block d-none"},C={class:"col-8 d-flex flex-column justify-content-between"},w={class:"h5 mb-2 d-sm-none"},S={class:"mb-md-8 mb-6"},P={class:"h4-sm h5"},I={class:"text-end"},M={class:"d-flex justify-content-evenly"},L={key:0,class:"d-flex align-items-center h4-sm h5"},T=Object(a["createVNode"])("i",{class:"bi bi-dash-lg"},null,-1),U=Object(a["createVNode"])("div",{class:"spinner-border spinner-border-sm text-dark d-none",role:"status"},[Object(a["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),_=Object(a["createVNode"])("i",{class:"bi bi-plus-lg"},null,-1),E={key:0},A={key:1},$={key:2},q={key:1,class:"d-flex align-items-center h4-sm h5"},F=Object(a["createVNode"])("i",{class:"bi bi-dash-lg"},null,-1),W=Object(a["createVNode"])("div",{class:"spinner-border spinner-border-sm text-dark d-none",role:"status"},[Object(a["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),Q=Object(a["createVNode"])("i",{class:"bi bi-plus-lg"},null,-1),G=Object(a["createTextVNode"])(" 小 "),H=Object(a["createVNode"])("div",{class:"spinner-border spinner-border-sm text-dark d-none",role:"status"},[Object(a["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),z={key:0,class:"scroll-btn d-lg-inline d-none",ref:"scrollTooltipDownCheck"},R=Object(a["createVNode"])("span",{class:"ms-1"},"請向下滾動",-1),J=Object(a["createVNode"])("i",{class:"bi bi-arrow-down-short"},null,-1),Z={class:"col-lg-6"},K={class:"tab-content mb-6"},X={class:"d-flex justify-content-between"},Y={class:"mb-6 h3"},ee={key:0,class:"h4"},te={key:0},ce={class:"mb-3"},ae={class:"mb-3"},oe=Object(a["createVNode"])("option",{disabled:"",value:""},"請選擇稱謂",-1),re=Object(a["createVNode"])("option",{selected:"",value:"先生"},"先生",-1),le=Object(a["createVNode"])("option",{value:"女士"},"女士",-1),ne={class:"mb-3"},se={class:"mb-3"},ie={key:0,class:"mb-3"},de={key:1,class:"mb-3"},be={key:2,class:"mb-3"},ue={class:"bg-decoration"},me={class:"tab-pane fade",id:"pills-pax-note",role:"tabpanel","aria-labelledby":"pills-tab-note"},pe={class:"mb-3"},je={class:"h5 text-gray-dark mb-1"},Oe={class:"h3 mb-1"},he={key:0,class:"mb-3"},fe={key:1,class:"mb-3"},Ne={key:2,class:"mb-3"},Ve={key:3,class:"mb-3"},ge={class:"form-check"},ke={key:4},ye={class:"mb-3"},ve={class:"mb-3"},xe={class:"mb-3"},De={key:5,class:"mb-3"},Be=Object(a["createVNode"])("label",{for:"note-translateLanguage",class:"form-label"},"導覽語言",-1),Ce=Object(a["createVNode"])("option",{value:"中文",selected:""},"中文",-1),we={key:0,value:"英文"},Se={key:1,value:"日文"},Pe=Object(a["createVNode"])("label",{for:"note-bookMessageCart",class:"form-label"},"其他特殊需求（飲食、禁菸房...）",-1),Ie={class:"nav nav-pills justify-content-center flex-wrap mb-8",id:"check-cart-customer-pills-tab",role:"tablist"},Me={key:0,class:"bi bi-exclamation-triangle-fill warning-icon"},Le=Object(a["createVNode"])("i",{class:"bi bi-x"},null,-1),Te={class:"nav-item"},Ue=Object(a["createVNode"])("i",{class:"bi bi-person-plus"},null,-1),_e={class:"nav-item ms-3 position-relative",role:"presentation"},Ee={key:0,class:"bi bi-exclamation-triangle-fill warning-icon"},Ae={class:"d-flex flex-column align-items-end"},$e={class:"h3 mb-3"},qe=Object(a["createTextVNode"])(" 總金額 "),Fe={class:"h2 text-primary"},We=Object(a["createVNode"])("p",{class:"h3"},"下一步",-1),Qe={class:"modal fade",id:"paxModal",tabindex:"-1","aria-labelledby":"paxModalLabel","aria-hidden":"true"},Ge={class:"modal-dialog modal-dialog-centered modal-lg"},He={class:"modal-content"},ze={class:"modal-body p-6"},Re=Object(a["createVNode"])("h3",{class:"text-center mb-6 pb-3 border-bottom border-gray"},"請配對各商品旅客",-1),Je={class:"cart-scroll-box position-relative d-block mb-6",ref:"scrollBtnModal"},Ze={class:"pb-3 mb-3 border-bottom border-gray"},Ke={class:"row justify-content-between mb-sm-3 mb-2"},Xe={class:"col-4"},Ye={class:"h5 mb-2 d-sm-block d-none"},et={class:"col-8 d-flex flex-column justify-content-between"},tt={class:"h5 mb-2 d-sm-none"},ct={class:"mb-sm-6 mb-3"},at={class:"h3-sm mb-2"},ot={class:"h4-sm h5"},rt={class:"text-end"},lt={class:"d-sm-flex align-items-center"},nt={class:"d-flex flex-wrap btn-group",role:"group","aria-label":"Basic checkbox toggle button group"},st={class:"d-flex justify-content-evenly"},it={key:0,class:"d-flex align-items-center h4-sm h5"},dt={class:"p-1"},bt={key:0},ut={key:1},mt={key:2},pt={key:1,class:"d-flex align-items-center h4-sm h5"},jt={class:"p-1"},Ot=Object(a["createTextVNode"])(" 小 "),ht={key:0,class:"scroll-btn d-lg-inline d-none",ref:"scrollTooltipDownCheckModal"},ft=Object(a["createVNode"])("span",{class:"ms-1"},"請向下滾動",-1),Nt=Object(a["createVNode"])("i",{class:"bi bi-arrow-down-short"},null,-1),Vt={class:"text-center"},gt={class:"text-center mb-md-6 mb-3"},kt=Object(a["createVNode"])("p",{class:"mb-4 h3"}," 購物車目前還沒有商品耶 ",-1),yt={class:"mb-2"},vt=Object(a["createTextVNode"])(" 要不要 "),xt=Object(a["createTextVNode"])(" 來這裡挑挑看、選選看 "),Dt=Object(a["createTextVNode"])(" 呢？ "),Bt=Object(a["createTextVNode"])(" 也可以 "),Ct=Object(a["createTextVNode"])(" 來這裡尋找玩樂靈感 "),wt=Object(a["createTextVNode"])(" 唷！ "),St={class:"empty-cart-img"};function Pt(e,t,c,o,r,l){var n=Object(a["resolveComponent"])("router-link"),s=Object(a["resolveComponent"])("Field"),i=Object(a["resolveComponent"])("ErrorMessage"),d=Object(a["resolveComponent"])("FlatPickr"),b=Object(a["resolveComponent"])("Form");return Object(a["openBlock"])(),Object(a["createBlock"])("div",V,[Object(a["createVNode"])("div",g,[Object(a["withDirectives"])(Object(a["createVNode"])("div",k,[Object(a["createVNode"])("div",y,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.cart.carts,(function(t,c){return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:t.id},[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(t.options,(function(o,l){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:l,class:["d-inline-block cart-scroll-box-item ms-lg-0",{"ms-3":0!==c||0!==l}]},[Object(a["createVNode"])("div",{class:["px-3 py-4 border border-primary bg-white rounded-1 position-relative",{"border-danger":r.productWarningShow[c],"mb-lg-6":c!==r.cart.carts.length-1||l!==t.options.length-1}]},[Object(a["createVNode"])("div",v,[Object(a["createVNode"])("div",x,[Object(a["createVNode"])("div",D,[Object(a["createVNode"])("p",B,Object(a["toDisplayString"])(o.start_date.split("-").join(" / ")),1),Object(a["createVNode"])("img",{src:t.product.imageUrl,alt:t.title,class:"cart-img"},null,8,["src","alt"])]),Object(a["createVNode"])("div",C,[Object(a["createVNode"])("p",w,Object(a["toDisplayString"])(o.start_date.split("-").join(" / ")),1),Object(a["createVNode"])("div",S,[Object(a["createVNode"])(n,{to:"/product/".concat(t.product.id),title:"查看更多",class:"text-secondary h3-sm mb-2"},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.product.title),1)]})),_:2},1032,["to"]),Object(a["createVNode"])("p",P,Object(a["toDisplayString"])(o.optionName),1)]),Object(a["createVNode"])("p",I," NT "+Object(a["toDisplayString"])(e.$addComma(o.optionPrice*(o.qtyDetail.adult+o.qtyDetail.child))),1)])])]),Object(a["createVNode"])("div",M,[o.qtyDetail?(Object(a["openBlock"])(),Object(a["createBlock"])("div",L,[Object(a["createVNode"])("button",{type:"button",class:"border-0 bg-transparent p-2",onClick:function(c){return e.$emit("emit-change-tkt-num","adult","minus",o,l,t.id)}},[T],8,["onClick"]),Object(a["createVNode"])("div",{class:"p-1",ref:"adultStatus".concat(o.optionName,"-").concat(o.start_date)},[U,Object(a["createVNode"])("p",null,Object(a["toDisplayString"])(o.qtyDetail.adult),1)],512),Object(a["createVNode"])("button",{type:"button",class:"border-0 bg-transparent p-2",onClick:function(c){return e.$emit("emit-change-tkt-num","adult","plus",o,l,t.id)}},[_],8,["onClick"]),"每人"===t.product.lowestPriceUnit?(Object(a["openBlock"])(),Object(a["createBlock"])("span",E,"大")):"包車服務"!==t.product.category&&"每人"!==t.product.lowestPriceUnit?(Object(a["openBlock"])(),Object(a["createBlock"])("span",A,"組")):"包車服務"===t.product.category&&"每人"!==t.product.lowestPriceUnit?(Object(a["openBlock"])(),Object(a["createBlock"])("span",$,"台")):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0),o.qtyDetail&&"每人"===t.product.lowestPriceUnit?(Object(a["openBlock"])(),Object(a["createBlock"])("div",q,[Object(a["createVNode"])("button",{type:"button",class:"border-0 bg-transparent p-2",onClick:function(c){return e.$emit("emit-change-tkt-num","child","minus",o,l,t.id)}},[F],8,["onClick"]),Object(a["createVNode"])("div",{class:"p-1",ref:"childStatus".concat(o.optionName,"-").concat(o.start_date)},[W,Object(a["createVNode"])("p",null,Object(a["toDisplayString"])(o.qtyDetail.child),1)],512),Object(a["createVNode"])("button",{type:"button",class:"border-0 bg-transparent p-2",onClick:function(c){return e.$emit("emit-change-tkt-num","child","plus",o,l,t.id)}},[Q],8,["onClick"]),G])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("a",{type:"button",class:"delete-cart-icon",ref:"deleteCartProduct".concat(o.optionName)},[H,Object(a["createVNode"])("i",{class:"bi bi-trash-fill",onClick:function(c){return e.$emit("emit-delete-product",o,l,t.id)}},null,8,["onClick"])],512)])],2)],2)})),128))],64)})),128)),r.scrollBtnShow?(Object(a["openBlock"])(),Object(a["createBlock"])("div",z,[R,J],512)):Object(a["createCommentVNode"])("",!0)],512),Object(a["createVNode"])("div",Z,[Object(a["createVNode"])(b,{onSubmit:l.openPaxModal},{default:Object(a["withCtx"])((function(c){var o=c.errors;return[Object(a["createVNode"])("div",K,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.customerDetail.users,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:t,class:["tab-pane fade",{show:0===t,active:0===t}],id:"pills-pax-".concat(t),role:"tabpanel","aria-labelledby":"pills-tab-".concat(t)},[Object(a["createVNode"])("div",X,[Object(a["createVNode"])("p",Y,[Object(a["createTextVNode"])(" 第 "+Object(a["toDisplayString"])(t+1)+" 位旅客 ",1),0===t?(Object(a["openBlock"])(),Object(a["createBlock"])("span",ee," / 主要聯絡人")):Object(a["createCommentVNode"])("",!0)]),0!==t?(Object(a["openBlock"])(),Object(a["createBlock"])("div",te,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"checkbox",id:"sameInfo-".concat(t),"onUpdate:modelValue":function(e){return r.contactInfoInputShow[t]=e}},null,8,["id","onUpdate:modelValue"]),[[a["vModelCheckbox"],r.contactInfoInputShow[t]]]),Object(a["createVNode"])("label",{for:"sameInfo-".concat(t),class:"ms-1"},"聯絡資料等同主要聯絡人",8,["for"])])):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("div",ce,[Object(a["createVNode"])("label",{for:"bookNameCartInput-".concat(t),class:"form-label"},"姓名",8,["for"]),Object(a["createVNode"])(s,{type:"text",id:"bookNameCartInput-".concat(t),name:"第 ".concat(t+1," 位姓名"),class:["form-control",{"is-invalid":o["第 ".concat(t+1," 位姓名")]}],rules:"required",modelValue:r.customerDetail.users[t].name,"onUpdate:modelValue":function(e){return r.customerDetail.users[t].name=e}},null,8,["id","name","class","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(i,{name:"第 ".concat(t+1," 位姓名"),class:"invalid-feedback"},null,8,["name"])]),Object(a["createVNode"])("div",ae,[Object(a["createVNode"])("label",{for:"bookGenderCartInput-".concat(t),class:"form-label"},"稱謂",8,["for"]),Object(a["createVNode"])(s,{name:"第 ".concat(t+1," 位稱謂"),class:["form-select",{"is-invalid":o["第 ".concat(t+1," 位稱謂")]}],id:"bookGenderCartInput-".concat(t),rules:"required",modelValue:r.customerDetail.users[t].gender,"onUpdate:modelValue":function(e){return r.customerDetail.users[t].gender=e},as:"select"},{default:Object(a["withCtx"])((function(){return[oe,re,le]})),_:2},1032,["name","id","class","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(i,{name:"第 ".concat(t+1," 位稱謂"),class:"invalid-feedback"},null,8,["name"])]),Object(a["createVNode"])("div",ne,[Object(a["createVNode"])("label",{for:"bookIdNumCartInput-".concat(t),class:"form-label"},"身分證字號",8,["for"]),Object(a["createVNode"])(s,{type:"text",name:"第 ".concat(t+1," 位身分證"),class:["form-control",{"is-invalid":o["第 ".concat(t+1," 位身分證")]}],id:"bookIdNumCartInput-".concat(t),rules:l.isIdNum,modelValue:r.customerDetail.users[t].idNum,"onUpdate:modelValue":function(e){return r.customerDetail.users[t].idNum=e}},null,8,["name","id","class","rules","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(i,{name:"第 ".concat(t+1," 位身分證"),class:"invalid-feedback"},null,8,["name"])]),Object(a["createVNode"])("div",se,[Object(a["createVNode"])("label",{for:"bookPassportNumCartInput-".concat(t),class:"form-label"}," 護照號碼 ",8,["for"]),Object(a["createVNode"])(s,{type:"text",name:"第 ".concat(t+1," 位護照號碼"),class:["form-control",{"is-invalid":o["第 ".concat(t+1," 位護照號碼")]}],id:"bookPassportNumCartInput-".concat(t),rules:"required|length:9|numeric",modelValue:r.customerDetail.users[t].passportNum,"onUpdate:modelValue":function(e){return r.customerDetail.users[t].passportNum=e}},null,8,["name","id","class","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(i,{name:"第 ".concat(t+1," 位護照號碼"),class:"invalid-feedback"},null,8,["name"])]),!1===r.contactInfoInputShow[t]?(Object(a["openBlock"])(),Object(a["createBlock"])("div",ie,[Object(a["createVNode"])("label",{for:"bookTelCartInput-".concat(t),class:"form-label"},"聯繫電話",8,["for"]),Object(a["createVNode"])(s,{type:"tel",name:"第 ".concat(t+1," 位電話"),class:["form-control",{"is-invalid":o["第 ".concat(t+1," 位電話")]}],id:"bookTelCartInput-".concat(t),rules:"required|numeric|max:10",modelValue:r.customerDetail.users[t].tel,"onUpdate:modelValue":function(e){return r.customerDetail.users[t].tel=e}},null,8,["name","id","class","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(i,{name:"第 ".concat(t+1," 位電話"),class:"invalid-feedback"},null,8,["name"])])):Object(a["createCommentVNode"])("",!0),!1===r.contactInfoInputShow[t]?(Object(a["openBlock"])(),Object(a["createBlock"])("div",de,[Object(a["createVNode"])("label",{for:"bookEmailCartInput-".concat(t),class:"form-label"}," 電子信箱 ",8,["for"]),Object(a["createVNode"])(s,{type:"email",name:"第 ".concat(t+1," 位 email"),class:["form-control",{"is-invalid":o["第 ".concat(t+1," 位 email")]}],id:"bookEmailCartInput-".concat(t),placeholder:"customer@example.com",rules:"email|required",modelValue:r.customerDetail.users[t].email,"onUpdate:modelValue":function(e){return r.customerDetail.users[t].email=e}},null,8,["name","id","class","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(i,{name:"第 ".concat(t+1," 位 email"),class:"invalid-feedback"},null,8,["name"])])):Object(a["createCommentVNode"])("",!0),!1===r.contactInfoInputShow[t]?(Object(a["openBlock"])(),Object(a["createBlock"])("div",be,[Object(a["createVNode"])("label",{for:"bookAddrCartInput-".concat(t),class:"form-label"},"地址",8,["for"]),Object(a["createVNode"])(s,{type:"text",name:"第 ".concat(t+1," 位地址"),class:["form-control",{"is-invalid":o["第 ".concat(t+1," 位地址")]}],id:"bookAddrCartInput-".concat(t),rules:"required",modelValue:r.customerDetail.users[t].address,"onUpdate:modelValue":function(e){return r.customerDetail.users[t].address=e}},null,8,["name","id","class","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(i,{name:"第 ".concat(t+1," 位地址"),class:"invalid-feedback"},null,8,["name"])])):Object(a["createCommentVNode"])("",!0),Object(a["withDirectives"])(Object(a["createVNode"])("div",ue,null,512),[[a["vShow"],!1===r.contactInfoInputShow[t]]])],10,["id","aria-labelledby"])})),128)),Object(a["createVNode"])("div",me,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.otherDetail,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:t,class:"mb-6 pb-3 border-bottom border-gray"},[Object(a["createVNode"])("div",pe,[Object(a["createVNode"])("p",je,Object(a["toDisplayString"])(e.start_date),1),Object(a["createVNode"])("h4",Oe,Object(a["toDisplayString"])(e.product.title),1),Object(a["createVNode"])("h4",null,Object(a["toDisplayString"])(e.optionName),1)]),e.product.transfer.time?(Object(a["openBlock"])(),Object(a["createBlock"])("div",he,[Object(a["createVNode"])("label",{for:"note-pickupTime-".concat(t),class:"form-label"},"接送時間",8,["for"]),Object(a["createVNode"])(d,{config:r.config,id:"note-pickupTime-".concat(t),class:"form-control",modelValue:r.otherDetail[t].pickUpTime,"onUpdate:modelValue":function(e){return r.otherDetail[t].pickUpTime=e}},null,8,["config","id","modelValue","onUpdate:modelValue"])])):Object(a["createCommentVNode"])("",!0),e.product.transfer.place&&!1===e.optionName.includes("火車")&&!1===e.optionName.includes("高鐵")?(Object(a["openBlock"])(),Object(a["createBlock"])("div",fe,[Object(a["createVNode"])("label",{for:"note-pickupPlace-".concat(t),class:"form-label"},"接送地點",8,["for"]),Object(a["createVNode"])(s,{type:"text",id:"note-pickupPlace-".concat(t),name:"".concat(e.product.title,"：").concat(e.optionName," 的接送地點"),class:["form-control",{"is-invalid":o["".concat(e.product.title,"：").concat(e.optionName," 的接送地點")]}],rules:"required",modelValue:r.otherDetail[t].pickUpPlace,"onUpdate:modelValue":function(e){return r.otherDetail[t].pickUpPlace=e}},null,8,["id","name","class","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(i,{name:"".concat(e.product.title,"：").concat(e.optionName," 的接送地點"),class:"invalid-feedback"},null,8,["name"])])):Object(a["createCommentVNode"])("",!0),"包車服務"===e.product.category&&e.product.title.includes("包車")?(Object(a["openBlock"])(),Object(a["createBlock"])("div",Ne,[Object(a["createVNode"])("label",{for:"note-rentCarSchedule-".concat(t),class:"form-label"},"包車行程規劃",8,["for"]),Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{class:"form-control",id:"note-rentCarSchedule-".concat(t),rows:"6","onUpdate:modelValue":function(e){return r.otherDetail[t].schedule=e},placeholder:"歡迎提供您對包車行程的初步規劃，我們的司機將與您討論並協助行程安排"},null,8,["id","onUpdate:modelValue"]),[[a["vModelText"],r.otherDetail[t].schedule]])])):Object(a["createCommentVNode"])("",!0),e.product.transfer.childRestrict?(Object(a["openBlock"])(),Object(a["createBlock"])("div",Ve,[Object(a["createVNode"])("div",ge,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"form-check-input",type:"checkbox",id:"note-rentCarChildInclude-".concat(t),"onUpdate:modelValue":function(e){return r.otherDetail[t].includeChild=e}},null,8,["id","onUpdate:modelValue"]),[[a["vModelCheckbox"],r.otherDetail[t].includeChild]]),Object(a["createVNode"])("label",{class:"form-check-label",for:"note-rentCarChildInclude-".concat(t)}," 旅客中有未滿 4 歲孩童 ",8,["for"])])])):Object(a["createCommentVNode"])("",!0),r.otherDetail[t].includeChild?(Object(a["openBlock"])(),Object(a["createBlock"])("div",ke,[Object(a["createVNode"])("div",ye,[Object(a["createVNode"])("label",{for:"note-rentCarChildBd-".concat(t),class:"form-label"},"孩童出生年月日",8,["for"]),Object(a["createVNode"])(s,{type:"text",id:"note-rentCarChildBd-".concat(t),name:"".concat(e.product.title,"：").concat(e.optionName," 的出生日期"),class:["form-control",{"is-invalid":o["".concat(e.product.title,"：").concat(e.optionName," 的出生日期")]}],rules:l.isBirthday,placeholder:"1900 / 01 / 01",modelValue:r.otherDetail[t].childBd,"onUpdate:modelValue":function(e){return r.otherDetail[t].childBd=e}},null,8,["id","name","class","rules","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(i,{name:"".concat(e.product.title,"：").concat(e.optionName," 的出生日期"),class:"invalid-feedback"},null,8,["name"])]),Object(a["createVNode"])("div",ve,[Object(a["createVNode"])("label",{for:"note-rentCarChildHeight-".concat(t),class:"form-label"},"孩童身高",8,["for"]),Object(a["createVNode"])(s,{type:"text",id:"note-rentCarChildHeight-".concat(t),name:"".concat(e.product.title,"：").concat(e.optionName," 的孩童身高"),class:["form-control",{"is-invalid":o["".concat(e.product.title,"：").concat(e.optionName," 的孩童身高")]}],rules:"required|numeric|max:3",placeholder:"公分",modelValue:r.otherDetail[t].childHeight,"onUpdate:modelValue":function(e){return r.otherDetail[t].childHeight=e}},null,8,["id","name","class","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(i,{name:"".concat(e.product.title,"：").concat(e.optionName," 的孩童身高"),class:"invalid-feedback"},null,8,["name"])]),Object(a["createVNode"])("div",xe,[Object(a["createVNode"])("label",{for:"note-rentCarChildWeight-".concat(t),class:"form-label"},"孩童體重",8,["for"]),Object(a["createVNode"])(s,{type:"text",id:"note-rentCarChildWeight-".concat(t),name:"".concat(e.product.title,"：").concat(e.optionName," 的孩童體重"),class:["form-control",{"is-invalid":o["".concat(e.product.title,"：").concat(e.optionName," 的孩童體重")]}],rules:"required|numeric|max:3",placeholder:"公斤",modelValue:r.otherDetail[t].childWeight,"onUpdate:modelValue":function(e){return r.otherDetail[t].childWeight=e}},null,8,["id","name","class","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(i,{name:"".concat(e.product.title,"：").concat(e.optionName," 的孩童體重"),class:"invalid-feedback"},null,8,["name"])])])):Object(a["createCommentVNode"])("",!0),e.product.translate.eng||e.product.translate.jpy?(Object(a["openBlock"])(),Object(a["createBlock"])("div",De,[Be,Object(a["withDirectives"])(Object(a["createVNode"])("select",{class:"form-select",id:"note-translateLanguage","onUpdate:modelValue":function(e){return r.otherDetail[t].translateLanguage=e}},[Ce,e.product.translate.eng?(Object(a["openBlock"])(),Object(a["createBlock"])("option",we,"英文")):Object(a["createCommentVNode"])("",!0),e.product.translate.jpy?(Object(a["openBlock"])(),Object(a["createBlock"])("option",Se,"日文")):Object(a["createCommentVNode"])("",!0)],8,["onUpdate:modelValue"]),[[a["vModelSelect"],r.otherDetail[t].translateLanguage]])])):Object(a["createCommentVNode"])("",!0)])})),128)),Pe,Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{class:"form-control mb-3",id:"note-bookMessageCart",rows:"2","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.customerDetail.message=e}),placeholder:"此備註不在商品包含範圍，不保證提供，但我們仍將盡力替您達成特殊需求"},null,512),[[a["vModelText"],r.customerDetail.message]])])]),Object(a["createVNode"])("ul",Ie,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.customerDetail.users,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{class:["nav-item mb-1 position-relative",{"ms-3":0!==t}],role:"presentation",key:"paxNum-".concat(t)},[r.pageWarningShow[t]?(Object(a["openBlock"])(),Object(a["createBlock"])("i",Me)):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("button",{type:"button",class:["nav-link nav-link-outline-primary rounded-1",{active:0===t,"nav-link-danger":r.pageWarningShow[t]}],id:"pills-tab-".concat(t),"data-bs-toggle":"pill","data-bs-target":"#pills-pax-".concat(t),role:"tab","aria-controls":"pills-pax-".concat(t),"aria-selected":"false"},Object(a["toDisplayString"])(t+1),11,["id","data-bs-target","aria-controls"]),Object(a["createVNode"])("button",{type:"button",class:["delete-pax-num",{"d-none":0===t||r.customerDetail.users.length<=r.productMaxPaxQty}],title:"刪除第 ".concat(t+1," 位旅客"),onClick:function(e){return l.deletePax(t)}},[Le],10,["title","onClick"])],2)})),128)),Object(a["createVNode"])("li",Te,[Object(a["createVNode"])("button",{type:"button",class:["nav-link nav-link-outline-primary rounded-1 ms-3",{"d-none":r.customerDetail.users.length>=r.totalProductsMaxPaxQty}],title:"新增旅客",onClick:t[2]||(t[2]=function(e){return l.addPax()})},[Ue],2)]),Object(a["createVNode"])("li",_e,[r.noteWarningShow?(Object(a["openBlock"])(),Object(a["createBlock"])("i",Ee)):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("button",{type:"button",class:["nav-link nav-link-outline-primary rounded-1",{"nav-link-danger":r.noteWarningShow}],id:"pills-tab-note","data-bs-toggle":"pill","data-bs-target":"#pills-pax-note",role:"tab","aria-controls":"pills-pax-note","aria-selected":"false"}," 備註 ",2)])]),Object(a["createVNode"])("div",Ae,[Object(a["createVNode"])("h5",$e,[qe,Object(a["createVNode"])("span",Fe,"NT "+Object(a["toDisplayString"])(e.$addComma(Math.floor(r.cart.final_total))),1)]),Object(a["createVNode"])("button",{type:"submit",class:"btn btn-primary d-block px-5 py-2",onClick:t[3]||(t[3]=function(){return l.validationCheck&&l.validationCheck.apply(l,arguments)}),disabled:0==Object.keys(r.cart).length||0==r.cart.total},[We],8,["disabled"])])]})),_:1},8,["onSubmit"])])],512),[[a["vShow"],r.cart.total>0]]),Object(a["createVNode"])("div",Qe,[Object(a["createVNode"])("div",Ge,[Object(a["createVNode"])("div",He,[Object(a["createVNode"])("div",ze,[Re,Object(a["createVNode"])("div",Je,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.cart.carts,(function(t,c){return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:t.id},[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(t.options,(function(o,l){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:l,class:"d-inline-block w-100"},[Object(a["createVNode"])("div",{class:["px-3 py-4 border border-primary bg-white rounded-1 position-relative",{"border-danger":r.productWarningShow[c],"mb-6":c!==r.cart.carts.length-1||l!==t.options.length-1}]},[Object(a["createVNode"])("div",Ze,[Object(a["createVNode"])("div",Ke,[Object(a["createVNode"])("div",Xe,[Object(a["createVNode"])("p",Ye,Object(a["toDisplayString"])(o.start_date.split("-").join(" / ")),1),Object(a["createVNode"])("img",{src:t.product.imageUrl,alt:t.title,class:"cart-img"},null,8,["src","alt"])]),Object(a["createVNode"])("div",et,[Object(a["createVNode"])("p",tt,Object(a["toDisplayString"])(o.start_date.split("-").join(" / ")),1),Object(a["createVNode"])("div",ct,[Object(a["createVNode"])("p",at,Object(a["toDisplayString"])(t.product.title),1),Object(a["createVNode"])("p",ot,Object(a["toDisplayString"])(o.optionName),1)]),Object(a["createVNode"])("p",rt," NT "+Object(a["toDisplayString"])(e.$addComma(o.optionPrice*(o.qtyDetail.adult+o.qtyDetail.child))),1)])]),Object(a["createVNode"])("div",lt,[Object(a["createVNode"])("p",{class:["w-sm-25 mb-sm-0 mb-2 text-secondary fw-bold",{"text-danger":r.productWarningShow[c]}]}," 選擇旅客： ",2),Object(a["createVNode"])("div",nt,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.customerDetail.users,(function(e,c){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"ms-sm-2 me-sm-0 me-2",key:e.name},[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"checkbox",id:"".concat(e.name,"-").concat(o.optionName,"-").concat(o.start_date),autocomplete:"off",class:"btn-check",disabled:void 0===e.name||t.options[l].users.length>=t.options[l].optionQty&&!1===t.options[l].users.includes(c),value:c,"onUpdate:modelValue":function(e){return t.options[l].users=e}},null,8,["id","disabled","value","onUpdate:modelValue"]),[[a["vModelCheckbox"],t.options[l].users]]),Object(a["createVNode"])("label",{for:"".concat(e.name,"-").concat(o.optionName,"-").concat(o.start_date),class:"btn btn-outline-secondary rounded-2"},Object(a["toDisplayString"])(e.name||"待填"),9,["for"])])})),128))])])]),Object(a["createVNode"])("div",st,[o.qtyDetail?(Object(a["openBlock"])(),Object(a["createBlock"])("div",it,[Object(a["createVNode"])("div",dt,[Object(a["createVNode"])("p",null,Object(a["toDisplayString"])(o.qtyDetail.adult),1)]),"每人"===t.product.lowestPriceUnit?(Object(a["openBlock"])(),Object(a["createBlock"])("span",bt,"大")):"包車服務"!==t.product.category&&"每人"!==t.product.lowestPriceUnit?(Object(a["openBlock"])(),Object(a["createBlock"])("span",ut,"組")):"包車服務"===t.product.category&&"每人"!==t.product.lowestPriceUnit?(Object(a["openBlock"])(),Object(a["createBlock"])("span",mt,"台")):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0),o.qtyDetail&&"每人"===t.product.lowestPriceUnit?(Object(a["openBlock"])(),Object(a["createBlock"])("div",pt,[Object(a["createVNode"])("div",jt,[Object(a["createVNode"])("p",null,Object(a["toDisplayString"])(o.qtyDetail.child),1)]),Ot])):Object(a["createCommentVNode"])("",!0)])],2)])})),128))],64)})),128)),r.scrollBtnModalShow?(Object(a["openBlock"])(),Object(a["createBlock"])("div",ht,[ft,Nt],512)):Object(a["createCommentVNode"])("",!0)],512),Object(a["createVNode"])("div",Vt,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-primary w-50 py-2",onClick:t[4]||(t[4]=function(){return l.toNextPage&&l.toNextPage.apply(l,arguments)})}," 下一步 ")])])])])]),Object(a["withDirectives"])(Object(a["createVNode"])("div",null,[Object(a["createVNode"])("div",gt,[kt,Object(a["createVNode"])("p",yt,[vt,Object(a["createVNode"])(n,{to:"/product_list",title:"前往產品頁",class:"text-secondary fw-bold h3"},{default:Object(a["withCtx"])((function(){return[xt]})),_:1}),Dt]),Object(a["createVNode"])("p",null,[Bt,Object(a["createVNode"])(n,{to:"/article_list",title:"前往文章頁",class:"text-secondary fw-bold h3"},{default:Object(a["withCtx"])((function(){return[Ct]})),_:1}),wt])]),Object(a["createVNode"])("div",St,[Object(a["createVNode"])(n,{to:"/product_list?search=城市導覽",class:"empty-cart-tour-tag"}),Object(a["createVNode"])(n,{to:"/product_list?search=體驗票券",class:"empty-cart-tkt-tag"}),Object(a["createVNode"])(n,{to:"/product_list?search=包車服務",class:"empty-cart-car-tag"})])],512),[[a["vShow"],0===r.cart.total]])])])}c("d3b7");function It(e,t,c,a,o,r,l){try{var n=e[r](l),s=n.value}catch(i){return void c(i)}n.done?t(s):Promise.resolve(s).then(a,o)}function Mt(e){return function(){var t=this,c=arguments;return new Promise((function(a,o){var r=e.apply(t,c);function l(e){It(r,a,o,l,n,"next",e)}function n(e){It(r,a,o,l,n,"throw",e)}l(void 0)}))}}c("96cf"),c("6062"),c("ddb0"),c("07ac");var Lt=c("7b17"),Tt=c("a8ed"),Ut=c.n(Tt),_t=c("c38f"),Et=c.n(_t),At=(c("0952"),{props:["cartInfo","customer","otherInfo","contactInfoInputStatus","scrollBtnStatus","productMaxPax","totalProductsMaxPax"],emits:["emit-delete-all-products","emit-change-tkt-num","emit-delete-product","emit-add-pax","emit-delete-pax","emit-delete-tab","emit-next-page","emit-alert"],data:function(){return{config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,defaultDate:"08:00"},cart:{},customerDetail:{},otherDetail:[],scrollTooltipDownCheck:"",scrollTooltipDownCheckModal:"",scrollBtnShow:!0,scrollBtnModalShow:!0,contactInfoInputShow:[],noteWarningShow:!1,pageWarningShow:[],productWarningShow:[],productMaxPaxQty:0,totalProductsMaxPaxQty:0,paxModal:{}}},components:{FlatPickr:Et.a},methods:{isIdNum:function(e){var t=/^[A-Z][0-9]{9}$/;return!!t.test(e)||"請輸入正確的身分證字號"},isBirthday:function(e){var t=/^\d{4} \/ \d{2} \/ \d{2}$/;return!!t.test(e)||"請以正確格式輸入生日"},addPax:function(){this.customerDetail.users[this.customerDetail.users.length]={},this.contactInfoInputShow[this.customerDetail.users.length-1]=!1},deletePax:function(e){this.$emit("emit-delete-tab",e),this.customerDetail.users.splice(e,1),this.contactInfoInputShow.splice(e,1)},toNextPage:function(){for(var e=this,t=0;t<this.cart.carts.length;t+=1)this.productWarningShow[t]=!1;this.cart.carts.forEach((function(t,c){t.options.forEach((function(t){t.users.length!==t.optionQty&&(e.productWarningShow[c]=!0)}))})),this.productWarningShow.includes(!0)?this.$emit("emit-alert","請登錄每項商品的客戶"):(this.$emit("emit-next-page",this.customerDetail,this.otherDetail,this.contactInfoInputShow),this.paxModal.hide())},openPaxModal:function(){this.paxModal.show()},validationCheck:function(){var e=this;return Mt(regeneratorRuntime.mark((function t(){var c,a,o,r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ut()();case 2:if(c=document.querySelectorAll(".is-invalid"),a=[],o=[],c.length>0){for(e.$emit("emit-alert","請填寫客戶資料及相關備註"),c.forEach((function(e){a.push(e.id.split("-"))})),e.noteWarningShow=!!a.map((function(e){return e[0]})).includes("note"),a.forEach((function(e){"note"!==e[0]&&o.push(e[e.length-1])})),o=Object(O["a"])(new Set(o)),r=0;r<e.customerDetail.users.length;r+=1)e.pageWarningShow[r]=!1;o.forEach((function(t){e.pageWarningShow[t]=!0}))}else for(e.noteWarningShow=!1,l=0;l<e.customerDetail.users.length;l+=1)e.pageWarningShow[l]=!1;case 6:case"end":return t.stop()}}),t)})))()}},watch:{cartInfo:{handler:function(){var e=this;this.cart=Object(h["a"])({},this.cartInfo),this.cart.final_total=this.cartInfo.final_total,this.otherDetail=[],this.cart.carts.forEach((function(t){if(Object.values(t.product.transfer).includes(!0)||Object.values(t.product.translate).includes(!0))if(e.otherDetail.map((function(e){return e.id})).includes(t.id)){var c=e.otherDetail.map((function(e){return e.optionName})),a=e.otherDetail.map((function(e){return e.start_date}));t.options.forEach((function(o){!1===c.includes(o.optionName)&&!1===a.includes(o.start_date)&&e.otherDetail.push({id:t.id,product:Object(h["a"])({},t.product),optionName:o.optionName,start_date:o.start_date,pickUpTime:"",pickUpPlace:"",schedule:"",includeChild:!1,childBd:"",childHeight:"",childWeight:"",translateLanguage:"中文"})}))}else t.options.forEach((function(c){e.otherDetail.push({id:t.id,product:Object(h["a"])({},t.product),optionName:c.optionName,start_date:c.start_date,pickUpTime:"",pickUpPlace:"",schedule:"",includeChild:!1,childBd:"",childHeight:"",childWeight:"",translateLanguage:"中文"})}))})),this.otherDetail.forEach((function(t,c){t.product.transfer.time&&(e.otherDetail[c].pickUpTime=e.config.defaultDate)}));for(var t=this.contactInfoInputShow.length;t<this.customerDetail.users.length;t+=1)this.contactInfoInputShow[t]=!1},deep:!0},customer:{handler:function(){this.customerDetail=Object(h["a"])({},this.customer)},deep:!0},scrollBtnStatus:{handler:function(){this.scrollBtnShow=this.scrollBtnStatus,this.scrollBtnModalShow=this.scrollBtnStatus},deep:!0},productMaxPax:{handler:function(){this.productMaxPaxQty=this.productMaxPax},deep:!0},totalProductsMaxPax:{handler:function(){this.totalProductsMaxPaxQty=this.totalProductsMaxPax},deep:!0}},created:function(){this.cart=Object(h["a"])({},this.cartInfo),this.customerDetail=Object(h["a"])({},this.customer),this.otherDetail=Object(O["a"])(this.otherInfo),this.contactInfoInputShow=Object(O["a"])(this.contactInfoInputStatus),this.scrollBtnShow=this.scrollBtnStatus,this.scrollBtnModalShow=this.scrollBtnStatus,this.productMaxPaxQty=this.productMaxPax,this.totalProductsMaxPaxQty=this.totalProductsMaxPax},mounted:function(){var e=this;this.listenerScrollBtn=function(){var t=e.$refs.scrollBtn;e.scrollBtnShow=t.scrollTop<t.scrollHeight-600},this.listenerScrollBtnModal=function(){var t=e.$refs.scrollBtnModal;e.scrollBtnModalShow=t.scrollTop<t.scrollHeight-600},this.$refs.scrollBtn.addEventListener("scroll",this.listenerScrollBtn),this.$refs.scrollBtnModal.addEventListener("scroll",this.listenerScrollBtnModal),this.paxModal=new Lt["a"](document.getElementById("paxModal"),{keyboard:!1})}});At.render=Pt;var $t=At,qt={class:"container py-8"},Ft={class:"bg-light rounded-3 p-sm-7 p-3"},Wt={class:"row g-sm-7 g-3 mb-8"},Qt={class:"col-lg-6 cart-scroll-box position-relative d-lg-block d-flex",ref:"scrollBtn"},Gt={class:"pb-3 mb-3 border-bottom border-gray"},Ht={class:"row justify-content-between mb-sm-3 mb-2"},zt={class:"col-4"},Rt={class:"h5 mb-2 d-sm-block d-none"},Jt={class:"col-8 d-flex flex-column justify-content-between"},Zt={class:"h5 mb-2 d-sm-none"},Kt={class:"mb-sm-6 mb-3"},Xt={class:"h3-sm mb-2"},Yt={class:"h4-sm h5"},ec={class:"ms-2"},tc={key:0,class:"ms-1"},cc={key:1,class:"ms-1"},ac={key:2,class:"ms-1"},oc={key:3,class:"ms-1"},rc=Object(a["createVNode"])("span",{class:"ms-1"},"小",-1),lc={class:"text-end"},nc={key:0},sc={key:0,class:"mb-2"},ic=Object(a["createVNode"])("i",{class:"bi bi-check"},null,-1),dc=Object(a["createVNode"])("span",{class:"ms-1"},"接送時間：",-1),bc={class:"ms-1"},uc={key:1,class:"mb-2"},mc=Object(a["createVNode"])("i",{class:"bi bi-check"},null,-1),pc=Object(a["createVNode"])("span",{class:"ms-1"},"接送地點：",-1),jc={class:"ms-1"},Oc={key:2,type:"button","data-bs-toggle":"modal","data-bs-target":"#rentCarScheduleNoteModal",class:"text-secondary mb-2"},hc=Object(a["createVNode"])("i",{class:"bi bi-check"},null,-1),fc=Object(a["createVNode"])("span",{class:"ms-1"},"包車行程規劃",-1),Nc={key:3,class:"modal fade",id:"rentCarScheduleNoteModal",tabindex:"-1","aria-labelledby":"rentCarScheduleNoteModalLabel","aria-hidden":"true"},Vc={class:"modal-dialog modal-dialog-centered"},gc={class:"modal-content"},kc=Object(a["createVNode"])("div",{class:"modal-header bg-wave mb-3 position-relative"},[Object(a["createVNode"])("h3",null," 包車行程規劃： "),Object(a["createVNode"])("div",{class:"cable-car"})],-1),yc={class:"modal-body p-6"},vc={class:"text-break"},xc={key:4,type:"button","data-bs-toggle":"modal","data-bs-target":"#childInfoNoteModal",class:"text-secondary mb-2"},Dc=Object(a["createVNode"])("i",{class:"bi bi-check"},null,-1),Bc=Object(a["createVNode"])("span",{class:"ms-1"},"含未滿 4 歲孩童",-1),Cc={key:5,class:"modal fade",id:"childInfoNoteModal",tabindex:"-1","aria-labelledby":"childInfoNoteModalLabel","aria-hidden":"true"},wc={class:"modal-dialog modal-dialog-centered"},Sc={class:"modal-content"},Pc=Object(a["createVNode"])("div",{class:"modal-header bg-wave mb-3 position-relative"},[Object(a["createVNode"])("h3",null," 未滿 4 歲孩童： "),Object(a["createVNode"])("div",{class:"cable-car"})],-1),Ic={class:"modal-body p-6 text-center"},Mc={class:"mb-3"},Lc={class:"h3"},Tc=Object(a["createVNode"])("span",{class:"ms-2 h5"},"出生",-1),Uc={class:"mb-3"},_c={class:"h3"},Ec=Object(a["createVNode"])("span",{class:"ms-2 h5"},"公分",-1),Ac=Object(a["createVNode"])("span",{class:"ms-2"},"/",-1),$c={class:"h3 ms-2"},qc=Object(a["createVNode"])("span",{class:"ms-2 h5"},"公斤",-1),Fc={key:6,class:"mb-2"},Wc=Object(a["createTextVNode"])(" 導覽語言： "),Qc={class:"ms-1"},Gc={key:0,class:"mb-2"},Hc={class:"d-sm-flex align-items-center"},zc={class:"w-sm-25 mb-sm-0 mb-2"},Rc={key:0},Jc={key:1},Zc={class:"d-flex flex-wrap btn-group",role:"group","aria-label":"Basic checkbox toggle button group"},Kc={key:0,class:"scroll-btn d-lg-inline d-none",ref:"scrollTooltipDownCfm"},Xc=Object(a["createVNode"])("span",{class:"ms-1"},"請向下滾動",-1),Yc=Object(a["createVNode"])("i",{class:"bi bi-arrow-down-short"},null,-1),ea={class:"col-lg-6"},ta={class:"tab-content mb-6"},ca={class:"d-flex justify-content-between"},aa={class:"mb-6 h3"},oa={key:0,class:"h4"},ra={class:"mb-3"},la={class:"ms-1 h3"},na={class:"ms-3"},sa={class:"pb-6 mb-6 border-bottom border-gray"},ia={class:"mb-3"},da=Object(a["createTextVNode"])(" 身分證： "),ba={class:"ms-3"},ua={class:"pb-6 mb-6 border-bottom border-gray"},ma=Object(a["createTextVNode"])(" 護照號碼： "),pa={class:"ms-3"},ja={class:"mb-3"},Oa=Object(a["createVNode"])("i",{class:"text-primary bi bi-telephone-fill"},null,-1),ha={class:"ms-3"},fa={class:"mb-3"},Na=Object(a["createVNode"])("i",{class:"text-primary bi bi-envelope-fill"},null,-1),Va={class:"ms-3"},ga=Object(a["createVNode"])("i",{class:"text-primary bi bi-signpost-2-fill"},null,-1),ka={class:"ms-3"},ya={key:1},va=Object(a["createVNode"])("p",{class:"mb-6"},"個人明細",-1),xa={class:"w-25 h5"},Da={class:"ms-3 w-75"},Ba={class:"tab-pane fade",id:"pills-pax-note",role:"tabpanel","aria-labelledby":"pills-tab-note"},Ca=Object(a["createVNode"])("div",{class:"mb-6 pb-3 border-bottom border-gray"},[Object(a["createVNode"])("p",{class:"h3 mb-2"}," 其他特殊需求： "),Object(a["createVNode"])("p",{class:"text-gray-dark"}," 此備註不在商品包含範圍，不保證提供，但我們仍將盡力替您達成特殊需求 ")],-1),wa={class:"nav nav-pills justify-content-center flex-wrap",id:"cfm-cart-customer-pills-tab",role:"tablist"},Sa=Object(a["createVNode"])("li",{class:"nav-item ms-3 position-relative",role:"presentation"},[Object(a["createVNode"])("button",{type:"button",class:"nav-link nav-link-outline-primary rounded-1",id:"pills-tab-note","data-bs-toggle":"pill","data-bs-target":"#pills-pax-note",role:"tab","aria-controls":"pills-pax-note","aria-selected":"false"}," 其他備註 ")],-1),Pa={class:"w-lg-50 mx-auto"},Ia=Object(a["createVNode"])("h2",{class:"h3 text-primary mb-6"},"付款資料",-1),Ma={class:"row mb-7"},La={class:"mb-6"},Ta=Object(a["createVNode"])("label",{class:"form-label mb-3"},"付款方式",-1),Ua={class:"row g-sm-3 g-2"},_a={class:"col-4"},Ea=Object(a["createVNode"])("div",{class:"mb-3"},[Object(a["createVNode"])("i",{class:"bi bi-credit-card-2-back h2"})],-1),Aa=Object(a["createTextVNode"])(" 刷卡 "),$a={class:"col-4"},qa=Object(a["createVNode"])("div",{class:"mb-3"},[Object(a["createVNode"])("i",{class:"bi bi-cash-coin h2"})],-1),Fa=Object(a["createTextVNode"])(" ATM "),Wa={class:"col-4"},Qa=Object(a["createVNode"])("div",{class:"mb-3"},[Object(a["createVNode"])("i",{class:"bi bi-shop h2"})],-1),Ga=Object(a["createTextVNode"])(" 貨到付 "),Ha={class:"mb-6"},za=Object(a["createVNode"])("label",{class:"form-label mb-3"},"取件方式",-1),Ra={class:"row g-sm-3 g-2"},Ja={class:"col-4"},Za=Object(a["createVNode"])("div",{class:"mb-3"},[Object(a["createVNode"])("i",{class:"bi bi-envelope h2"})],-1),Ka=Object(a["createTextVNode"])(" 電子信箱 "),Xa={class:"col-4"},Ya=Object(a["createVNode"])("div",{class:"mb-3"},[Object(a["createVNode"])("i",{class:"bi bi-mailbox h2"})],-1),eo=Object(a["createTextVNode"])(" 郵寄 "),to={class:"col-4"},co=Object(a["createVNode"])("div",{class:"mb-3"},[Object(a["createVNode"])("i",{class:"bi bi-shop h2"})],-1),ao=Object(a["createTextVNode"])(" 門市取貨 "),oo={class:"mb-6"},ro=Object(a["createVNode"])("label",{for:"taxIdInput",class:"form-label mb-3"},"統一編號（選填）",-1),lo=Object(a["createVNode"])("label",{for:"couponInput",class:"form-label mb-3"},"優惠券（選填）",-1),no={class:"input-group mb-2"},so=Object(a["createVNode"])("div",{class:"spinner-border spinner-border-sm text-light d-none me-1",role:"status"},[Object(a["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),io=Object(a["createTextVNode"])(" 套用優惠碼 "),bo={key:0,class:"ms-1 h5 text-primary"},uo={class:"d-flex flex-column align-items-end"},mo={class:"h3 mb-3"},po=Object(a["createTextVNode"])(" 總金額 "),jo={class:"h2 text-primary"},Oo={class:"d-flex"},ho=Object(a["createVNode"])("div",{class:"spinner-border spinner-border-sm text-light d-none me-1",role:"status"},[Object(a["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),fo=Object(a["createVNode"])("p",{class:"h3"},"結帳",-1);function No(e,t,c,o,r,l){var n=Object(a["resolveComponent"])("ErrorMessage"),s=Object(a["resolveComponent"])("Field"),i=Object(a["resolveComponent"])("Form");return Object(a["openBlock"])(),Object(a["createBlock"])("div",qt,[Object(a["createVNode"])("div",Ft,[Object(a["createVNode"])("div",Wt,[Object(a["createVNode"])("div",Qt,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.cart.carts,(function(t,c){return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:t.id},[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(t.options,(function(o,l){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:l,class:["d-inline-block cart-scroll-box-item ms-lg-0",{"ms-3":0!==c||0!==l}]},[Object(a["createVNode"])("div",{class:["px-3 py-4 border border-primary bg-white rounded-1 position-relative",{"mb-lg-6":c!==r.cart.carts.length-1||l!==t.options.length-1}]},[Object(a["createVNode"])("div",Gt,[Object(a["createVNode"])("div",Ht,[Object(a["createVNode"])("div",zt,[Object(a["createVNode"])("p",Rt,Object(a["toDisplayString"])(o.start_date.split("-").join(" / ")),1),Object(a["createVNode"])("img",{src:t.product.imageUrl,alt:t.title,class:"cart-img"},null,8,["src","alt"])]),Object(a["createVNode"])("div",Jt,[Object(a["createVNode"])("p",Zt,Object(a["toDisplayString"])(o.start_date.split("-").join(" / ")),1),Object(a["createVNode"])("div",Kt,[Object(a["createVNode"])("p",Xt,Object(a["toDisplayString"])(t.product.title),1),Object(a["createVNode"])("p",Yt,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(o.optionName)+" ",1),Object(a["createVNode"])("span",ec," *"+Object(a["toDisplayString"])(o.qtyDetail.adult),1),"每人"===t.product.lowestPriceUnit?(Object(a["openBlock"])(),Object(a["createBlock"])("span",tc,"大")):"包車服務"!==t.product.category&&"每人"!==t.product.lowestPriceUnit?(Object(a["openBlock"])(),Object(a["createBlock"])("span",cc,"組")):"包車服務"===t.product.category&&"每人"!==t.product.lowestPriceUnit?(Object(a["openBlock"])(),Object(a["createBlock"])("span",ac,"台")):Object(a["createCommentVNode"])("",!0),"每人"===t.product.lowestPriceUnit&&o.qtyDetail.child>0?(Object(a["openBlock"])(),Object(a["createBlock"])("span",oc,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(o.qtyDetail.child)+" ",1),rc])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createVNode"])("p",lc," NT "+Object(a["toDisplayString"])(e.$addComma(o.optionPrice*(o.qtyDetail.adult+o.qtyDetail.child))),1)])]),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.otherDetail,(function(e,c){return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:"".concat(e.product.title,"-").concat(c)},[e.product.title===t.product.title&&e.optionName===o.optionName&&e.start_date===o.start_date?(Object(a["openBlock"])(),Object(a["createBlock"])("div",nc,[e.product.transfer.time?(Object(a["openBlock"])(),Object(a["createBlock"])("p",sc,[ic,dc,Object(a["createVNode"])("span",bc,Object(a["toDisplayString"])(e.pickUpTime),1)])):Object(a["createCommentVNode"])("",!0),e.product.transfer.place&&!1===e.optionName.includes("火車")&&!1===e.optionName.includes("高鐵")?(Object(a["openBlock"])(),Object(a["createBlock"])("p",uc,[mc,pc,Object(a["createVNode"])("span",jc,Object(a["toDisplayString"])(e.pickUpPlace),1)])):Object(a["createCommentVNode"])("",!0),"包車服務"===e.product.category&&e.product.title.includes("包車")?(Object(a["openBlock"])(),Object(a["createBlock"])("a",Oc,[hc,fc])):Object(a["createCommentVNode"])("",!0),"包車服務"===e.product.category&&e.product.title.includes("包車")?(Object(a["openBlock"])(),Object(a["createBlock"])("div",Nc,[Object(a["createVNode"])("div",Vc,[Object(a["createVNode"])("div",gc,[kc,Object(a["createVNode"])("div",yc,[Object(a["createVNode"])("p",vc,Object(a["toDisplayString"])(e.schedule||"暫無規劃"),1)])])])])):Object(a["createCommentVNode"])("",!0),e.includeChild?(Object(a["openBlock"])(),Object(a["createBlock"])("a",xc,[Dc,Bc])):Object(a["createCommentVNode"])("",!0),e.includeChild?(Object(a["openBlock"])(),Object(a["createBlock"])("div",Cc,[Object(a["createVNode"])("div",wc,[Object(a["createVNode"])("div",Sc,[Pc,Object(a["createVNode"])("div",Ic,[Object(a["createVNode"])("p",Mc,[Object(a["createVNode"])("span",Lc,Object(a["toDisplayString"])(e.childBd),1),Tc]),Object(a["createVNode"])("p",Uc,[Object(a["createVNode"])("span",_c,Object(a["toDisplayString"])(e.childHeight),1),Ec,Ac,Object(a["createVNode"])("span",$c,Object(a["toDisplayString"])(e.childWeight),1),qc])])])])])):Object(a["createCommentVNode"])("",!0),e.product.translate.eng||e.product.translate.jpy?(Object(a["openBlock"])(),Object(a["createBlock"])("p",Fc,[Wc,Object(a["createVNode"])("span",Qc,Object(a["toDisplayString"])(e.translateLanguage),1)])):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0)],64)})),128)),0===r.otherDetail.length||!1===r.otherDetail.map((function(e){return e.product.title})).includes(t.product.title)||!1===r.otherDetail.map((function(e){return e.optionName})).includes(o.optionName)?(Object(a["openBlock"])(),Object(a["createBlock"])("p",Gc," 此商品無備註項目 ")):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("div",Hc,[Object(a["createVNode"])("p",zc,["每人"===t.product.lowestPriceUnit?(Object(a["openBlock"])(),Object(a["createBlock"])("span",Rc,"旅客：")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",Jc,"主要聯繫人："))]),Object(a["createVNode"])("div",Zc,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(o.users,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"btn btn-secondary rounded-2 ms-sm-2 me-sm-0 me-2",key:e},Object(a["toDisplayString"])(r.customerDetail.users[e].name),1)})),128))])])],2)],2)})),128))],64)})),128)),r.scrollBtnShow?(Object(a["openBlock"])(),Object(a["createBlock"])("div",Kc,[Xc,Yc],512)):Object(a["createCommentVNode"])("",!0)],512),Object(a["createVNode"])("div",ea,[Object(a["createVNode"])("div",ta,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.customerDetail.users,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:t,class:["tab-pane fade",{show:0===t,active:0===t}],id:"pills-pax-".concat(t),role:"tabpanel","aria-labelledby":"pills-tab-".concat(t)},[Object(a["createVNode"])("div",ca,[Object(a["createVNode"])("p",aa,[Object(a["createTextVNode"])(" 第 "+Object(a["toDisplayString"])(t+1)+" 位旅客 ",1),0===t?(Object(a["openBlock"])(),Object(a["createBlock"])("span",oa," / 主要聯絡人")):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("p",ra,[Object(a["createVNode"])("span",la,Object(a["toDisplayString"])(e.name),1),Object(a["createVNode"])("span",na,Object(a["toDisplayString"])(e.gender),1)])]),Object(a["createVNode"])("ul",sa,[Object(a["createVNode"])("li",ia,[da,Object(a["createVNode"])("span",ba,Object(a["toDisplayString"])(e.idNum),1)]),Object(a["createVNode"])("li",ua,[ma,Object(a["createVNode"])("span",pa,Object(a["toDisplayString"])(e.passportNum),1)]),e.tel?(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:0},[Object(a["createVNode"])("li",ja,[Oa,Object(a["createVNode"])("span",ha,Object(a["toDisplayString"])(e.tel),1)]),Object(a["createVNode"])("li",fa,[Na,Object(a["createVNode"])("span",Va,Object(a["toDisplayString"])(e.email),1)]),Object(a["createVNode"])("li",null,[ga,Object(a["createVNode"])("span",ka,Object(a["toDisplayString"])(e.address),1)])],64)):(Object(a["openBlock"])(),Object(a["createBlock"])("li",ya,"聯絡資料同主要聯絡人"))]),va,(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.products.product,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:e.optionName,class:"d-flex align-items-center pb-3 mb-3"},[Object(a["createVNode"])("p",xa,Object(a["toDisplayString"])(e.date.split("-").join(" / ")),1),Object(a["createVNode"])("div",Da,[Object(a["createVNode"])("p",null,Object(a["toDisplayString"])(e.productName),1),Object(a["createVNode"])("p",null,Object(a["toDisplayString"])(e.optionName),1)])])})),128))],10,["id","aria-labelledby"])})),128)),Object(a["createVNode"])("div",Ba,[Ca,Object(a["createVNode"])("p",null,Object(a["toDisplayString"])(r.customerDetail.message),1)])]),Object(a["createVNode"])("ul",wa,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.customerDetail.users,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{class:["nav-item mb-1 position-relative",{"ms-3":0!==t}],role:"presentation",key:"paxNum-".concat(t)},[Object(a["createVNode"])("button",{type:"button",class:["nav-link nav-link-outline-primary rounded-1",{active:0===t}],id:"pills-tab-".concat(t),"data-bs-toggle":"pill","data-bs-target":"#pills-pax-".concat(t),role:"tab","aria-controls":"pills-pax-".concat(t),"aria-selected":"false"},Object(a["toDisplayString"])(t+1),11,["id","data-bs-target","aria-controls"])],2)})),128)),Sa])])]),Object(a["createVNode"])(i,{"validation-schema":r.schema,onSubmit:l.addOrder},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("div",Pa,[Ia,Object(a["createVNode"])("div",Ma,[Object(a["createVNode"])("div",La,[Ta,Object(a["createVNode"])(n,{name:"payment",class:"mb-3 d-block text-danger"}),Object(a["createVNode"])("div",Ua,[Object(a["createVNode"])("div",_a,[Object(a["createVNode"])(s,{type:"radio",id:"paymentMethodCreditCard",name:"payment",class:"d-none",value:"刷卡",modelValue:r.paymentDetail.method,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.paymentDetail.method=e})},null,8,["modelValue"]),Object(a["createVNode"])("label",{for:"paymentMethodCreditCard",class:"payment-box paymentGroup",onClick:t[2]||(t[2]=function(e){return l.addActive("paymentGroup",0)})},[Ea,Aa])]),Object(a["createVNode"])("div",$a,[Object(a["createVNode"])(s,{type:"radio",id:"paymentMethodATM",name:"payment",class:"d-none",value:"ATM 轉帳",modelValue:r.paymentDetail.method,"onUpdate:modelValue":t[3]||(t[3]=function(e){return r.paymentDetail.method=e})},null,8,["modelValue"]),Object(a["createVNode"])("label",{for:"paymentMethodATM",class:"payment-box paymentGroup",onClick:t[4]||(t[4]=function(e){return l.addActive("paymentGroup",1)})},[qa,Fa])]),Object(a["createVNode"])("div",Wa,[Object(a["createVNode"])(s,{type:"radio",id:"paymentMethodCash",name:"payment",class:"d-none",value:"到貨付款",modelValue:r.paymentDetail.method,"onUpdate:modelValue":t[5]||(t[5]=function(e){return r.paymentDetail.method=e})},null,8,["modelValue"]),Object(a["createVNode"])("label",{for:"paymentMethodCash",class:["payment-box paymentGroup",{disabled:r.onlyEtkt}],onClick:t[6]||(t[6]=function(e){return l.addActive("paymentGroup",2)})},[Qa,Ga],2)])])]),Object(a["createVNode"])("div",Ha,[za,Object(a["createVNode"])("p",{class:["h5 text-primary mb-3",{"d-none":r.onlyEtkt}]}," 訂單明細及電子憑證仍將以電子郵件寄給您 ",2),Object(a["createVNode"])(n,{name:"send",class:"mb-3 d-block text-danger"}),Object(a["createVNode"])("div",Ra,[Object(a["createVNode"])("div",Ja,[Object(a["createVNode"])(s,{type:"radio",id:"emailPickup",name:"send",class:"d-none",value:"電子郵件取貨",modelValue:r.paymentDetail.sendMethod,"onUpdate:modelValue":t[7]||(t[7]=function(e){return r.paymentDetail.sendMethod=e})},null,8,["modelValue"]),Object(a["createVNode"])("label",{for:"emailPickup",class:["payment-box sendGroup",{disabled:!1===r.onlyEtkt,active:r.onlyEtkt}],onClick:t[8]||(t[8]=function(e){return l.addActive("sendGroup",0)})},[Za,Ka],2)]),Object(a["createVNode"])("div",Xa,[Object(a["createVNode"])(s,{type:"radio",id:"sendByPost",name:"send",class:"d-none",value:"郵寄",modelValue:r.paymentDetail.sendMethod,"onUpdate:modelValue":t[9]||(t[9]=function(e){return r.paymentDetail.sendMethod=e})},null,8,["modelValue"]),Object(a["createVNode"])("label",{for:"sendByPost",class:["payment-box sendGroup",{disabled:r.onlyEtkt}],onClick:t[10]||(t[10]=function(e){return l.addActive("sendGroup",1)})},[Ya,eo],2)]),Object(a["createVNode"])("div",to,[Object(a["createVNode"])(s,{type:"radio",id:"inStorePickup",name:"send",class:"d-none",value:"門市取貨",modelValue:r.paymentDetail.sendMethod,"onUpdate:modelValue":t[11]||(t[11]=function(e){return r.paymentDetail.sendMethod=e})},null,8,["modelValue"]),Object(a["createVNode"])("label",{for:"inStorePickup",class:["payment-box sendGroup",{disabled:r.onlyEtkt}],onClick:t[12]||(t[12]=function(e){return l.addActive("sendGroup",2)})},[co,ao],2)])])]),Object(a["createVNode"])("div",oo,[ro,Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",id:"taxIdInput",name:"統一編號",class:"form-control","onUpdate:modelValue":t[13]||(t[13]=function(e){return r.paymentDetail.taxIdNum=e})},null,512),[[a["vModelText"],r.paymentDetail.taxIdNum]])]),Object(a["createVNode"])("div",null,[lo,Object(a["createVNode"])("div",no,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",id:"couponInput",name:"優惠券",class:"form-control","onUpdate:modelValue":t[14]||(t[14]=function(e){return r.paymentDetail.coupon=e})},null,512),[[a["vModelText"],r.paymentDetail.coupon]]),Object(a["createVNode"])("div",{ref:"checkCouponBtn",class:"input-group-text btn btn-primary",onClick:t[15]||(t[15]=function(t){return e.$emit("emit-check-coupon",r.paymentDetail.coupon)})},[so,io],512)]),r.paymentDetail.coupon?(Object(a["openBlock"])(),Object(a["createBlock"])("p",bo," 已套用優惠券 "+Object(a["toDisplayString"])(r.paymentDetail.coupon),1)):Object(a["createCommentVNode"])("",!0)])])]),Object(a["createVNode"])("div",uo,[Object(a["createVNode"])("h5",mo,[po,Object(a["createVNode"])("span",jo,"NT "+Object(a["toDisplayString"])(e.$addComma(Math.floor(r.cart.final_total))),1)]),Object(a["createVNode"])("div",Oo,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-primary px-5 py-2 h3",onClick:t[16]||(t[16]=function(t){return e.$emit("emit-pre-page")})}," 上一頁 "),Object(a["createVNode"])("button",{type:"submit",class:"btn btn-primary px-5 py-2 ms-2\n                        d-flex justify-content-center align-items-center",ref:"addOrderBtn",disabled:0==Object.keys(r.cart).length||0==r.cart.total},[ho,fo],8,["disabled"])])])]})),_:1},8,["validation-schema","onSubmit"])])])}var Vo={props:["cartInfo","customer","otherInfo","payment","scrollBtnStatus"],emits:["emit-check-coupon","emit-pre-page","emit-add-order"],data:function(){return{cart:{},customerDetail:{},otherDetail:[],paymentDetail:{},temp:{},scrollTooltipDownCfm:"",scrollBtnShow:!0,schema:{payment:function(e){return!!e||"請選擇付款方式"},send:function(e){return!!e||"請選擇取件方式"}},onlyEtkt:!1}},methods:{addActive:function(e,t){document.querySelectorAll(".".concat(e)).forEach((function(e,c){c!==t?e.classList.remove("active"):e.classList.add("active")}))},addOrder:function(){this.$emit("emit-add-order",this.paymentDetail,this.customerDetail.productsArr)},organizeUserProduct:function(){var e=this,t=[];this.cart.carts.forEach((function(c){c.options.forEach((function(a){var o=[];a.users.sort((function(e,t){return e-t})),a.users.forEach((function(t){o.push(e.customerDetail.users[t].name)})),t.push({productName:c.product.title,optionName:a.optionName,date:a.start_date,productImg:c.product.imageUrl,users:o})}))}));var c=[];this.customerDetail.users.forEach((function(a,o){var r=[];t.sort((function(e,t){return new Date(e.date)-new Date(t.date)})),t.forEach((function(e){e.users.includes(a.name)&&r.push(e)})),c[o]={userName:a.name,product:r},e.customerDetail.users[o].products=c[o],e.customerDetail.productsArr=t}))},organizeEtkt:function(){var e=[];this.cart.carts.forEach((function(t){e.push(t.options.map((function(e){return e.isEtkt})))})),e.flat().every((function(e){return!0===e}))?(this.paymentDetail.sendMethod="電子郵件取貨",this.onlyEtkt=!0):(this.paymentDetail.sendMethod="",this.onlyEtkt=!1)}},watch:{cartInfo:{handler:function(){this.cart=Object(h["a"])({},this.cartInfo),this.cart.final_total=this.cartInfo.final_total,this.organizeEtkt()},deep:!0},customer:function(){this.customerDetail=Object(h["a"])({},this.customer)},otherInfo:function(){this.otherDetail=Object(O["a"])(this.otherInfo)},payment:{handler:function(){this.paymentDetail=Object(h["a"])({},this.payment)},deep:!0},scrollBtnStatus:{handler:function(){this.scrollBtnShow=this.scrollBtnStatus},deep:!0}},created:function(){this.cart=Object(h["a"])({},this.cartInfo),this.customerDetail=Object(h["a"])({},this.customer),this.otherDetail=Object(O["a"])(this.otherInfo),this.paymentDetail=Object(h["a"])({},this.payment),this.scrollBtnShow=this.scrollBtnStatus,this.organizeUserProduct(),this.organizeEtkt()},mounted:function(){var e=this;this.listener=function(){var t=e.$refs.scrollBtn;e.scrollBtnShow=t.scrollTop<t.scrollHeight-600},this.$refs.scrollBtn.addEventListener("scroll",this.listener)}};Vo.render=No;var go=Vo,ko={class:"container py-md-8 py-6"},yo={class:"d-flex flex-md-row flex-column justify-content-center align-items-center"},vo=Object(a["createVNode"])("img",{src:"https://github.com/vvvvvvii/tasteof/blob/main/public/img/finish%20cart.png?raw=true",alt:"恭喜您完成付款",class:"finish-img"},null,-1),xo={class:"ms-md-6"},Do={class:"h1 mb-6 text-md-start text-center"},Bo=Object(a["createTextVNode"])(" 完成付款！ "),Co={class:"h2 ms-lg-3 d-lg-inline d-none"},wo={class:"h2 text-md-end text-center d-lg-none mb-3"},So={class:"text-md-end text-center"},Po=Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-primary mb-7"}," 更多行程在這等著你 ",-1),Io={class:"h3-md text-secondary text-decoration-underline\n          text-md-start text-center cursor-pointer","data-bs-toggle":"modal","data-bs-target":"#checkOrderDetailModal"},Mo=Object(a["createVNode"])("span",{class:"d-block mb-3"}," 查看訂單細節 ",-1),Lo={class:"d-block h2"},To={class:"modal fade",id:"checkOrderDetailModal",tabindex:"-1","aria-labelledby":"checkOrderDetailModalLabel","aria-hidden":"true"},Uo={class:"modal-dialog modal-dialog-centered"},_o={class:"modal-content"},Eo=Object(a["createVNode"])("div",{class:"modal-header bg-wave mb-3 position-relative"},[Object(a["createVNode"])("h3",null,"訂單明細"),Object(a["createVNode"])("div",{class:"cable-car"})],-1),Ao={class:"modal-body p-6"},$o={class:"pb-6 mb-6 border-bottom border-gray"},qo=Object(a["createVNode"])("h3",{class:"text-primary mb-1"},"訂單資料",-1),Fo={class:"text-gray mb-3"},Wo={class:"order-scroll-box d-flex"},Qo={class:"pb-3 mb-3 border-bottom border-gray"},Go={class:"row mb-sm-3 mb-2"},Ho={class:"col-sm-4 col-3"},zo={class:"h5 mb-2 d-sm-block d-none"},Ro={class:"col-sm-8 col-9"},Jo={class:"h5 mb-1 d-sm-none text-gray"},Zo={class:"h3-sm mb-2"},Ko={class:"h4-sm h5"},Xo={class:"d-flex align-items-center"},Yo=Object(a["createVNode"])("p",{class:"w-25"}," 旅客： ",-1),er={key:0,class:"ms-1"},tr=Object(a["createVNode"])("h3",{class:"mb-3 text-primary"},"付款及收件資料",-1),cr={class:"mb-6"},ar={class:"mb-3"},or={class:"mb-1"},rr=Object(a["createVNode"])("i",{class:"bi bi-check"},null,-1),lr={class:"ms-1"},nr={key:0,class:"mb-1"},sr=Object(a["createVNode"])("i",{class:"bi bi-check"},null,-1),ir=Object(a["createVNode"])("span",{class:"ms-1"},"統一編號：",-1),dr={class:"ms-1"},br={class:"mb-1"},ur=Object(a["createVNode"])("i",{class:"bi bi-check"},null,-1),mr={class:"ms-1"},pr={key:0,class:"rounded-1 px-5 py-6 bg-light"},jr={class:"h3 text-center mb-3"},Or=Object(a["createVNode"])("span",{class:"ms-1 h4"},"收",-1),hr={class:"mb-1"},fr=Object(a["createVNode"])("i",{class:"text-primary bi bi-telephone-fill"},null,-1),Nr={class:"ms-3"},Vr={class:"mb-1"},gr=Object(a["createVNode"])("i",{class:"text-primary bi bi-envelope-fill"},null,-1),kr={class:"ms-3"},yr={class:"mb-1"},vr=Object(a["createVNode"])("i",{class:"text-primary bi bi-signpost-2-fill"},null,-1),xr={class:"ms-3"},Dr={class:"h2 text-end"},Br={class:"bg-wave py-7",id:"moreActivitiesSection"},Cr={class:"container"},wr=Object(a["createVNode"])("h3",{class:"text-primary mb-5"},"更多活動？",-1),Sr={class:"row flex-nowrap random-box"},Pr={class:"card-img-outer"},Ir={class:"card-body random-box-inner"},Mr={class:"card-title"},Lr={class:"h3-md h5 text-end"};function Tr(e,t,c,o,r,l){var n=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])("div",ko,[Object(a["createVNode"])("div",yo,[vo,Object(a["createVNode"])("div",xo,[Object(a["createVNode"])("h2",Do,[Bo,Object(a["createVNode"])("span",Co,"NT "+Object(a["toDisplayString"])(e.$addComma(r.paymentDetail.final_total)),1)]),Object(a["createVNode"])("p",wo," NT "+Object(a["toDisplayString"])(e.$addComma(r.paymentDetail.final_total)),1),Object(a["createVNode"])("div",So,[Object(a["createVNode"])(n,{to:"/product_list"},{default:Object(a["withCtx"])((function(){return[Po]})),_:1})]),Object(a["createVNode"])("a",Io,[Mo,Object(a["createVNode"])("span",Lo,Object(a["toDisplayString"])(c.orderDetail.orderId),1)]),Object(a["createVNode"])("div",To,[Object(a["createVNode"])("div",Uo,[Object(a["createVNode"])("div",_o,[Eo,Object(a["createVNode"])("div",Ao,[Object(a["createVNode"])("div",$o,[qo,Object(a["createVNode"])("p",Fo,"編號："+Object(a["toDisplayString"])(c.orderDetail.orderId),1),Object(a["createVNode"])("div",Wo,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.products,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:"".concat(e.productName,"-").concat(t),class:["px-3 py-4 border border-primary rounded-1\n                    order-scroll-box-item",{"ms-3":0!==t}]},[Object(a["createVNode"])("div",Qo,[Object(a["createVNode"])("div",Go,[Object(a["createVNode"])("div",Ho,[Object(a["createVNode"])("p",zo,Object(a["toDisplayString"])(e.date.split("-").join(" / ")),1),Object(a["createVNode"])("img",{src:e.productImg,alt:e.productName,class:"order-img"},null,8,["src","alt"])]),Object(a["createVNode"])("div",Ro,[Object(a["createVNode"])("p",Jo,Object(a["toDisplayString"])(e.date.split("-").join(" / ")),1),Object(a["createVNode"])("p",Zo,Object(a["toDisplayString"])(e.productName),1),Object(a["createVNode"])("p",Ko,Object(a["toDisplayString"])(e.optionName),1)])])]),Object(a["createVNode"])("div",Xo,[Yo,(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.users,(function(t,c){return Object(a["openBlock"])(),Object(a["createBlock"])("p",{key:t,class:"ms-1"},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t)+" ",1),c!==e.users.length-1?(Object(a["openBlock"])(),Object(a["createBlock"])("span",er,"、")):Object(a["createCommentVNode"])("",!0)])})),128))])],2)})),128))])]),tr,Object(a["createVNode"])("div",cr,[Object(a["createVNode"])("div",ar,[Object(a["createVNode"])("p",or,[rr,Object(a["createVNode"])("span",lr,Object(a["toDisplayString"])(r.paymentDetail.payment_method),1)]),r.paymentDetail.taxIdNum?(Object(a["openBlock"])(),Object(a["createBlock"])("p",nr,[sr,ir,Object(a["createVNode"])("span",dr,Object(a["toDisplayString"])(r.paymentDetail.taxIdNum),1)])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("p",br,[ur,Object(a["createVNode"])("span",mr,Object(a["toDisplayString"])(r.paymentDetail.send_method),1)])]),"郵寄"===r.paymentDetail.send_method?(Object(a["openBlock"])(),Object(a["createBlock"])("div",pr,[Object(a["createVNode"])("p",jr,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(r.contactDetail.name)+" ",1),Or]),Object(a["createVNode"])("p",hr,[fr,Object(a["createVNode"])("span",Nr,Object(a["toDisplayString"])(r.contactDetail.tel),1)]),Object(a["createVNode"])("p",Vr,[gr,Object(a["createVNode"])("span",kr,Object(a["toDisplayString"])(r.contactDetail.email),1)]),Object(a["createVNode"])("p",yr,[vr,Object(a["createVNode"])("span",xr,Object(a["toDisplayString"])(r.contactDetail.address),1)])])):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("p",Dr,"NT "+Object(a["toDisplayString"])(e.$addComma(r.paymentDetail.final_total)),1)])])])])])])]),Object(a["createVNode"])("div",Br,[Object(a["createVNode"])("div",Cr,[wr,Object(a["createVNode"])("div",Sr,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.randomProducts,(function(t,c){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"col-lg-4 col-sm-5 col-9",key:c},[Object(a["createVNode"])(n,{to:"/product/".concat(t.id),title:"查看更多",class:"card overflow-hidden"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("div",Pr,[Object(a["createVNode"])("img",{src:t.imageUrl,alt:t.title,class:"card-img"},null,8,["src","alt"])]),Object(a["createVNode"])("div",Ir,[Object(a["createVNode"])("h4",Mr,Object(a["toDisplayString"])(t.title),1),Object(a["createVNode"])("p",Lr,"NT "+Object(a["toDisplayString"])(e.$addComma(t.lowestPrice))+" 起",1)])]})),_:2},1032,["to"])])})),128))])])])],64)}var Ur={props:["orderDetail"],emits:["emit-alert"],data:function(){return{paymentDetail:{},contactDetail:{},products:[],orderModal:{},totalProducts:[],randomProducts:[]}},methods:{getOrder:function(e){var t=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/order/").concat(e)).then((function(e){e.data.success?(t.paymentDetail=Object(h["a"])({},e.data.order.user.paymentDetail),t.products=Object(O["a"])(e.data.order.user.products),t.contactDetail={name:e.data.order.user.name,email:e.data.order.user.email,tel:e.data.order.user.tel,address:e.data.order.user.address}):t.$emit("emit-alert",e.data.message)})).catch((function(e){t.$emit("emit-alert",e.response)}))},getTotalProducts:function(){var e=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/products/all")).then((function(t){t.data.success?(e.totalProducts=t.data.products,e.totalProducts.forEach((function(t,c){var a=t.packageOptions.map((function(e){return e.price}));a=a.sort((function(e,t){return e-t}));var o=a,r=Object(f["a"])(o,1),l=r[0];e.totalProducts[c].lowestPrice=l,t.packageOptions.forEach((function(t){t.price===l&&(e.totalProducts[c].lowestPriceUnit=t.unit)}))})),e.getRandomProducts(),e.getOrder(e.orderDetail.orderId)):e.$emit("emit-alert",t.data.message)})).catch((function(t){e.$emit("emit-alert",t.response)}))},getRandomProducts:function(){for(var e=this,t=new Set([]),c=this.totalProducts.length<3?this.totalProducts.length:3,a=0;t.size<c;a+1){var o=this.totalProducts.length,r=Math.floor(Math.random(o)*o);t.add(r)}t.forEach((function(t){e.randomProducts.push(e.totalProducts[t])}))}},created:function(){this.getTotalProducts()}};Ur.render=Tr;var _r=Ur,Er=c("e689"),Ar={data:function(){return{customerDetail:{users:[],productsArr:[],message:"無備註事項"},cart:{},paymentDetail:{method:"",sendMethod:"",taxIdNum:"",coupon:""},otherDetail:[],orderDetail:{total:0,orderId:""},showAlert:!1,alertMsg:"",checkCartPageShow:!0,confirmCartPageShow:!1,finishCartPageShow:!1,contactInfoInputShow:[!1],productMaxPaxQty:0,totalProductsMaxPaxQty:0,scrollBtnShow:!0,scrollBtnModalShow:!0}},components:{Alert:N["a"],CheckCart:$t,ConfirmCart:go,FinishCart:_r},methods:{getCartInfo:function(e){var t=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/cart")).then((function(c){if(c.data.success){t.cart=c.data.data;var a=[],o=[];t.cart.carts.forEach((function(e,c){Object.keys(e).includes("coupon")?a.push(!0):a.push(!1),t.cart.carts[c].options.forEach((function(e,a){t.cart.carts[c].options[a].users=[],o.push(e.optionQty)}))}));var r=o.flat().sort((function(e,t){return t-e})),l=Object(f["a"])(r,1);t.productMaxPaxQty=l[0],t.totalProductsMaxPaxQty=o.flat().reduce((function(e,t){return e+t}),0);var n=t.customerDetail.users.length-t.productMaxPaxQty;if(n<0)for(var s=t.customerDetail.users.length;s<t.productMaxPaxQty;s+=1)t.customerDetail.users.push({});else for(var i=t.productMaxPaxQty;i<t.customerDetail.users.length;i+=1)t.deleteTab(t.customerDetail.users.length-1),t.customerDetail.users.pop();if(a.every((function(e){return!1===e})))t.cart.total=0,t.cart.carts.forEach((function(e,c){t.cart.carts[c].total=0,e.options.forEach((function(e,a){t.cart.carts[c].options[a].total=e.optionPrice*e.optionQty,t.cart.carts[c].total+=e.total,t.cart.total+=e.total})),t.cart.carts[c].final_total=t.cart.carts[c].total,t.cart.final_total=t.cart.total}));else if(a.every((function(e){return!0===e}))){var d=t.cart.carts.find((function(e){return e.coupon})),b=d.coupon;t.paymentDetail.coupon=b.code,t.cart.total=0,t.cart.final_total=0,t.cart.carts.forEach((function(e,c){t.cart.carts[c].total=0,e.options.forEach((function(e,a){t.cart.carts[c].options[a].total=e.optionPrice*e.optionQty,t.cart.carts[c].total+=e.total,t.cart.total+=e.total})),t.cart.carts[c].final_total=e.total*e.coupon.percent/100,t.cart.final_total+=t.cart.carts[c].final_total})),t.cart.final_total=Math.floor(t.cart.final_total)}else{var u=t.cart.carts.find((function(e){return e.coupon})),m=u.coupon;t.paymentDetail.coupon=m.code,t.cart.total=0,t.cart.final_total=0,t.cart.carts.forEach((function(e,c){t.cart.carts[c].coupon=m,t.cart.carts[c].total=0,e.options.forEach((function(e,a){t.cart.carts[c].options[a].total=e.optionPrice*e.optionQty,t.cart.carts[c].total+=e.total,t.cart.total+=e.total})),t.cart.carts[c].final_total=e.total*e.coupon.percent/100,t.cart.final_total+=t.cart.carts[c].final_total})),t.cart.final_total=Math.floor(t.cart.final_total)}var p=t.cart.carts.map((function(e){return e.options})).flat().length;p<=1&&(t.scrollBtnShow=!1,t.scrollBtnModalShow=!1),e&&(e.children[0].classList.add("d-none"),e.children[1].classList.remove("d-none"))}else t.customAlert(c.data.message),e&&(e.children[0].classList.add("d-none"),e.children[1].classList.remove("d-none"))})).catch((function(c){t.customAlert(c.response),e&&(e.children[0].classList.add("d-none"),e.children[1].classList.remove("d-none"))}))},deleteTab:function(e){Array.from(document.querySelector("#pills-tab-".concat(e)).classList).includes("active")&&(document.querySelector("#pills-tab-".concat(e)).classList.remove("active"),document.querySelector("#pills-pax-".concat(e)).classList.remove("active"),document.querySelector("#pills-pax-".concat(e)).classList.remove("show"),document.querySelector("#pills-tab-".concat(e-1)).classList.add("active"),document.querySelector("#pills-pax-".concat(e-1)).classList.add("active"),document.querySelector("#pills-pax-".concat(e-1)).classList.add("show"))},customAlert:function(e){this.alertMsg=e,this.showAlert=!0,window.setTimeout(this.closeCustomAlert,5e3)},closeCustomAlert:function(){this.showAlert=!1},changeTktNum:function(e,t,c,a,o){var r=this,l=this.$refs.checkCart.$refs["adultStatus".concat(c.optionName,"-").concat(c.start_date)],n=this.$refs.checkCart.$refs["childStatus".concat(c.optionName,"-").concat(c.start_date)],s=Object(h["a"])({},c.qtyDetail);"adult"===e?(l.children[0].classList.remove("d-none"),l.children[1].classList.add("d-none"),"plus"===t?s.adult+=1:"minus"===t&&s.adult>=2&&(s.adult-=1)):(n.children[0].classList.remove("d-none"),n.children[1].classList.add("d-none"),"plus"===t?s.child+=1:"minus"===t&&s.child>=1&&(s.child-=1));var i=[];this.cart.carts.forEach((function(e){e.id===o&&(i=Object(O["a"])(e.options))}));var d={data:{product_id:o,qty:s.adult+s.child,options:i}};d.data.options[a].qtyDetail=s,d.data.options[a].optionQty=s.adult+s.child,this.$http.put("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/cart/").concat(o),d).then((function(t){t.data.success?"adult"===e?r.getCartInfo(l):r.getCartInfo(n):(r.customAlert(t.data.message),"adult"===e?(l.children[0].classList.add("d-none"),l.children[1].classList.remove("d-none")):(n.children[0].classList.add("d-none"),n.children[1].classList.remove("d-none")))})).catch((function(t){r.customAlert(t.response),"adult"===e?(l.children[0].classList.add("d-none"),l.children[1].classList.remove("d-none")):(n.children[0].classList.add("d-none"),n.children[1].classList.remove("d-none"))}))},deleteProduct:function(e,t,c){var a=this,o=this.$refs.checkCart.$refs["deleteCartProduct".concat(e.optionName)],r=this.cart.carts.map((function(e){return e.id})),l=r.indexOf(c);if(this.cart.carts[l].options.splice(t,1),0!==this.cart.carts[l].options.length){var n={data:Object(h["a"])({},this.cart.carts[l])},s=n.data.options.map((function(e){return e.qtyDetail.adult})),i=n.data.options.map((function(e){return e.qtyDetail.child}));n.data.qty=s.reduce((function(e,t){return e+t}))+i.reduce((function(e,t){return e+t})),this.$http.put("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/cart/").concat(c),n).then((function(e){e.data.success&&"更新購物車有誤"!==e.data.message?(a.customAlert("已清除商品"),a.getCartInfo()):a.customAlert(e.data.message)})).catch((function(e){a.customAlert(e.response)}))}else this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/cart/").concat(c)).then((function(e){e.data.success?(o.children[0].classList.remove("d-none"),o.children[1].classList.add("d-none"),a.customAlert("已清除商品"),a.getCartInfo(),Er["a"].emit("update-cart")):(a.customAlert(e.data.message),Er["a"].emit("update-cart"))})).catch((function(e){a.customAlert(e.response)}))},saveCustomerDetail:function(e,t,c){this.customerDetail=e,this.otherDetail=t,this.contactInfoInputShow=c,this.checkCartPageShow=!1,this.confirmCartPageShow=!0},backToFirstPage:function(){this.checkCartPageShow=!0,this.confirmCartPageShow=!1},checkCoupon:function(e){var t=this,c=this.$refs.confirmCart.$refs.checkCouponBtn;c.classList.add("disabled"),c.children[0].classList.remove("d-none");var a={data:{code:e}};this.$http.post("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/coupon"),a).then((function(e){if(e.data.success){var a=e.data;t.customAlert(a.message),t.getCartInfo(),c.classList.remove("disabled"),c.children[0].classList.add("d-none")}else t.customAlert(e.data.message),c.classList.remove("disabled"),c.children[0].classList.add("d-none")})).catch((function(e){t.customAlert(e.response),c.classList.remove("disabled"),c.children[0].classList.add("d-none")}))},addOrder:function(e,t){var c=this;this.paymentDetail=e,this.customerDetail.productsArr=t;var a=this.$refs.confirmCart.$refs.addOrderBtn;a.classList.add("disabled"),a.children[0].classList.remove("d-none");var o={data:{user:{name:this.customerDetail.users[0].name,email:this.customerDetail.users[0].email,tel:this.customerDetail.users[0].tel,address:this.customerDetail.users[0].address,paymentDetail:{total:this.cart.total,final_total:this.cart.final_total,payment_method:this.paymentDetail.method,send_method:this.paymentDetail.sendMethod,taxIdNum:this.paymentDetail.taxIdNum,coupon:this.paymentDetail.coupon},customerDetail:Object(O["a"])(this.customerDetail.users),products:Object(O["a"])(this.customerDetail.productsArr)},message:this.customerDetail.message}};this.orderDetail.total=this.cart.final_total,this.$http.post("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/order"),o).then((function(e){e.data.success?(c.orderDetail.orderId=e.data.orderId,c.getCartInfo(),a.classList.remove("disabled"),a.children[0].classList.add("d-none"),c.confirmCartPageShow=!1,c.finishCartPageShow=!0,Er["a"].emit("update-cart")):(c.customAlert(e.data.message),a.classList.remove("disabled"),a.children[0].classList.add("d-none"),Er["a"].emit("update-cart"))})).catch((function(e){c.customAlert(e.response),a.classList.remove("disabled"),a.children[0].classList.add("d-none")}))}},created:function(){this.getCartInfo()}};Ar.render=j;t["default"]=Ar},a8ed:function(e,t){var c="function"===typeof setImmediate?setImmediate:setTimeout;function a(){return new Promise((function(e){c(e)}))}e.exports=a},e689:function(e,t,c){"use strict";var a=function(e){return{all:e=e||new Map,on:function(t,c){var a=e.get(t);a?a.push(c):e.set(t,[c])},off:function(t,c){var a=e.get(t);a&&(c?a.splice(a.indexOf(c)>>>0,1):e.set(t,[]))},emit:function(t,c){var a=e.get(t);a&&a.slice().map((function(e){e(c)})),(a=e.get("*"))&&a.slice().map((function(e){e(t,c)}))}}},o=a();t["a"]=o}}]);
//# sourceMappingURL=chunk-a0c97072.b1b21171.js.map