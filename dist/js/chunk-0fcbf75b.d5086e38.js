(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fcbf75b"],{"07ac":function(e,t,c){var a=c("23e7"),o=c("6f53").values;a({target:"Object",stat:!0},{values:function(e){return o(e)}})},2355:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),o={class:"pt-7 flex-fill"},r={class:"pt-5"},n={class:"step-list d-flex justify-content-center"},l={class:"step-icon"},s={key:0,class:"bi bi-flag-fill d-block"},i={class:"step-icon"},d={key:0,class:"bi bi-flag-fill d-block"},u={class:"step-icon"},m={key:0,class:"bi bi-flag-fill d-block"};function b(e,t,c,b,p,h){var j=Object(a["resolveComponent"])("CheckCart"),O=Object(a["resolveComponent"])("ConfirmCart"),f=Object(a["resolveComponent"])("FinishCart"),g=Object(a["resolveComponent"])("Alert");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])("div",o,[Object(a["createVNode"])("div",r,[Object(a["createVNode"])("ul",n,[Object(a["createVNode"])("li",{class:["step-item",{"bg-warning":p.checkCartPageShow}]},[Object(a["createVNode"])("div",l,[p.checkCartPageShow?(Object(a["openBlock"])(),Object(a["createBlock"])("i",s)):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("p",{class:["step-text h3-md h4 text-center",{"text-dark":p.checkCartPageShow}]}," 查看 ",2)],2),Object(a["createVNode"])("li",{class:["step-item ms-md-5 ms-3",{"bg-danger":p.confirmCartPageShow}]},[Object(a["createVNode"])("div",i,[p.confirmCartPageShow?(Object(a["openBlock"])(),Object(a["createBlock"])("i",d)):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("p",{class:["step-text h3-md h4 text-center",{"text-dark":p.confirmCartPageShow}]}," 確認 ",2)],2),Object(a["createVNode"])("li",{class:["step-item ms-md-5 ms-3",{"bg-success":p.finishCartPageShow}]},[Object(a["createVNode"])("div",u,[p.finishCartPageShow?(Object(a["openBlock"])(),Object(a["createBlock"])("i",m)):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("p",{class:["step-text h3-md h4 text-center",{"text-dark":p.finishCartPageShow}]}," 完成 ",2)],2)]),p.checkCartPageShow?(Object(a["openBlock"])(),Object(a["createBlock"])(j,{key:0,ref:"checkCart",customer:p.customerDetail,"other-info":p.otherDetail,"cart-info":p.cart,onEmitChangeTktNum:h.changeTktNum,onEmitDeleteProduct:h.deleteProduct,onEmitDeleteAllProducts:h.deleteAllProducts,onEmitNextPage:h.saveCustomerDetail},null,8,["customer","other-info","cart-info","onEmitChangeTktNum","onEmitDeleteProduct","onEmitDeleteAllProducts","onEmitNextPage"])):Object(a["createCommentVNode"])("",!0),p.confirmCartPageShow?(Object(a["openBlock"])(),Object(a["createBlock"])(O,{key:1,ref:"confirmCart",customer:p.customerDetail,"cart-info":p.cart,"other-info":p.otherDetail,payment:p.paymentDetail,onEmitCheckCoupon:h.checkCoupon,onEmitPrePage:h.backToFirstPage,onEmitAddOrder:h.addOrder},null,8,["customer","cart-info","other-info","payment","onEmitCheckCoupon","onEmitPrePage","onEmitAddOrder"])):Object(a["createCommentVNode"])("",!0),p.finishCartPageShow?(Object(a["openBlock"])(),Object(a["createBlock"])(f,{key:2,"order-detail":p.orderDetail},null,8,["order-detail"])):Object(a["createCommentVNode"])("",!0)])]),p.showAlert?(Object(a["openBlock"])(),Object(a["createBlock"])(g,{key:0,"alert-msg":p.alertMsg},null,8,["alert-msg"])):Object(a["createCommentVNode"])("",!0)],64)}var p=c("2909"),h=c("5530"),j=(c("99af"),c("159b"),c("caad"),c("2532"),c("b64b"),c("7db0"),c("d81d"),c("a434"),c("a02d")),O=(c("b0c0"),{class:"container py-8 position-relative"}),f={class:"bg-light rounded-3 p-7"},g={class:"row g-7"},N={class:"col-6 cart-scroll-box position-relative",ref:"scrollBtn"},V={class:"row justify-content-between pb-3 mb-2\n                border-bottom border-gray"},v={class:"col-4"},k={class:"mb-2"},y={class:"col-8 d-flex flex-column justify-content-between"},C={class:"h3-sm"},x={class:"h4-sm h5 mb-3"},w={class:"text-end"},D={class:"mt-3 d-flex"},B={class:"d-flex flex-wrap btn-group",role:"group","aria-label":"Basic checkbox toggle button group"},S={class:"d-flex justify-content-evenly"},P={key:0,class:"d-flex align-items-center h4-sm h5"},A=Object(a["createVNode"])("i",{class:"bi bi-dash-lg"},null,-1),T=Object(a["createVNode"])("div",{class:"spinner-border spinner-border-sm text-dark d-none",role:"status"},[Object(a["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),L=Object(a["createVNode"])("i",{class:"bi bi-plus-lg"},null,-1),I={key:0},U={key:1},_={key:2},M={key:1,class:"d-flex align-items-center h4-sm h5"},E=Object(a["createVNode"])("i",{class:"bi bi-dash-lg"},null,-1),$=Object(a["createVNode"])("div",{class:"spinner-border spinner-border-sm text-dark d-none",role:"status"},[Object(a["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),q=Object(a["createVNode"])("i",{class:"bi bi-plus-lg"},null,-1),W=Object(a["createTextVNode"])(" 小 "),F=Object(a["createVNode"])("div",{class:"spinner-border spinner-border-sm text-dark d-none",role:"status"},[Object(a["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),H={key:0,class:"scroll-btn"},R=Object(a["createVNode"])("i",{class:"bi bi-arrow-down-short"},null,-1),Q={class:"col-6"},G={class:"tab-content mb-6"},J={class:"mb-6 h3"},z={key:0},Z={class:"mb-3"},K={class:"mb-3"},X=Object(a["createVNode"])("option",{disabled:"",value:""},"請選擇稱謂",-1),Y=Object(a["createVNode"])("option",{selected:"",value:"先生"},"先生",-1),ee=Object(a["createVNode"])("option",{value:"女士"},"女士",-1),te={class:"mb-3"},ce={class:"mb-3"},ae={class:"mb-3"},oe={class:"mb-3"},re={class:"mb-3"},ne={class:"tab-pane fade",id:"pills-pax-note",role:"tabpanel","aria-labelledby":"pills-tab-note"},le={class:"mb-3"},se={class:"h3 mb-1"},ie={key:0,class:"mb-3"},de={key:1,class:"mb-3"},ue={key:2,class:"mb-3"},me={key:3,class:"mb-3"},be={class:"form-check"},pe={key:4},he={class:"mb-3"},je={class:"mb-3"},Oe={class:"mb-3"},fe={key:5,class:"mb-3"},ge=Object(a["createVNode"])("label",{for:"note-translateLanguage",class:"form-label"},"導覽語言",-1),Ne=Object(a["createVNode"])("option",{value:"中文",selected:""},"中文",-1),Ve={key:0,value:"英文"},ve={key:1,value:"日文"},ke=Object(a["createVNode"])("label",{for:"note-bookMessageCart",class:"form-label"},"其他特殊需求（飲食、禁菸房...）",-1),ye={class:"nav nav-pills justify-content-center flex-wrap mb-8",id:"pills-tab",role:"tablist"},Ce={key:0,class:"bi bi-exclamation-triangle-fill warning-icon"},xe=Object(a["createVNode"])("i",{class:"bi bi-x"},null,-1),we={class:"nav-item"},De=Object(a["createVNode"])("i",{class:"bi bi-person-plus"},null,-1),Be={class:"nav-item ms-3 position-relative",role:"presentation"},Se={key:0,class:"bi bi-exclamation-triangle-fill warning-icon"},Pe={class:"d-flex flex-column align-items-end"},Ae={class:"h3 mb-3"},Te=Object(a["createTextVNode"])(" 總金額 "),Le={class:"h2 text-primary"},Ie=Object(a["createVNode"])("p",{class:"h3"},"下一步",-1),Ue={class:"text-center"},_e=Object(a["createVNode"])("p",{class:"mb-4"},[Object(a["createTextVNode"])(" 購物車目前還沒有商品耶 "),Object(a["createVNode"])("i",{class:"bi bi-eraser"})],-1),Me={class:"mb-2"},Ee=Object(a["createTextVNode"])(" 客倌要不要 "),$e=Object(a["createTextVNode"])(" 來這裡挑挑看、選選看 "),qe=Object(a["createTextVNode"])(" 呢？ "),We=Object(a["createTextVNode"])(" 也可以 "),Fe=Object(a["createTextVNode"])(" 來這裡尋找玩樂靈感 "),He=Object(a["createTextVNode"])(" 唷！ ");function Re(e,t,c,o,r,n){var l=Object(a["resolveComponent"])("Field"),s=Object(a["resolveComponent"])("ErrorMessage"),i=Object(a["resolveComponent"])("Form"),d=Object(a["resolveComponent"])("router-link"),u=Object(a["resolveComponent"])("Alert");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])("div",O,[Object(a["createVNode"])("div",f,[Object(a["withDirectives"])(Object(a["createVNode"])("div",g,[Object(a["createVNode"])("div",N,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.cart.carts,(function(t,c){return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:t.id},[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(t.options,(function(o,l){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:l},[Object(a["createVNode"])("div",{class:["px-3 py-4 mb-6 border border-primary rounded-1 position-relative",{"border-danger":r.productWarningShow[c]}]},[Object(a["createVNode"])("div",V,[Object(a["createVNode"])("div",v,[Object(a["createVNode"])("p",k,Object(a["toDisplayString"])(o.start_date),1),Object(a["createVNode"])("img",{src:t.product.imageUrl,alt:t.title,class:"cart-img"},null,8,["src","alt"])]),Object(a["createVNode"])("div",y,[Object(a["createVNode"])("div",null,[Object(a["createVNode"])("p",C,Object(a["toDisplayString"])(t.product.title),1),Object(a["createVNode"])("p",x,Object(a["toDisplayString"])(o.optionName),1)]),Object(a["createVNode"])("p",w," NT "+Object(a["toDisplayString"])(n.addComma(o.optionPrice*(o.qtyDetail.adult+o.qtyDetail.child))),1)]),Object(a["createVNode"])("div",D,[Object(a["createVNode"])("p",{class:["w-25",{"fw-bold":r.productWarningShow[c],"text-danger":r.productWarningShow[c]}]}," 選擇旅客： ",2),Object(a["createVNode"])("div",B,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.customerDetail.users,(function(e,c){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"me-2 mb-2",key:e.name},[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"checkbox",id:"".concat(e.name,"-").concat(o.optionName,"-").concat(o.start_date),autocomplete:"off",class:"btn-check",disabled:void 0===e.name||t.users.length>=t.qty&&!1===t.users.includes(c),value:c,"onUpdate:modelValue":function(e){return t.users=e}},null,8,["id","disabled","value","onUpdate:modelValue"]),[[a["vModelCheckbox"],t.users]]),Object(a["createVNode"])("label",{for:"".concat(e.name,"-").concat(o.optionName,"-").concat(o.start_date),class:"btn btn-outline-secondary rounded-2"},Object(a["toDisplayString"])(e.name||"待填"),9,["for"])])})),128))])])]),Object(a["createVNode"])("div",S,[o.qtyDetail?(Object(a["openBlock"])(),Object(a["createBlock"])("div",P,[Object(a["createVNode"])("button",{type:"button",class:"border-0 bg-transparent p-2",onClick:function(c){return e.$emit("emit-change-tkt-num","adult","minus",o,l,t.id)}},[A],8,["onClick"]),Object(a["createVNode"])("div",{class:"p-1",ref:"adultStatus".concat(o.optionName,"-").concat(o.start_date)},[T,Object(a["createVNode"])("p",null,Object(a["toDisplayString"])(o.qtyDetail.adult),1)],512),Object(a["createVNode"])("button",{type:"button",class:"border-0 bg-transparent p-2",onClick:function(c){return e.$emit("emit-change-tkt-num","adult","plus",o,l,t.id)}},[L],8,["onClick"]),"每人"===t.product.lowestPriceUnit?(Object(a["openBlock"])(),Object(a["createBlock"])("span",I,"大")):"包車服務"!==t.product.category&&"每人"!==t.product.lowestPriceUnit?(Object(a["openBlock"])(),Object(a["createBlock"])("span",U,"組")):"包車服務"===t.product.category&&"每人"!==t.product.lowestPriceUnit?(Object(a["openBlock"])(),Object(a["createBlock"])("span",_,"台")):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0),o.qtyDetail&&"每人"===t.product.lowestPriceUnit?(Object(a["openBlock"])(),Object(a["createBlock"])("div",M,[Object(a["createVNode"])("button",{type:"button",class:"border-0 bg-transparent p-2",onClick:function(c){return e.$emit("emit-change-tkt-num","child","minus",o,l,t.id)}},[E],8,["onClick"]),Object(a["createVNode"])("div",{class:"p-1",ref:"childStatus".concat(o.optionName,"-").concat(o.start_date)},[$,Object(a["createVNode"])("p",null,Object(a["toDisplayString"])(o.qtyDetail.child),1)],512),Object(a["createVNode"])("button",{type:"button",class:"border-0 bg-transparent p-2",onClick:function(c){return e.$emit("emit-change-tkt-num","child","plus",o,l,t.id)}},[q],8,["onClick"]),W])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("a",{type:"button",class:"delete-cart-icon",ref:"deleteCartProduct".concat(o.optionName)},[F,Object(a["createVNode"])("i",{class:"bi bi-trash-fill",onClick:function(c){return e.$emit("emit-delete-product",o,l,t.id)}},null,8,["onClick"])],512)])],2)])})),128))],64)})),128)),r.scrollBtnShow?(Object(a["openBlock"])(),Object(a["createBlock"])("div",H,[R])):Object(a["createCommentVNode"])("",!0)],512),Object(a["createVNode"])("div",Q,[Object(a["createVNode"])(i,{onSubmit:n.toNextPage},{default:Object(a["withCtx"])((function(e){var c=e.errors;return[Object(a["createVNode"])("div",G,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.customerDetail.users,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:t,class:["tab-pane fade",{show:0===t,active:0===t}],id:"pills-pax-".concat(t),role:"tabpanel","aria-labelledby":"pills-tab-".concat(t)},[Object(a["createVNode"])("p",J,[Object(a["createTextVNode"])(" 第 "+Object(a["toDisplayString"])(t+1)+" 位旅客 ",1),0===t?(Object(a["openBlock"])(),Object(a["createBlock"])("span",z," / 主要聯絡人")):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("div",Z,[Object(a["createVNode"])("label",{for:"bookNameCartInput-".concat(t),class:"form-label"},"姓名",8,["for"]),Object(a["createVNode"])(l,{type:"text",id:"bookNameCartInput-".concat(t),name:"第 ".concat(t+1," 位姓名"),class:["form-control",{"is-invalid":c["第 ".concat(t+1," 位姓名")]}],rules:"required",modelValue:r.customerDetail.users[t].name,"onUpdate:modelValue":function(e){return r.customerDetail.users[t].name=e}},null,8,["id","name","class","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(s,{name:"第 ".concat(t+1," 位姓名"),class:"invalid-feedback"},null,8,["name"])]),Object(a["createVNode"])("div",K,[Object(a["createVNode"])("label",{for:"bookGenderCartInput-".concat(t),class:"form-label"},"稱謂",8,["for"]),Object(a["createVNode"])(l,{name:"第 ".concat(t+1," 位稱謂"),class:["form-select",{"is-invalid":c["第 ".concat(t+1," 位稱謂")]}],id:"bookGenderCartInput-".concat(t),rules:"required",modelValue:r.customerDetail.users[t].gender,"onUpdate:modelValue":function(e){return r.customerDetail.users[t].gender=e},as:"select"},{default:Object(a["withCtx"])((function(){return[X,Y,ee]})),_:2},1032,["name","id","class","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(s,{name:"第 ".concat(t+1," 位稱謂"),class:"invalid-feedback"},null,8,["name"])]),Object(a["createVNode"])("div",te,[Object(a["createVNode"])("label",{for:"bookIdNumCartInput-".concat(t),class:"form-label"},"身分證字號",8,["for"]),Object(a["createVNode"])(l,{type:"text",name:"第 ".concat(t+1," 位身分證"),class:["form-control",{"is-invalid":c["第 ".concat(t+1," 位身分證")]}],id:"bookIdNumCartInput-".concat(t),rules:n.isIdNum,modelValue:r.customerDetail.users[t].idNum,"onUpdate:modelValue":function(e){return r.customerDetail.users[t].idNum=e}},null,8,["name","id","class","rules","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(s,{name:"第 ".concat(t+1," 位身分證"),class:"invalid-feedback"},null,8,["name"])]),Object(a["createVNode"])("div",ce,[Object(a["createVNode"])("label",{for:"bookPassportNumCartInput-".concat(t),class:"form-label"}," 護照號碼 ",8,["for"]),Object(a["createVNode"])(l,{type:"text",name:"第 ".concat(t+1," 位護照號碼"),class:["form-control",{"is-invalid":c["第 ".concat(t+1," 位護照號碼")]}],id:"bookPassportNumCartInput-".concat(t),rules:"length:9|numeric",modelValue:r.customerDetail.users[t].passportNum,"onUpdate:modelValue":function(e){return r.customerDetail.users[t].passportNum=e}},null,8,["name","id","class","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(s,{name:"第 ".concat(t+1," 位護照號碼"),class:"invalid-feedback"},null,8,["name"])]),Object(a["createVNode"])("div",ae,[Object(a["createVNode"])("label",{for:"bookTelCartInput-".concat(t),class:"form-label"},"聯繫電話",8,["for"]),Object(a["createVNode"])(l,{type:"tel",name:"第 ".concat(t+1," 位電話"),class:["form-control",{"is-invalid":c["第 ".concat(t+1," 位電話")]}],id:"bookTelCartInput-".concat(t),rules:"required|numeric|max:10",modelValue:r.customerDetail.users[t].tel,"onUpdate:modelValue":function(e){return r.customerDetail.users[t].tel=e}},null,8,["name","id","class","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(s,{name:"第 ".concat(t+1," 位電話"),class:"invalid-feedback"},null,8,["name"])]),Object(a["createVNode"])("div",oe,[Object(a["createVNode"])("label",{for:"bookEmailCartInput-".concat(t),class:"form-label"}," 電子信箱 ",8,["for"]),Object(a["createVNode"])(l,{type:"email",name:"第 ".concat(t+1," 位 email"),class:["form-control",{"is-invalid":c["第 ".concat(t+1," 位 email")]}],id:"bookEmailCartInput-".concat(t),placeholder:"customer@example.com",rules:"email|required",modelValue:r.customerDetail.users[t].email,"onUpdate:modelValue":function(e){return r.customerDetail.users[t].email=e}},null,8,["name","id","class","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(s,{name:"第 ".concat(t+1," 位 email"),class:"invalid-feedback"},null,8,["name"])]),Object(a["createVNode"])("div",re,[Object(a["createVNode"])("label",{for:"bookAddrCartInput-".concat(t),class:"form-label"},"地址",8,["for"]),Object(a["createVNode"])(l,{type:"text",name:"第 ".concat(t+1," 位地址"),class:["form-control",{"is-invalid":c["第 ".concat(t+1," 位地址")]}],id:"bookAddrCartInput-".concat(t),rules:"required",modelValue:r.customerDetail.users[t].address,"onUpdate:modelValue":function(e){return r.customerDetail.users[t].address=e}},null,8,["name","id","class","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(s,{name:"第 ".concat(t+1," 位地址"),class:"invalid-feedback"},null,8,["name"])])],10,["id","aria-labelledby"])})),128)),Object(a["createVNode"])("div",ne,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.otherDetail,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:t,class:"mb-6 pb-6 border-bottom border-gray"},[Object(a["createVNode"])("div",le,[Object(a["createVNode"])("h4",se,Object(a["toDisplayString"])(e.product.title),1),Object(a["createVNode"])("h4",null,Object(a["toDisplayString"])(e.optionName),1)]),e.product.transfer.time?(Object(a["openBlock"])(),Object(a["createBlock"])("div",ie,[Object(a["createVNode"])("label",{for:"note-pickupTime-".concat(t),class:"form-label"},"接送時間",8,["for"]),Object(a["createVNode"])(l,{type:"text",id:"note-pickupTime-".concat(t),name:"".concat(e.product.title,"：").concat(e.optionName," 的接送時間"),class:["form-control",{"is-invalid":c["".concat(e.product.title,"：").concat(e.optionName," 的接送時間")]}],rules:"required",modelValue:r.otherDetail[t].pickUpTime,"onUpdate:modelValue":function(e){return r.otherDetail[t].pickUpTime=e}},null,8,["id","name","class","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(s,{name:"".concat(e.product.title,"：").concat(e.optionName," 的接送時間"),class:"invalid-feedback"},null,8,["name"])])):Object(a["createCommentVNode"])("",!0),e.product.transfer.place&&!1===e.optionName.includes("火車")?(Object(a["openBlock"])(),Object(a["createBlock"])("div",de,[Object(a["createVNode"])("label",{for:"note-pickupPlace-".concat(t),class:"form-label"},"接送地點",8,["for"]),Object(a["createVNode"])(l,{type:"text",id:"note-pickupPlace-".concat(t),name:"".concat(e.product.title,"：").concat(e.optionName," 的接送地點"),class:["form-control",{"is-invalid":c["".concat(e.product.title,"：").concat(e.optionName," 的接送地點")]}],rules:"required",modelValue:r.otherDetail[t].pickUpPlace,"onUpdate:modelValue":function(e){return r.otherDetail[t].pickUpPlace=e}},null,8,["id","name","class","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(s,{name:"".concat(e.product.title,"：").concat(e.optionName," 的接送地點"),class:"invalid-feedback"},null,8,["name"])])):Object(a["createCommentVNode"])("",!0),"包車服務"===e.product.category&&e.product.title.includes("包車")?(Object(a["openBlock"])(),Object(a["createBlock"])("div",ue,[Object(a["createVNode"])("label",{for:"note-rentCarSchedule-".concat(t),class:"form-label"},"包車行程規劃",8,["for"]),Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{class:"form-control",id:"note-rentCarSchedule-".concat(t),rows:"6","onUpdate:modelValue":function(e){return r.otherDetail[t].schedule=e},placeholder:"歡迎提供您對包車行程的初步規劃，我們的司機將與您討論並協助行程安排"},null,8,["id","onUpdate:modelValue"]),[[a["vModelText"],r.otherDetail[t].schedule]])])):Object(a["createCommentVNode"])("",!0),e.product.transfer.childRestrict?(Object(a["openBlock"])(),Object(a["createBlock"])("div",me,[Object(a["createVNode"])("div",be,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"form-check-input",type:"checkbox",id:"note-rentCarChildInclude-".concat(t),"onUpdate:modelValue":function(e){return r.otherDetail[t].includeChild=e}},null,8,["id","onUpdate:modelValue"]),[[a["vModelCheckbox"],r.otherDetail[t].includeChild]]),Object(a["createVNode"])("label",{class:"form-check-label",for:"note-rentCarChildInclude-".concat(t)}," 旅客中有未滿 4 歲孩童 ",8,["for"])])])):Object(a["createCommentVNode"])("",!0),r.otherDetail[t].includeChild?(Object(a["openBlock"])(),Object(a["createBlock"])("div",pe,[Object(a["createVNode"])("div",he,[Object(a["createVNode"])("label",{for:"note-rentCarChildBd-".concat(t),class:"form-label"},"孩童出生年月日",8,["for"]),Object(a["createVNode"])(l,{type:"text",id:"note-rentCarChildBd-".concat(t),name:"".concat(e.product.title,"：").concat(e.optionName," 的出生日期"),class:["form-control",{"is-invalid":c["".concat(e.product.title,"：").concat(e.optionName," 的出生日期")]}],rules:"required",placeholder:"1900 / 01 / 01",modelValue:r.otherDetail[t].childBd,"onUpdate:modelValue":function(e){return r.otherDetail[t].childBd=e}},null,8,["id","name","class","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(s,{name:"".concat(e.product.title,"：").concat(e.optionName," 的出生日期"),class:"invalid-feedback"},null,8,["name"])]),Object(a["createVNode"])("div",je,[Object(a["createVNode"])("label",{for:"note-rentCarChildHeight-".concat(t),class:"form-label"},"孩童身高",8,["for"]),Object(a["createVNode"])(l,{type:"text",id:"note-rentCarChildHeight-".concat(t),name:"".concat(e.product.title,"：").concat(e.optionName," 的孩童身高"),class:["form-control",{"is-invalid":c["".concat(e.product.title,"：").concat(e.optionName," 的孩童身高")]}],rules:"required",placeholder:"公分",modelValue:r.otherDetail[t].childHeight,"onUpdate:modelValue":function(e){return r.otherDetail[t].childHeight=e}},null,8,["id","name","class","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(s,{name:"".concat(e.product.title,"：").concat(e.optionName," 的孩童身高"),class:"invalid-feedback"},null,8,["name"])]),Object(a["createVNode"])("div",Oe,[Object(a["createVNode"])("label",{for:"note-rentCarChildWeight-".concat(t),class:"form-label"},"孩童體重",8,["for"]),Object(a["createVNode"])(l,{type:"text",id:"note-rentCarChildWeight-".concat(t),name:"".concat(e.product.title,"：").concat(e.optionName," 的孩童體重"),class:["form-control",{"is-invalid":c["".concat(e.product.title,"：").concat(e.optionName," 的孩童體重")]}],rules:"required",placeholder:"公斤",modelValue:r.otherDetail[t].childWeight,"onUpdate:modelValue":function(e){return r.otherDetail[t].childWeight=e}},null,8,["id","name","class","modelValue","onUpdate:modelValue"]),Object(a["createVNode"])(s,{name:"".concat(e.product.title,"：").concat(e.optionName," 的孩童體重"),class:"invalid-feedback"},null,8,["name"])])])):Object(a["createCommentVNode"])("",!0),e.product.translate.eng||e.product.translate.jpy?(Object(a["openBlock"])(),Object(a["createBlock"])("div",fe,[ge,Object(a["withDirectives"])(Object(a["createVNode"])("select",{class:"form-select",id:"note-translateLanguage","onUpdate:modelValue":function(e){return r.otherDetail[t].translateLanguage=e}},[Ne,e.product.translate.eng?(Object(a["openBlock"])(),Object(a["createBlock"])("option",Ve,"英文")):Object(a["createCommentVNode"])("",!0),e.product.translate.jpy?(Object(a["openBlock"])(),Object(a["createBlock"])("option",ve,"日文")):Object(a["createCommentVNode"])("",!0)],8,["onUpdate:modelValue"]),[[a["vModelSelect"],r.otherDetail[t].translateLanguage]])])):Object(a["createCommentVNode"])("",!0)])})),128)),ke,Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{class:"form-control mb-3",id:"note-bookMessageCart",rows:"2","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.customerDetail.message=e}),placeholder:"此備註不在商品包含範圍，不保證提供，但我們仍將盡力替您達成特殊需求"},null,512),[[a["vModelText"],r.customerDetail.message]])])]),Object(a["createVNode"])("ul",ye,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.customerDetail.users,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{class:["nav-item mb-1 position-relative",{"ms-3":0!==t}],role:"presentation",key:"paxNum-".concat(t)},[r.pageWarningShow[t]?(Object(a["openBlock"])(),Object(a["createBlock"])("i",Ce)):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("button",{type:"button",class:["nav-link nav-link-outline-primary rounded-1",{active:0===t,"nav-link-danger":r.pageWarningShow[t]}],id:"pills-tab-".concat(t),"data-bs-toggle":"pill","data-bs-target":"#pills-pax-".concat(t),role:"tab","aria-controls":"pills-pax-".concat(t),"aria-selected":"false"},Object(a["toDisplayString"])(t+1),11,["id","data-bs-target","aria-controls"]),Object(a["createVNode"])("div",null,[Object(a["createVNode"])("button",{type:"button",ref:"deletePaxTooltip",class:["delete-pax-num",{"d-none":0===t||r.customerDetail.users.length<=r.productMaxPaxQty}],"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"刪除第 ".concat(t+1," 位旅客"),onClick:function(e){return n.deletePax(t)}},[xe],10,["title","onClick"])])],2)})),128)),Object(a["createVNode"])("li",we,[Object(a["createVNode"])("button",{type:"button",ref:"addPaxTooltip",class:["nav-link nav-link-outline-primary rounded-1 ms-3",{"d-none":r.customerDetail.users.length>=r.totalProductsMaxPaxQty}],"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"新增旅客",onClick:t[2]||(t[2]=function(e){return n.addPax()})},[De],2)]),Object(a["createVNode"])("li",Be,[r.noteWarningShow?(Object(a["openBlock"])(),Object(a["createBlock"])("i",Se)):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("button",{type:"button",class:["nav-link nav-link-outline-primary rounded-1",{"nav-link-danger":r.noteWarningShow}],id:"pills-tab-note","data-bs-toggle":"pill","data-bs-target":"#pills-pax-note",role:"tab","aria-controls":"pills-pax-note","aria-selected":"false"}," 備註 ",2)])]),Object(a["createVNode"])("div",Pe,[Object(a["createVNode"])("h5",Ae,[Te,Object(a["createVNode"])("span",Le,"NT "+Object(a["toDisplayString"])(n.addComma(Math.floor(r.cart.final_total))),1)]),Object(a["createVNode"])("button",{type:"submit",class:"btn btn-primary d-block px-5 py-2",onClick:t[3]||(t[3]=function(){return n.validationCheck&&n.validationCheck.apply(n,arguments)}),disabled:0==Object.keys(r.cart).length||0==r.cart.total},[Ie],8,["disabled"])])]})),_:1},8,["onSubmit"])])],512),[[a["vShow"],r.cart.total>0]]),Object(a["withDirectives"])(Object(a["createVNode"])("div",Ue,[_e,Object(a["createVNode"])("p",Me,[Ee,Object(a["createVNode"])(d,{to:"/product_list",title:"前往產品頁",class:"text-secondary h3"},{default:Object(a["withCtx"])((function(){return[$e]})),_:1}),qe]),Object(a["createVNode"])("p",null,[We,Object(a["createVNode"])(d,{to:"/article_list",title:"前往文章頁",class:"text-secondary h3"},{default:Object(a["withCtx"])((function(){return[Fe]})),_:1}),He])],512),[[a["vShow"],0===r.cart.total]])])]),r.showAlert?(Object(a["openBlock"])(),Object(a["createBlock"])(u,{key:0,"alert-msg":e.alertMsg},null,8,["alert-msg"])):Object(a["createCommentVNode"])("",!0)],64)}var Qe=c("3835");c("d3b7");function Ge(e,t,c,a,o,r,n){try{var l=e[r](n),s=l.value}catch(i){return void c(i)}l.done?t(s):Promise.resolve(s).then(a,o)}function Je(e){return function(){var t=this,c=arguments;return new Promise((function(a,o){var r=e.apply(t,c);function n(e){Ge(r,a,o,n,l,"next",e)}function l(e){Ge(r,a,o,n,l,"throw",e)}n(void 0)}))}}c("96cf"),c("ac1f"),c("1276"),c("6062"),c("3ca3"),c("ddb0"),c("0481"),c("07ac"),c("4e82"),c("25f0"),c("5319"),c("a15b");var ze=c("a8ed"),Ze=c.n(ze),Ke={props:["cartInfo","customer","otherInfo"],emits:["emit-delete-all-products","emit-change-tkt-num","emit-delete-product","emit-add-pax","emit-delete-pax","emit-next-page"],data:function(){return{cart:{},customerDetail:{},otherDetail:[],addPaxTooltip:"",deletePaxTooltip:"",productMaxPaxQty:0,totalProductsMaxPaxQty:0,scrollBtnShow:!0,noteWarningShow:!1,pageWarningShow:[],productWarningShow:[],showAlert:!1}},components:{Alert:j["a"]},methods:{customAlert:function(e){this.alertMsg=e,this.showAlert=!0},closeCustomAlert:function(){this.showAlert=!1},isIdNum:function(e){var t=/^[A-Z][0-9]{9}$/;return!!t.test(e)||"請輸入正確的身分證字號"},addPax:function(){this.customerDetail.users[this.customerDetail.users.length]={}},deletePax:function(e){this.customerDetail.users.splice(e,1)},toNextPage:function(){for(var e=this,t=0;t<this.cart.carts.length;t+=1)this.productWarningShow[t]=!1;this.cart.carts.forEach((function(t,c){t.users.length!==t.qty&&(e.productWarningShow[c]=!0)})),this.productWarningShow.includes(!0)?(this.customAlert("請登錄每項商品的客戶"),window.setTimeout(this.closeCustomAlert,5e3)):this.$emit("emit-next-page",this.customerDetail,this.otherDetail)},validationCheck:function(){var e=this;return Je(regeneratorRuntime.mark((function t(){var c,a,o,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ze()();case 2:if(c=document.querySelectorAll(".is-invalid"),a=[],o=[],c.length>0){for(e.customAlert("請填寫客戶資料及相關備註"),window.setTimeout(e.closeCustomAlert,5e3),c.forEach((function(e){a.push(e.id.split("-"))})),e.noteWarningShow=!!a.map((function(e){return e[0]})).includes("note"),a.forEach((function(e){"note"!==e[0]&&o.push(e[e.length-1])})),o=Object(p["a"])(new Set(o)),r=0;r<e.customerDetail.users.length;r+=1)e.pageWarningShow[r]=!1;o.forEach((function(t){e.pageWarningShow[t]=!0}))}else for(e.noteWarningShow=!1,n=0;n<e.customerDetail.users.length;n+=1)e.pageWarningShow[n]=!1;case 6:case"end":return t.stop()}}),t)})))()}},watch:{cartInfo:{handler:function(){var e=this;this.cart=Object(h["a"])({},this.cartInfo);var t=this.cart.carts.map((function(e){return e.options})).flat().length;t<=2&&(this.scrollBtnShow=!1),this.cart.final_total=this.cartInfo.final_total,this.cart.carts.forEach((function(t){if(Object.values(t.product.transfer).includes(!0)||Object.values(t.product.translate).includes(!0))if(e.otherDetail.map((function(e){return e.id})).includes(t.id)){var c=e.otherDetail.map((function(e){return e.optionName})),a=e.otherDetail.map((function(e){return e.start_date}));t.options.forEach((function(o){!1===c.includes(o.optionName)&&!1===a.includes(o.start_date)&&e.otherDetail.push({id:t.id,product:Object(h["a"])({},t.product),optionName:o.optionName,start_date:o.start_date,pickUpTime:"",pickUpPlace:"",schedule:"",includeChild:!1,childBd:"",childHeight:"",childWeight:"",translateLanguage:"中文"})}))}else t.options.forEach((function(c){e.otherDetail.push({id:t.id,product:Object(h["a"])({},t.product),optionName:c.optionName,start_date:c.start_date,pickUpTime:"",pickUpPlace:"",schedule:"",includeChild:!1,childBd:"",childHeight:"",childWeight:"",translateLanguage:"中文"})}))}));var c=this.cart.carts.map((function(e){return e.qty}));this.totalProductsMaxPaxQty=c.reduce((function(e,t){return e+t}),0);var a=c.sort((function(e,t){return t-e})),o=Object(Qe["a"])(a,1);this.productMaxPaxQty=o[0];var r=this.customerDetail.users.length-this.productMaxPaxQty;if(r>0)this.customerDetail.users.splice(-1,r);else if(r<0){this.customerDetail.users=[{}];for(var n=0;n<this.productMaxPaxQty-1;n+=1)this.customerDetail.users.push({})}},deep:!0},customer:{handler:function(){this.customerDetail=Object(h["a"])({},this.customer)},deep:!0}},computed:{addComma:function(){return function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),"".concat(t.join(","))}}},created:function(){this.cart=Object(h["a"])({},this.cartInfo),this.customerDetail=Object(h["a"])({},this.customer),this.otherDetail=Object(p["a"])(this.otherInfo)},mounted:function(){var e=this;this.listener=function(){var t=e.$refs.scrollBtn;e.scrollBtnShow=t.scrollTop<t.scrollHeight-800},this.$refs.scrollBtn.addEventListener("scroll",this.listener)}};Ke.render=Re;var Xe=Ke,Ye={class:"container py-8"},et={class:"bg-light rounded-3 p-7"},tt=Object(a["createVNode"])("h2",{class:"h3 text-primary mb-6"},"訂單內容",-1),ct={class:"row mb-7 rounded-1"},at={class:"px-3 py-4 mb-2 border border-primary rounded-1 position-relative"},ot={class:"d-flex justify-content-between pb-2 mb-2\n                border-bottom border-gray"},rt={class:"mb-2"},nt={class:"w-50"},lt={class:"h3"},st={class:"h4 mb-3"},it={class:"text-end"},dt={class:"d-flex justify-content-between"},ut={class:"d-flex justify-content-evenly w-50"},mt={class:"d-flex align-items-center"},bt={key:0,class:"ms-1"},pt={key:1,class:"ms-1"},ht={key:2,class:"ms-1"},jt={key:0,class:"d-flex align-items-center"},Ot=Object(a["createVNode"])("span",{class:"ms-1"},"小",-1),ft={class:"modal fade",id:"productRemark",tabindex:"-1","aria-labelledby":"productRemarkLabel","aria-hidden":"true"},gt={class:"modal-dialog"},Nt={class:"modal-content"},Vt=Object(a["createVNode"])("div",{class:"modal-header bg-wave mb-3 position-relative"},[Object(a["createVNode"])("h3",{class:"modal-title"},"商品備註"),Object(a["createVNode"])("div",{class:"cable-car"})],-1),vt={class:"modal-body p-6"},kt={key:0},yt={key:1},Ct={key:2},xt={key:3},wt=Object(a["createVNode"])("p",null,"含有 4 歲以下幼童",-1),Dt={key:4},Bt=Object(a["createVNode"])("h2",{class:"h3 text-primary mb-6"},"客戶資料",-1),St={class:"row mb-7"},Pt={class:"position-relative p-md-6 p-3 bg-white"},At={class:"d-flex justify-content-between"},Tt={class:"w-50 d-flex flex-column justify-content-between"},Lt={class:"h3 mb-5"},It={class:"h4 ms-1"},Ut={class:"pax-num d-sm-inline d-none"},_t={class:"w-50"},Mt={class:"mb-2"},Et={class:"mb-4"},$t={class:"mb-2 d-sm-block d-none"},qt={class:"mb-2 d-sm-block d-none"},Wt={class:"mb-2 d-sm-block d-none"},Ft={class:"mb-2 h5 d-sm-none"},Ht={class:"mb-2 h5 d-sm-none"},Rt={class:"mb-2 h5 d-sm-none"},Qt=Object(a["createVNode"])("h2",{class:"h3 text-primary mb-6"},"付款資料",-1),Gt={class:"row mb-7"},Jt={class:"col-lg-4 col-md-6 mb-lg-0 mb-3"},zt=Object(a["createVNode"])("label",{for:"paymentMethodInput",class:"form-label"},"付款方式",-1),Zt=Object(a["createVNode"])("option",{disabled:"",value:""},"請選擇付款方式",-1),Kt=Object(a["createVNode"])("option",{selected:"",value:"線上刷卡"},"線上刷卡",-1),Xt=Object(a["createVNode"])("option",{value:"匯款"},"匯款",-1),Yt={class:"col-lg-4 col-md-6 mb-md-0 mb-3"},ec=Object(a["createVNode"])("label",{for:"taxIdInput",class:"form-label"},"統一編號（選填）",-1),tc={class:"col-lg-4 col-md-6"},cc=Object(a["createVNode"])("label",{for:"couponInput",class:"form-label"},"優惠券（選填）",-1),ac={class:"input-group mb-2"},oc=Object(a["createVNode"])("div",{class:"spinner-border spinner-border-sm text-light d-none me-1",role:"status"},[Object(a["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),rc=Object(a["createTextVNode"])(" 套用優惠碼 "),nc={key:0,class:"ms-1 h5 text-primary"},lc={class:"d-flex flex-column align-items-end"},sc={class:"h3 mb-3"},ic=Object(a["createTextVNode"])(" 總金額 "),dc={class:"h2 text-primary"},uc={class:"d-flex"},mc=Object(a["createVNode"])("div",{class:"spinner-border spinner-border-sm text-light d-none me-1",role:"status"},[Object(a["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),bc=Object(a["createVNode"])("p",{class:"h3"},"結帳",-1);function pc(e,t,c,o,r,n){var l=Object(a["resolveComponent"])("Field"),s=Object(a["resolveComponent"])("ErrorMessage"),i=Object(a["resolveComponent"])("Form");return Object(a["openBlock"])(),Object(a["createBlock"])("div",Ye,[Object(a["createVNode"])("div",et,[tt,Object(a["createVNode"])("div",ct,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.cart.carts,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:e.id},[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.options,(function(t,c){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:c,class:"col-md-6"},[Object(a["createVNode"])("div",at,[Object(a["createVNode"])("div",ot,[Object(a["createVNode"])("div",null,[Object(a["createVNode"])("p",rt,Object(a["toDisplayString"])(t.start_date),1),Object(a["createVNode"])("img",{src:e.product.imageUrl,alt:e.title,class:"cart-img"},null,8,["src","alt"])]),Object(a["createVNode"])("div",nt,[Object(a["createVNode"])("p",lt,Object(a["toDisplayString"])(e.product.title),1),Object(a["createVNode"])("p",st,Object(a["toDisplayString"])(t.optionName),1),Object(a["createVNode"])("p",it," NT "+Object(a["toDisplayString"])(n.addComma(t.optionPrice*(t.qtyDetail.adult+t.qtyDetail.child))),1)])]),Object(a["createVNode"])("div",dt,[Object(a["createVNode"])("div",ut,[Object(a["createVNode"])("div",mt,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.qtyDetail.adult)+" ",1),"每人"===e.product.lowestPriceUnit?(Object(a["openBlock"])(),Object(a["createBlock"])("span",bt,"大")):"包車服務"!==e.product.category&&"每人"!==e.product.lowestPriceUnit?(Object(a["openBlock"])(),Object(a["createBlock"])("span",pt," 組 ")):"包車服務"===e.product.category&&"每人"!==e.product.lowestPriceUnit?(Object(a["openBlock"])(),Object(a["createBlock"])("span",ht," 台 ")):Object(a["createCommentVNode"])("",!0)]),"每人"===e.product.lowestPriceUnit?(Object(a["openBlock"])(),Object(a["createBlock"])("div",jt,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.qtyDetail.child)+" ",1),Ot])):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#productRemark",onClick:function(c){return n.openModal(e,t)}}," 查看備註 ",8,["onClick"])])])])})),128))],64)})),128))]),Object(a["createVNode"])("div",ft,[Object(a["createVNode"])("div",gt,[Object(a["createVNode"])("div",Nt,[Vt,Object(a["createVNode"])("div",vt,[Object(a["createVNode"])("ul",null,[r.temp.pickUpTime?(Object(a["openBlock"])(),Object(a["createBlock"])("li",kt,"接送時間："+Object(a["toDisplayString"])(r.temp.pickUpTime),1)):Object(a["createCommentVNode"])("",!0),r.temp.pickUpPlace?(Object(a["openBlock"])(),Object(a["createBlock"])("li",yt,"接送地點："+Object(a["toDisplayString"])(r.temp.pickUpPlace),1)):Object(a["createCommentVNode"])("",!0),r.temp.schedule?(Object(a["openBlock"])(),Object(a["createBlock"])("li",Ct,"包車行程規劃："+Object(a["toDisplayString"])(r.temp.schedule),1)):Object(a["createCommentVNode"])("",!0),r.temp.includeChild?(Object(a["openBlock"])(),Object(a["createBlock"])("li",xt,[wt,Object(a["createVNode"])("p",null,"出生年月日："+Object(a["toDisplayString"])(r.temp.childBd),1),Object(a["createVNode"])("p",null,Object(a["toDisplayString"])(r.temp.childHeight)+" 公分 / "+Object(a["toDisplayString"])(r.temp.childWeight)+" 公斤",1)])):Object(a["createCommentVNode"])("",!0),r.temp.translateLanguage&&"中文"!==r.temp.translateLanguage?(Object(a["openBlock"])(),Object(a["createBlock"])("li",Dt," 導覽翻譯："+Object(a["toDisplayString"])(r.temp.translateLanguage),1)):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("li",null,"其他特殊需求（飲食、禁菸房...）："+Object(a["toDisplayString"])(r.temp.message),1)])])])])]),Bt,Object(a["createVNode"])("div",St,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(c.customer.users,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"col-lg-6",key:t},[Object(a["createVNode"])("div",Pt,[Object(a["createVNode"])("div",At,[Object(a["createVNode"])("div",Tt,[Object(a["createVNode"])("p",Lt,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.name)+" ",1),Object(a["createVNode"])("span",It,Object(a["toDisplayString"])(e.gender),1)]),Object(a["createVNode"])("p",Ut,Object(a["toDisplayString"])("第".concat(t+1,"位旅客")),1),Object(a["createVNode"])("img",{src:"https://github.com/vvvvvvii/tasteof/blob/main/public/img/num.png?raw=true",alt:"第".concat(t+1,"位旅客"),class:"pax-num-img d-sm-block d-none"},null,8,["alt"])]),Object(a["createVNode"])("div",_t,[Object(a["createVNode"])("p",Mt,"身分證字號： "+Object(a["toDisplayString"])(e.idNum),1),Object(a["createVNode"])("p",Et,"護照號碼： "+Object(a["toDisplayString"])(e.passportNum),1),Object(a["createVNode"])("p",$t,Object(a["toDisplayString"])(e.tel),1),Object(a["createVNode"])("p",qt,Object(a["toDisplayString"])(e.email),1),Object(a["createVNode"])("p",Wt,Object(a["toDisplayString"])(e.address),1)])]),Object(a["createVNode"])("p",Ft,Object(a["toDisplayString"])(e.tel),1),Object(a["createVNode"])("p",Ht,Object(a["toDisplayString"])(e.email),1),Object(a["createVNode"])("p",Rt,Object(a["toDisplayString"])(e.address),1)])])})),128))]),Qt,Object(a["createVNode"])(i,{onSubmit:n.addOrder},{default:Object(a["withCtx"])((function(c){var o=c.errors;return[Object(a["createVNode"])("div",Gt,[Object(a["createVNode"])("div",Jt,[zt,Object(a["createVNode"])(l,{name:"付款方式",class:["form-select",{"is-invalid":o["付款方式"]}],id:"paymentMethodInput",rules:"required",modelValue:r.paymentDetail.method,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.paymentDetail.method=e}),as:"select"},{default:Object(a["withCtx"])((function(){return[Zt,Kt,Xt]})),_:2},1032,["class","modelValue"]),Object(a["createVNode"])(s,{name:"付款方式",class:"invalid-feedback"})]),Object(a["createVNode"])("div",Yt,[ec,Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",id:"taxIdInput",name:"統一編號",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=function(e){return r.paymentDetail.taxIdNum=e})},null,512),[[a["vModelText"],r.paymentDetail.taxIdNum]])]),Object(a["createVNode"])("div",tc,[cc,Object(a["createVNode"])("div",ac,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",id:"couponInput",name:"優惠券",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=function(e){return r.paymentDetail.coupon=e})},null,512),[[a["vModelText"],r.paymentDetail.coupon]]),Object(a["createVNode"])("div",{ref:"checkCouponBtn",class:"input-group-text btn btn-primary",onClick:t[4]||(t[4]=function(t){return e.$emit("emit-check-coupon",r.paymentDetail.coupon)})},[oc,rc],512)]),r.paymentDetail.coupon?(Object(a["openBlock"])(),Object(a["createBlock"])("p",nc," 已套用優惠券 "+Object(a["toDisplayString"])(r.paymentDetail.coupon),1)):Object(a["createCommentVNode"])("",!0)])]),Object(a["createVNode"])("div",lc,[Object(a["createVNode"])("h5",sc,[ic,Object(a["createVNode"])("span",dc,"NT "+Object(a["toDisplayString"])(n.addComma(Math.floor(r.cart.final_total))),1)]),Object(a["createVNode"])("div",uc,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-primary px-5 py-2 h3",onClick:t[5]||(t[5]=function(t){return e.$emit("emit-pre-page")})}," 上一頁 "),Object(a["createVNode"])("button",{type:"submit",class:"btn btn-primary px-5 py-2 ms-2\n              d-flex justify-content-center align-items-center",ref:"addOrderBtn",disabled:0==Object.keys(r.cart).length||0==r.cart.total},[mc,bc],8,["disabled"])])])]})),_:1},8,["onSubmit"])])])}var hc=c("7b17"),jc={props:["cartInfo","customer","otherInfo","payment"],emits:["emit-check-coupon","emit-pre-page","emit-add-order"],data:function(){return{cart:{},customerDetail:{},otherDetail:[],paymentDetail:{},remarkModal:{},temp:{}}},methods:{addOrder:function(){this.$emit("emit-add-order",this.paymentDetail)},openModal:function(e,t){var c=this;this.temp={},this.otherDetail.forEach((function(a){a.id===e.id&&a.optionName===t.optionName&&(c.temp=Object(h["a"])({},a))})),this.temp.message=this.customerDetail.message,this.remarkModal.show()}},watch:{cartInfo:{handler:function(){this.cart=Object(h["a"])({},this.cartInfo),this.cart.final_total=this.cartInfo.final_total},deep:!0},customer:function(){this.customerDetail=Object(h["a"])({},this.customer)},otherInfo:function(){this.otherDetail=Object(p["a"])(this.otherInfo)},payment:{handler:function(){this.paymentDetail=Object(h["a"])({},this.payment)},deep:!0}},computed:{addComma:function(){return function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),"".concat(t.join(","))}}},created:function(){this.cart=Object(h["a"])({},this.cartInfo),this.customerDetail=Object(h["a"])({},this.customer),this.otherDetail=Object(p["a"])(this.otherInfo),this.paymentDetail=Object(h["a"])({},this.payment)},mounted:function(){this.remarkModal=new hc["a"](document.getElementById("productRemark"),{keyboard:!1})}};jc.render=pc;var Oc=jc,fc={class:"container py-8"},gc={class:"d-flex flex-md-row flex-column align-items-center"},Nc=Object(a["createVNode"])("img",{src:"https://github.com/vvvvvvii/tasteof/blob/main/public/img/finish%20cart.png?raw=true",alt:"恭喜您完成付款",class:"w-50"},null,-1),Vc={class:"text-primary"},vc={class:"h1 mb-lg-7 mb-3 text-md-start text-center"},kc=Object(a["createTextVNode"])(" 完成付款！ "),yc={class:"h2 ms-lg-3 d-lg-inline d-none"},Cc={class:"h2 text-md-end text-center d-lg-none mb-6"},xc=Object(a["createVNode"])("p",{class:"mb-3 text-md-start text-center"},[Object(a["createVNode"])("a",{class:"h3-md text-primary"},"查看訂單細節")],-1),wc={class:"h2 text-md-start text-center"},Dc={class:"bg-wave py-7",id:"moreActivitiesSection"},Bc={class:"container"},Sc=Object(a["createVNode"])("h3",{class:"text-primary mb-5"},"更多活動？",-1),Pc={class:"row"},Ac={class:"card-img-outer"},Tc={class:"card-body"},Lc={class:"card-title ellipsis ellipsis-one-line"},Ic={class:"h3-md h5 text-end"};function Uc(e,t,c,o,r,n){var l=Object(a["resolveComponent"])("router-link"),s=Object(a["resolveComponent"])("alert");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])("div",fc,[Object(a["createVNode"])("div",gc,[Nc,Object(a["createVNode"])("div",Vc,[Object(a["createVNode"])("h2",vc,[kc,Object(a["createVNode"])("span",yc,"NT "+Object(a["toDisplayString"])(n.addComma(Math.floor(c.orderDetail.total))),1)]),Object(a["createVNode"])("p",Cc," NT "+Object(a["toDisplayString"])(n.addComma(Math.floor(c.orderDetail.total))),1),xc,Object(a["createVNode"])("p",wc,Object(a["toDisplayString"])(c.orderDetail.orderId),1)])])]),Object(a["createVNode"])("div",Dc,[Object(a["createVNode"])("div",Bc,[Sc,Object(a["createVNode"])("div",Pc,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.randomProducts,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"col-4",key:t},[Object(a["createVNode"])(l,{to:"/product/".concat(e.id),title:"查看更多",class:"card overflow-hidden"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("div",Ac,[Object(a["createVNode"])("img",{src:e.imageUrl,alt:e.title,class:"card-img"},null,8,["src","alt"])]),Object(a["createVNode"])("div",Tc,[Object(a["createVNode"])("h4",Lc,Object(a["toDisplayString"])(e.title),1),Object(a["createVNode"])("p",Ic,"NT "+Object(a["toDisplayString"])(e.lowestPrice)+" 起",1)])]})),_:2},1032,["to"])])})),128))])])]),r.showAlert?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:0,"alert-msg":r.alertMsg},null,8,["alert-msg"])):Object(a["createCommentVNode"])("",!0)],64)}var _c={props:["orderDetail"],data:function(){return{totalProducts:[],randomProducts:[],showAlert:!1,alertMsg:""}},components:{alert:j["a"]},methods:{getTotalProducts:function(){var e=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/products/all")).then((function(t){t.data.success?(e.totalProducts=t.data.products,e.totalProducts.forEach((function(t,c){var a=t.packageOptions.map((function(e){return e.price}));a=a.sort((function(e,t){return e-t}));var o=a,r=Object(Qe["a"])(o,1),n=r[0];e.totalProducts[c].lowestPrice=n,t.packageOptions.forEach((function(t){t.price===n&&(e.totalProducts[c].lowestPriceUnit=t.unit)}))})),e.getRandomProducts()):(e.customAlert(t.data.message),window.setTimeout(e.closeCustomAlert,5e3))})).catch((function(t){e.customAlert(t.response),window.setTimeout(e.closeCustomAlert,5e3)}))},getRandomProducts:function(){for(var e=this,t=new Set([]),c=this.totalProducts.length<3?this.totalProducts.length:3,a=0;t.size<c;a+1){var o=this.totalProducts.length,r=Math.floor(Math.random(o)*o);t.add(r)}t.forEach((function(t){e.randomProducts.push(e.totalProducts[t])}))},customAlert:function(e){this.alertMsg=e,this.showAlert=!0},closeCustomAlert:function(){this.showAlert=!1}},computed:{addComma:function(){return function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),"".concat(t.join("."))}}},created:function(){this.getTotalProducts()}};_c.render=Uc;var Mc=_c,Ec=c("e689"),$c={data:function(){return{customerDetail:{users:[{}],message:"無備註事項"},cart:{},paymentDetail:{method:"",taxIdNum:"",coupon:""},otherDetail:[],orderDetail:{total:0,orderId:""},showAlert:!1,alertMsg:"",checkCartPageShow:!0,confirmCartPageShow:!1,finishCartPageShow:!1}},components:{Alert:j["a"],CheckCart:Xe,ConfirmCart:Oc,FinishCart:Mc},methods:{getCartInfo:function(e){var t=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/cart")).then((function(c){if(c.data.success){t.cart=c.data.data;var a=[];if(t.cart.carts.forEach((function(e,c){Object.keys(e).includes("coupon")?a.push(!0):a.push(!1),t.cart.carts[c].users=[]})),a.every((function(e){return!1===e})))t.cart.total=0,t.cart.carts.forEach((function(e,c){t.cart.carts[c].total=0,e.options.forEach((function(e){t.cart.carts[c].total+=e.total,t.cart.total+=e.total})),t.cart.carts[c].final_total=t.cart.carts[c].total,t.cart.final_total=t.cart.total}));else if(a.every((function(e){return!0===e}))){var o=t.cart.carts.find((function(e){return e.coupon})),r=o.coupon;t.paymentDetail.coupon=r.code,t.cart.total=0,t.cart.final_total=0,t.cart.carts.forEach((function(e,c){t.cart.carts[c].total=0,e.options.forEach((function(e){t.cart.carts[c].total+=e.total,t.cart.total+=e.total})),t.cart.carts[c].final_total=e.total*e.coupon.percent/100,t.cart.final_total+=t.cart.carts[c].final_total})),t.cart.final_total=Math.floor(t.cart.final_total)}else{var n=t.cart.carts.find((function(e){return e.coupon})),l=n.coupon;t.paymentDetail.coupon=l.code,t.cart.total=0,t.cart.final_total=0,t.cart.carts.forEach((function(e,c){t.cart.carts[c].coupon=l,t.cart.carts[c].total=0,e.options.forEach((function(e){t.cart.carts[c].total+=e.total,t.cart.total+=e.total})),t.cart.carts[c].final_total=e.total*e.coupon.percent/100,t.cart.final_total+=t.cart.carts[c].final_total})),t.cart.final_total=Math.floor(t.cart.final_total)}e&&(e.children[0].classList.add("d-none"),e.children[1].classList.remove("d-none"))}else t.customAlert(c.data.message),window.setTimeout(t.closeCustomAlert,5e3),e&&(e.children[0].classList.add("d-none"),e.children[1].classList.remove("d-none"))})).catch((function(c){t.customAlert(c.response),window.setTimeout(t.closeCustomAlert,5e3),e&&(e.children[0].classList.add("d-none"),e.children[1].classList.remove("d-none"))}))},customAlert:function(e){this.alertMsg=e,this.showAlert=!0},closeCustomAlert:function(){this.showAlert=!1},changeTktNum:function(e,t,c,a,o){var r=this,n=this.$refs.checkCart.$refs["adultStatus".concat(c.optionName,"-").concat(c.start_date)],l=this.$refs.checkCart.$refs["childStatus".concat(c.optionName,"-").concat(c.start_date)],s=Object(h["a"])({},c.qtyDetail);"adult"===e?(n.children[0].classList.remove("d-none"),n.children[1].classList.add("d-none"),"plus"===t?s.adult+=1:"minus"===t&&s.adult>=2&&(s.adult-=1)):(l.children[0].classList.remove("d-none"),l.children[1].classList.add("d-none"),"plus"===t?s.child+=1:"minus"===t&&s.child>=1&&(s.child-=1));var i=[];this.cart.carts.forEach((function(e){e.id===o&&(i=Object(p["a"])(e.options))}));var d={data:{product_id:o,qty:s.adult+s.child,options:i}};d.data.options[a].qtyDetail=s,this.$http.put("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/cart/").concat(o),d).then((function(t){t.data.success?"adult"===e?r.getCartInfo(n):r.getCartInfo(l):(r.customAlert(t.data.message),window.setTimeout(r.closeCustomAlert,5e3),"adult"===e?(n.children[0].classList.add("d-none"),n.children[1].classList.remove("d-none")):(l.children[0].classList.add("d-none"),l.children[1].classList.remove("d-none")))})).catch((function(t){r.customAlert(t.response),window.setTimeout(r.closeCustomAlert,5e3),"adult"===e?(n.children[0].classList.add("d-none"),n.children[1].classList.remove("d-none")):(l.children[0].classList.add("d-none"),l.children[1].classList.remove("d-none"))}))},deleteProduct:function(e,t,c){var a=this,o=this.$refs.checkCart.$refs["deleteCartProduct".concat(e.optionName)],r=this.cart.carts.map((function(e){return e.id})),n=r.indexOf(c);if(this.cart.carts[n].options.splice(t,1),0!==this.cart.carts[n].options.length){var l={data:Object(h["a"])({},this.cart.carts[n])},s=l.data.options.map((function(e){return e.qtyDetail.adult})),i=l.data.options.map((function(e){return e.qtyDetail.child}));l.data.qty=s.reduce((function(e,t){return e+t}))+i.reduce((function(e,t){return e+t})),this.$http.put("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/cart/").concat(c),l).then((function(e){e.data.success&&"更新購物車有誤"!==e.data.message?(a.customAlert("已清除商品"),window.setTimeout(a.closeCustomAlert,5e3),a.getCartInfo()):(a.customAlert(e.data.message),window.setTimeout(a.closeCustomAlert,5e3))})).catch((function(e){a.customAlert(e.response),window.setTimeout(a.closeCustomAlert,5e3)}))}else this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/cart/").concat(c)).then((function(e){e.data.success?(o.children[0].classList.remove("d-none"),o.children[1].classList.add("d-none"),a.customAlert("已清除商品"),a.getCartInfo(),window.setTimeout(a.closeCustomAlert,5e3),Ec["a"].emit("update-cart")):(a.customAlert(e.data.message),window.setTimeout(a.closeCustomAlert,5e3),Ec["a"].emit("update-cart"))})).catch((function(e){a.customAlert(e.response),window.setTimeout(a.closeCustomAlert,5e3)}))},deleteAllProducts:function(){var e=this,t=this.$refs.checkCart.$refs.deleteOrderBtn;t.classList.add("disabled"),t.children[0].classList.remove("d-none"),this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/carts")).then((function(c){c.data.success?(e.customAlert("已清除購物車"),e.getCartInfo(),t.classList.remove("disabled"),t.children[0].classList.add("d-none"),window.setTimeout(e.closeCustomAlert,3500),window.setTimeout(e.backToHomePage,4e3),Ec["a"].emit("update-cart")):(e.customAlert(c.data.message),window.setTimeout(e.closeCustomAlert,5e3),t.classList.remove("disabled"),t.children[0].classList.add("d-none"),Ec["a"].emit("update-cart"))})).catch((function(c){e.customAlert(c.response),window.setTimeout(e.closeCustomAlert,5e3),t.classList.remove("disabled"),t.children[0].classList.add("d-none")}))},saveCustomerDetail:function(e,t){this.customerDetail=e,this.otherDetail=t,this.checkCartPageShow=!1,this.confirmCartPageShow=!0},backToFirstPage:function(){this.checkCartPageShow=!0,this.confirmCartPageShow=!1},checkCoupon:function(e){var t=this,c=this.$refs.confirmCart.$refs.checkCouponBtn;c.classList.add("disabled"),c.children[0].classList.remove("d-none");var a={data:{code:e}};this.$http.post("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/coupon"),a).then((function(e){if(e.data.success){var a=e.data;t.customAlert(a.message),window.setTimeout(t.closeCustomAlert,5e3),t.getCartInfo(),c.classList.remove("disabled"),c.children[0].classList.add("d-none")}else t.customAlert(e.data.message),window.setTimeout(t.closeCustomAlert,5e3),c.classList.remove("disabled"),c.children[0].classList.add("d-none")})).catch((function(e){t.customAlert(e.response),window.setTimeout(t.closeCustomAlert,5e3),c.classList.remove("disabled"),c.children[0].classList.add("d-none")}))},addOrder:function(e){var t=this;this.paymentDetail=e;var c=this.$refs.confirmCart.$refs.addOrderBtn;c.classList.add("disabled"),c.children[0].classList.remove("d-none");var a={data:{user:Object(h["a"])(Object(h["a"])({},this.customerDetail.users[0]),{},{paymentDetail:{total:this.cart.total,final_total:this.cart.final_total,payment_method:this.paymentDetail.method,taxIdNum:this.paymentDetail.taxIdNum,coupon:this.paymentDetail.coupon}}),message:this.customerDetail.message}};this.orderDetail.total=this.cart.final_total,this.$http.post("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/order"),a).then((function(e){e.data.success?(t.orderDetail.orderId=e.data.orderId,t.getCartInfo(),c.classList.remove("disabled"),c.children[0].classList.add("d-none"),t.confirmCartPageShow=!1,t.finishCartPageShow=!0,Ec["a"].emit("update-cart")):(t.customAlert(e.data.message),window.setTimeout(t.closeCustomAlert,5e3),c.classList.remove("disabled"),c.children[0].classList.add("d-none"),Ec["a"].emit("update-cart"))})).catch((function(e){t.customAlert(e.response),window.setTimeout(t.closeCustomAlert,5e3),c.classList.remove("disabled"),c.children[0].classList.add("d-none")}))}},created:function(){this.getCartInfo()}};$c.render=b;t["default"]=$c},a02d:function(e,t,c){"use strict";var a=c("7a23"),o={class:"alert alert-primary fade show",role:"alert"},r=Object(a["createVNode"])("i",{class:"bi bi-exclamation-triangle-fill me-2 text-primary"},null,-1);function n(e,t,c,n,l,s){return Object(a["openBlock"])(),Object(a["createBlock"])("div",o,[r,Object(a["createTextVNode"])(Object(a["toDisplayString"])(c.alertMsg),1)])}var l={props:["alertMsg"]};l.render=n;t["a"]=l},a8ed:function(e,t){var c="function"===typeof setImmediate?setImmediate:setTimeout;function a(){return new Promise((function(e){c(e)}))}e.exports=a},e689:function(e,t,c){"use strict";var a=function(e){return{all:e=e||new Map,on:function(t,c){var a=e.get(t);a?a.push(c):e.set(t,[c])},off:function(t,c){var a=e.get(t);a&&(c?a.splice(a.indexOf(c)>>>0,1):e.set(t,[]))},emit:function(t,c){var a=e.get(t);a&&a.slice().map((function(e){e(c)})),(a=e.get("*"))&&a.slice().map((function(e){e(t,c)}))}}},o=a();t["a"]=o}}]);
//# sourceMappingURL=chunk-0fcbf75b.d5086e38.js.map