{"version":3,"sources":["webpack:///./src/views/Article.vue","webpack:///./src/views/Article.vue?d99b","webpack:///./src/components/Alert.vue","webpack:///./src/components/Alert.vue?d299"],"names":["class","id","article","title","author","create_at","tagCheck","item","key","autoplay","loop","slides-per-view","spaceBetween","imagesUrl","src","content","randomProducts","to","imageUrl","alt","lowestPrice","lowestPriceUnit","showAlert","alert-msg","alertMsg","data","totalProducts","props","components","alert","methods","getArticleData","seed","this","$http","get","then","res","success","Date","toISOString","split","replace","getTotalProducts","customAlert","message","catch","err","response","products","forEach","index","packageOptionsPrice","packageOptions","map","i","price","sort","x","y","unit","getRandomProducts","area","find","e","filterArr","push","arrSet","Set","maxSize","length","size","num","Math","floor","random","add","setThumbsSwiper","swiper","thumbsSwiper","msg","closeCustomAlert","created","watch","handler","$router","go","render","role"],"mappings":"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","file":"js/chunk-1261d189.68114ab0.js","sourcesContent":["<template>\n  <div>\n    <div class=\"container\">\n      <div class=\"row justify-content-center py-8\">\n        <div class=\"col-lg-8\">\n          <div class=\"d-flex justify-content-between mb-6\">\n            <div>\n              <h2 class=\"mb-2\">{{ article.title }}</h2>\n              <p class=\"text-gray-dark\">文：{{ article.author }}</p>\n            </div>\n            <p>{{ article.create_at }}</p>\n          </div>\n          <div class=\"mb-4\">\n            <span\n              v-for=\"(item, key) in article.tagCheck\"\n              :key=\"key\"\n              class=\"btn btn-outline-secondary rounded-3\"\n              :class=\"{ 'ms-2': key !== 0 }\"\n              >#{{ item }}</span\n            >\n          </div>\n          <Swiper\n            :autoplay=\"{\n              delay: 5000,\n              disableOnInteraction: false,\n            }\"\n            :loop=\"true\"\n            :slides-per-view=\"3\"\n            :spaceBetween=\"200\"\n            class=\"mySwiper article-main-img mb-6\"\n          >\n            <SwiperSlide v-for=\"item in article.imagesUrl\" :key=\"item.id\">\n              <img :src=\"item\" class=\"swiper-img object-fit-cover\" />\n            </SwiperSlide>\n          </Swiper>\n          <div v-html=\"article.content\" class=\"ckeditor-content\"></div>\n        </div>\n      </div>\n    </div>\n    <div class=\"bg-light pt-6 pb-8\" id=\"moreActivitiesSection\">\n      <div class=\"container\">\n        <h3 class=\"text-primary mb-5\">更多相似活動</h3>\n        <div class=\"row\">\n          <div class=\"col-4\" v-for=\"(item, key) in randomProducts\" :key=\"key\">\n            <router-link :to=\"`/product/${item.id}`\" title=\"查看更多\" class=\"card overflow-hidden\">\n              <div class=\"card-img-outer\">\n                <img :src=\"item.imageUrl\" :alt=\"item.title\" class=\"card-img\" />\n              </div>\n              <div class=\"card-body\">\n                <h4 class=\"card-title ellipsis\">{{ item.title }}</h4>\n                <p class=\"h3 text-end\">\n                  NT {{ item.lowestPrice }} 起\n                  <span class=\"h4\"> / {{ item.lowestPriceUnit }}</span>\n                </p>\n              </div>\n            </router-link>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!--alert-->\n    <alert v-if=\"showAlert\" :alert-msg=\"alertMsg\"></alert>\n  </div>\n</template>\n<script>\nimport alert from '@/components/Alert.vue';\n\nexport default {\n  data() {\n    return {\n      article: [],\n      content: [],\n      totalProducts: [],\n      randomProducts: [],\n      showAlert: false,\n      alertMsg: '',\n    };\n  },\n  props: ['id'],\n  components: {\n    alert,\n  },\n  methods: {\n    getArticleData() {\n      const seed = this.id;\n      this.$http\n        .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/article/${seed}`)\n        .then((res) => {\n          if (res.data.success) {\n            this.article = res.data.article;\n            this.article.create_at = new Date(this.article.create_at * 1000)\n              .toISOString()\n              .split('T')[0]\n              .replace(/-/g, ' / ');\n            // // 如果 imagesUrl 裡有空字串，把它刪掉再顯示，避免圖片顯示錯誤\n            // this.moreInfo.productInfo.imagesUrl = this.moreInfo.productInfo.imagesUrl.filter(\n            //   (e) => e !== '',\n            // );\n            this.getTotalProducts();\n          } else {\n            this.customAlert(res.data.message);\n          }\n        })\n        .catch((err) => {\n          this.customAlert(err.response);\n        });\n    },\n    getTotalProducts() {\n      this.$http\n        .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`)\n        .then((res) => {\n          if (res.data.success) {\n            this.totalProducts = res.data.products;\n            this.totalProducts.forEach((item, index) => {\n              // 個別取出每個產品\n              let packageOptionsPrice = item.packageOptions.map((i) => i.price); // 取出該產品的所有方案中的價格\n              packageOptionsPrice = packageOptionsPrice.sort((x, y) => x - y); // 價格小排到大\n              // this.products[index].lowestPrice = packageOptionsPrice[0];\n              const [lowestPrice] = packageOptionsPrice; // 該產品最低價格為陣列第一個數\n              this.totalProducts[index].lowestPrice = lowestPrice;\n              // 找到該價格對應的單位\n              item.packageOptions.forEach((i) => {\n                if (i.price === lowestPrice) {\n                  this.totalProducts[index].lowestPriceUnit = i.unit;\n                }\n              });\n            });\n            this.getRandomProducts();\n          } else {\n            this.customAlert(res.data.message);\n          }\n        })\n        .catch((err) => {\n          this.customAlert(err.response);\n        });\n    },\n    getRandomProducts() {\n      const { tagCheck } = this.article;\n      let area;\n      if (\n        tagCheck.find(\n          (e) => e === '基隆'\n            || e === '台北'\n            || e === '新北'\n            || e === '桃園'\n            || e === '新竹'\n            || e === '苗栗',\n        )\n      ) {\n        area = '雙北';\n      } else if (\n        tagCheck.find((e) => e === '台中' || e === '彰化' || e === '南投' || e === '雲林')\n      ) {\n        area = '中彰投';\n      } else if (tagCheck.find((e) => e === '嘉義' || e === '台南')) {\n        area = '嘉南';\n      } else if (tagCheck.find((e) => e === '高雄' || e === '屏東')) {\n        area = '高屏';\n      } else if (\n        tagCheck.find((e) => e === '宜蘭' || e === '花蓮' || e === '台東' || e === '離島')\n      ) {\n        area = '花東';\n      }\n      const filterArr = [];\n      this.totalProducts.forEach((item) => {\n        item.tagCheck.forEach((i) => {\n          if (i === area) {\n            filterArr.push(item);\n          }\n        });\n      });\n      const arrSet = new Set([]);\n      const maxSize = filterArr.length < 3 ? filterArr.length : 3; // 該品項項目少於三項時，顯示該品項數量即可\n      for (let index = 0; arrSet.size < maxSize; index + 1) {\n        const { length } = filterArr;\n        const num = Math.floor(Math.random(length) * length); // 隨機取得商品\n        arrSet.add(num);\n      }\n      arrSet.forEach((i) => {\n        this.randomProducts.push(filterArr[i]); // 取得未重複的商品放進 randomProducts 陣列中\n      });\n    },\n    setThumbsSwiper(swiper) {\n      this.thumbsSwiper = swiper;\n    },\n    customAlert(msg) {\n      this.alertMsg = msg;\n      this.showAlert = true; // 秀出 alert\n    },\n    closeCustomAlert() {\n      this.showAlert = false;\n    },\n  },\n  created() {\n    this.getArticleData();\n  },\n  watch: {\n    '$route.params.id': {\n      handler() {\n        this.$router.go(); // 加這句不然按更多相似活動時，網址有變內容卻要手動重新整理才會變新商品\n      },\n    },\n  },\n};\n</script>\n","import { render } from \"./Article.vue?vue&type=template&id=164526b0\"\nimport script from \"./Article.vue?vue&type=script&lang=js\"\nexport * from \"./Article.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"alert alert-primary alert-dismissible fade show\" role=\"alert\">\n    {{ alertMsg }}\n  </div>\n</template>\n<script>\nexport default {\n  props: ['alertMsg'],\n};\n</script>\n","import { render } from \"./Alert.vue?vue&type=template&id=75396c34\"\nimport script from \"./Alert.vue?vue&type=script&lang=js\"\nexport * from \"./Alert.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}