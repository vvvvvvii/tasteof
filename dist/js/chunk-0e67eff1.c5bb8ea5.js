(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e67eff1"],{1799:function(e,t,a){"use strict";var c=a("7a23"),r={"aria-label":"Page navigation"},o={class:"pagination justify-content-center"},l={class:"page-link",href:"#"};function n(e,t,a,n,i,d){return Object(c["openBlock"])(),Object(c["createBlock"])("nav",r,[Object(c["createVNode"])("ul",o,[Object(c["createVNode"])("li",{class:["page-item",{disabled:!i.pagination.has_pre}]},[Object(c["createVNode"])("a",{class:"page-link",href:"#",tabindex:"-1","aria-disabled":"true",onClick:t[1]||(t[1]=Object(c["withModifiers"])((function(e){return d.emitChangePage(i.pagination.current_page-1)}),["prevent"]))},"Previous")],2),(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(d.pagipages,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("li",{class:["page-item",{active:i.pagination.current_page===e}],key:e,onClick:Object(c["withModifiers"])((function(t){return d.emitChangePage(e)}),["prevent"])},[Object(c["createVNode"])("a",l,Object(c["toDisplayString"])(e),1)],10,["onClick"])})),128)),Object(c["createVNode"])("li",{class:["page-item",{disabled:!i.pagination.has_next}]},[Object(c["createVNode"])("a",{class:"page-link",href:"#",onClick:t[2]||(t[2]=Object(c["withModifiers"])((function(e){return d.emitChangePage(i.pagination.current_page+1)}),["prevent"]))},"Next")],2)])])}var i=a("5530"),d={props:["page","filterProduct"],data:function(){return{pagination:Object(i["a"])({},this.page)}},methods:{emitChangePage:function(e){e>0&&e<=this.pagipages&&(this.pagination.current_page=e,this.pagination.page_start=this.pagination.per_page*e-this.pagination.per_page+1,this.pagination.page_end=this.pagination.per_page*e,1===e?this.pagination.has_pre=!1:e===this.pagination.total_pages?this.pagination.has_next=!1:(this.pagination.has_pre=!0,this.pagination.has_next=!0)),this.$emit("emit-pagination",this.pagination)}},computed:{pagipages:function(){return Math.ceil(this.filterProduct.length/this.page.per_page)}}};d.render=n;t["a"]=d},"5b64":function(e,t,a){"use strict";a.r(t);a("ac1f"),a("5319");var c=a("7a23"),r={class:"bg-light"},o={class:"container p-4"},l={class:"d-flex justify-content-between"},n=Object(c["createVNode"])("label",{for:"searchOrder"},[Object(c["createVNode"])("i",{class:"bi bi-search"})],-1),i={class:"mb-4"},d={key:0},s={key:0},b={key:1},p={key:1},O={key:0},u={key:1},m={class:"container py-4"},j={class:"table mb-6"},h=Object(c["createVNode"])("thead",null,[Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th",{width:"150"},"建立日期"),Object(c["createVNode"])("th",null,"訂單編號"),Object(c["createVNode"])("th",{width:"120"},"金額"),Object(c["createVNode"])("th",{width:"120"},"付款狀態"),Object(c["createVNode"])("th",{width:"120"})])],-1),g={width:"150"},f={class:"pe-4"},N={width:"120"},V={width:"120"},k={width:"120"},y={class:"ms-2"},v=Object(c["createVNode"])("small",null,"訂單內容：",-1);function B(e,t,a,B,w,D){var M=Object(c["resolveComponent"])("alert"),x=Object(c["resolveComponent"])("order-edit-modal"),_=Object(c["resolveComponent"])("order-delete-modal"),S=Object(c["resolveComponent"])("pagination");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[Object(c["createVNode"])("div",r,[Object(c["createVNode"])("div",o,[Object(c["createVNode"])("div",l,[Object(c["createVNode"])("div",null,[n,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"search",id:"searchOrder",class:"ms-2 rounded-3 px-3",placeholder:"搜尋訂單編號","onUpdate:modelValue":t[1]||(t[1]=function(e){return w.searchOrder=e})},null,512),[[c["vModelText"],w.searchOrder]])]),Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-primary d-inline-flex me-2",onClick:t[2]||(t[2]=function(){return D.deleteAll&&D.deleteAll.apply(D,arguments)})}," 刪除所有訂單 ")]),Object(c["createVNode"])("div",i,[""===w.searchOrder?(Object(c["openBlock"])(),Object(c["createBlock"])("small",d,[0==w.orders.length?(Object(c["openBlock"])(),Object(c["createBlock"])("p",s,"目前尚無訂單")):(Object(c["openBlock"])(),Object(c["createBlock"])("p",b,"此分頁有 "+Object(c["toDisplayString"])(w.orders.length)+" 筆訂單",1))])):(Object(c["openBlock"])(),Object(c["createBlock"])("small",p,[0==D.filterOrder.length?(Object(c["openBlock"])(),Object(c["createBlock"])("p",O,"查找不到相關訂單")):(Object(c["openBlock"])(),Object(c["createBlock"])("p",u,"此分頁為您查到 "+Object(c["toDisplayString"])(D.filterOrder.length)+" 筆訂單",1))]))])])]),Object(c["createVNode"])("div",m,[Object(c["createVNode"])("table",j,[h,Object(c["createVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(D.filterOrder,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],{key:e.id},[Object(c["createVNode"])("tr",{"data-bs-toggle":"collapse",href:"#collapseOrder-"+t,"aria-expanded":"false","aria-controls":"collapseOrder-"+t,class:"light-primary-hover",title:"點擊看詳細內容"},[Object(c["createVNode"])("td",g,Object(c["toDisplayString"])(e.create_at),1),Object(c["createVNode"])("td",f,Object(c["toDisplayString"])(e.id),1),Object(c["createVNode"])("td",N,Object(c["toDisplayString"])(e.total),1),Object(c["createVNode"])("td",V,[Object(c["createVNode"])("span",{class:["material-icons",{"text-success":e.is_paid,"text-gray":!e.is_paid}]},Object(c["toDisplayString"])(e.is_paid?"credit_score":"credit_card_off"),3)]),Object(c["createVNode"])("td",k,[Object(c["createVNode"])("a",null,[Object(c["createVNode"])("span",{class:"material-icons",onClick:function(t){return D.openModal(e,"editOrder")}}," mode_edit ",8,["onClick"])]),Object(c["createVNode"])("a",y,[Object(c["createVNode"])("span",{class:"material-icons",onClick:function(t){return D.openModal(e,"deleteOrder")},"data-bs-toggle":"modal","data-bs-target":"#deleteModal"}," delete ",8,["onClick"])])])],8,["href","aria-controls"]),Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("td",{colspan:"5",class:"collapse border-bottom-0",id:"collapseOrder-"+t},[v,(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.products,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])("ul",{key:"product-"+t},[Object(c["createVNode"])("li",null,[Object(c["createVNode"])("small",null,Object(c["toDisplayString"])(e.start_date.replace(/-/g," / "))+" "+Object(c["toDisplayString"])(e.product.title)+" * "+Object(c["toDisplayString"])(e.qty),1)])])})),128))],8,["id"])])],64)})),128))])]),w.showAlert?(Object(c["openBlock"])(),Object(c["createBlock"])(M,{key:0,"alert-msg":w.alertMsg},null,8,["alert-msg"])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(x,{"modal-title":e.modalTitle,temp:w.temp,onEmitOrderModal:D.editOrder,ref:"orderModal"},null,8,["modal-title","temp","onEmitOrderModal"]),Object(c["createVNode"])(_,{temp:w.temp,onEmitDeleteModal:D.deleteOrder},null,8,["temp","onEmitDeleteModal"]),w.pagination.total_pages>1?(Object(c["openBlock"])(),Object(c["createBlock"])(S,{key:1,page:w.pagination,onEmitPagination:D.getData},null,8,["page","onEmitPagination"])):Object(c["createCommentVNode"])("",!0)])],64)}var w=a("5530"),D=(a("99af"),a("159b"),a("1276"),a("4de4"),a("466d"),a("98ab")),M=a("1799"),x=a("7b17"),_=(a("b0c0"),{id:"orderModal",ref:"orderModal",class:"modal fade",tabindex:"-1","aria-labelledby":"orderModalLabel","aria-hidden":"true"}),S={class:"modal-dialog modal-xl"},C={class:"modal-content product-modal-bg"},A={class:"modal-body"},L=Object(c["createVNode"])("div",{class:"text-end"},[Object(c["createVNode"])("button",{type:"button",class:"bg-transparent border-0 p-2 text-secondary h3","data-bs-dismiss":"modal","aria-label":"Close"},[Object(c["createVNode"])("i",{class:"bi bi-x-lg"})])],-1),P={class:"container-fluid"},I={class:"mb-4"},T=Object(c["createVNode"])("h2",null,"訂單內容",-1),E={class:"mb-2"},$=Object(c["createTextVNode"])(" 訂單編號： "),F=Object(c["createTextVNode"])(" 購買細項： "),q=Object(c["createTextVNode"])(" 客戶訂單備註： "),J={class:"form-check mb-2"},U=Object(c["createVNode"])("label",{class:"form-check-label",for:"paymentStatus"},"付款狀態",-1),z=Object(c["createVNode"])("h2",null,"客戶資料",-1),G={class:"d-flex justify-content-center"},H=Object(c["createVNode"])("div",{class:"spinner-border spinner-border-sm text-dark d-none",role:"status"},[Object(c["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),K={class:"ms-1"},Q=Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-dark w-25 d-block ms-3","data-bs-dismiss":"modal"}," 取消 ",-1);function R(e,t,a,r,o,l){return Object(c["openBlock"])(),Object(c["createBlock"])("div",_,[Object(c["createVNode"])("div",S,[Object(c["createVNode"])("div",C,[Object(c["createVNode"])("div",A,[L,Object(c["createVNode"])("div",P,[Object(c["createVNode"])("div",I,[T,Object(c["createVNode"])("div",E,[Object(c["createVNode"])("ul",null,[Object(c["createVNode"])("li",null,[Object(c["createVNode"])("h3",null,[$,Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(o.tempOrder.id),1)])]),Object(c["createVNode"])("li",null,[Object(c["createVNode"])("h3",null,[F,(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(o.tempOrder.products,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])("ul",{key:t},[Object(c["createVNode"])("li",null,[Object(c["createVNode"])("p",null,Object(c["toDisplayString"])(e.product.category)+" / "+Object(c["toDisplayString"])(e.product.title)+" * "+Object(c["toDisplayString"])(e.qty),1),Object(c["createVNode"])("p",null,"NT."+Object(c["toDisplayString"])(e.final_total),1)])])})),128))])]),Object(c["createVNode"])("li",null,[Object(c["createVNode"])("h3",null,[q,Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(o.tempOrder.message),1)])])])]),Object(c["createVNode"])("div",J,[Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"checkbox",class:"form-check-input",id:"paymentStatus","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.tempOrder.is_paid=e})},null,512),[[c["vModelCheckbox"],o.tempOrder.is_paid]]),U]),z,Object(c["createVNode"])("ul",null,[Object(c["createVNode"])("li",null,Object(c["toDisplayString"])(o.tempOrder.user.name)+" "+Object(c["toDisplayString"])("male"==o.tempOrder.user.gender?"先生":"女士"),1),Object(c["createVNode"])("li",null,"身分證字號："+Object(c["toDisplayString"])(o.tempOrder.user.idNum),1),Object(c["createVNode"])("li",null,"護照號碼："+Object(c["toDisplayString"])(o.tempOrder.user.passportNum),1),Object(c["createVNode"])("li",null,"聯繫電話："+Object(c["toDisplayString"])(o.tempOrder.user.tel),1),Object(c["createVNode"])("li",null,"聯繫信箱："+Object(c["toDisplayString"])(o.tempOrder.user.email),1),Object(c["createVNode"])("li",null,"住址："+Object(c["toDisplayString"])(o.tempOrder.user.address),1)])]),Object(c["createVNode"])("div",G,[Object(c["createVNode"])("button",{type:"button",class:"btn btn-primary w-25 d-flex justify-content-center align-items-center",ref:"orderAdminBtn",onClick:t[2]||(t[2]=function(t){return e.$emit("emit-order-modal",o.tempOrder)})},[H,Object(c["createVNode"])("p",K,Object(c["toDisplayString"])(a.modalTitle),1)],512),Q])])])])])],512)}var W={props:["modalTitle","temp"],data:function(){return{tempOrder:{create_at:"",id:"",is_paid:!1,message:"",num:0,products:{},total:0,user:{address:"",email:"",gender:"",idNum:"",name:"",passportNum:"",tel:""}}}},watch:{temp:function(){this.tempOrder=Object(w["a"])({},this.temp)}}};W.render=R;var X=W,Y=a("ec05"),Z={data:function(){return{orders:[],temp:{},pagination:{},orderModal:{},deleteModal:{},searchOrder:"",showAlert:!1,alertMsg:""}},components:{alert:D["a"],pagination:M["a"],orderEditModal:X,orderDeleteModal:Y["a"]},methods:{getData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/admin/orders/?page=").concat(t)).then((function(t){if(t.data.success){var a=t.data;e.orders=a.orders,e.orders.forEach((function(t,a){if("number"===typeof t.create_at){var c=new Date(1e3*t.create_at).toISOString().split("T")[0].replace(/-/g," / ");e.orders[a].create_at=c}})),e.pagination=t.data.pagination}else e.customAlert(t.data.message)})).catch((function(t){e.customAlert(t.response)}))},customAlert:function(e){this.alertMsg=e,this.showAlert=!0},closeCustomAlert:function(){this.showAlert=!1},openModal:function(e,t){switch(t){case"editOrder":this.modalTitle="完成編輯",this.temp=Object(w["a"])({},e),this.orderModal.show();break;case"deleteOrder":this.temp=Object(w["a"])({},e);break;default:break}},clearModal:function(){this.temp={}},editOrder:function(e){var t=this,a=this.$refs.orderModal.$refs.orderAdminBtn;a.classList.add("disabled"),a.children[0].classList.remove("d-none");var c={};c.data=Object(w["a"])({},e);var r=e.id;this.$http.put("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/admin/order/").concat(r),c).then((function(e){e.data.success?(t.orderModal.hide(),t.customAlert("編輯成功"),t.getData(),a.classList.remove("disabled"),a.children[0].classList.add("d-none"),window.setTimeout(t.closeCustomAlert,5e3)):(a.classList.remove("disabled"),a.children[0].classList.add("d-none"),t.customAlert(e.data.message))})).catch((function(e){a.classList.remove("disabled"),a.children[0].classList.add("d-none"),t.customAlert(e.response)}))},deleteOrder:function(){var e=this,t=this.temp.id;this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/admin/order/").concat(t)).then((function(t){t.data.success?(e.customAlert("刪除成功"),e.getData(),e.clearModal(),e.deleteModal.hide(),window.setTimeout(e.closeCustomAlert,5e3)):e.customAlert(t.data.message)})).catch((function(t){e.customAlert(t.response)}))},deleteAll:function(){var e=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/admin/orders/all")).then((function(t){t.data.success?(e.customAlert("刪除成功"),e.getData(),window.setTimeout(e.closeCustomAlert,5e3)):e.customAlert(t.data.message)})).catch((function(t){e.customAlert(t.response)}))}},computed:{filterOrder:function(){var e=this;return""!==this.searchOrder?this.orders.filter((function(t){return t.id.match(e.searchOrder)})):this.orders}},created:function(){this.getData()},mounted:function(){this.orderModal=new x["a"](document.getElementById("orderModal"),{keyboard:!1}),this.deleteModal=new x["a"](document.getElementById("deleteModal"),{keyboard:!1})}};Z.render=B;t["default"]=Z},"98ab":function(e,t,a){"use strict";var c=a("7a23"),r={class:"alert alert-primary alert-dismissible fade show",role:"alert"};function o(e,t,a,o,l,n){return Object(c["openBlock"])(),Object(c["createBlock"])("div",r,Object(c["toDisplayString"])(a.alertMsg),1)}var l={props:["alertMsg"]};l.render=o;t["a"]=l},ec05:function(e,t,a){"use strict";var c=a("7a23"),r={id:"deleteModal",ref:"deleteModal",class:"modal fade",tabindex:"-1","aria-labelledby":"deleteModalLabel","aria-hidden":"true"},o={class:"modal-dialog"},l={class:"modal-content delete-modal-bg"},n={class:"modal-body"},i=Object(c["createVNode"])("div",{class:"text-end"},[Object(c["createVNode"])("button",{type:"button",class:"bg-transparent border-0 p-2 text-secondary h3","data-bs-dismiss":"modal","aria-label":"Close"},[Object(c["createVNode"])("i",{class:"bi bi-x-lg"})])],-1),d={class:"delete-modal-inner-bg mb-4"},s={key:0,class:"text-center"},b={class:"h3 mb-2"},p=Object(c["createVNode"])("p",null,"一經刪除及無法復原，是否確認刪除？",-1),O={key:1,class:"text-center"},u={class:"h3 mb-2"},m=Object(c["createVNode"])("p",null,"一經刪除及無法復原，是否確認刪除？",-1),j={key:2,class:"text-center"},h={class:"h3 mb-2"},g=Object(c["createVNode"])("p",null,"一經刪除及無法復原，是否確認刪除？",-1),f={key:3,class:"text-center"},N={class:"h3 mb-2"},V=Object(c["createVNode"])("p",null,"一經刪除及無法復原，是否確認刪除？",-1),k={class:"d-flex justify-content-center"},y=Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-primary w-25 d-block ms-3","data-bs-dismiss":"modal"}," 取消 ",-1);function v(e,t,a,v,B,w){return Object(c["openBlock"])(),Object(c["createBlock"])("div",r,[Object(c["createVNode"])("div",o,[Object(c["createVNode"])("div",l,[Object(c["createVNode"])("div",n,[i,Object(c["createVNode"])("div",d,[B.tempItem.hasOwnProperty("is_mainProduct")?(Object(c["openBlock"])(),Object(c["createBlock"])("div",s,[Object(c["createVNode"])("p",b,Object(c["toDisplayString"])(B.tempItem.title),1),p])):B.tempItem.hasOwnProperty("code")?(Object(c["openBlock"])(),Object(c["createBlock"])("div",O,[Object(c["createVNode"])("p",u,"優惠券代碼："+Object(c["toDisplayString"])(B.tempItem.code),1),m])):B.tempItem.hasOwnProperty("user")?(Object(c["openBlock"])(),Object(c["createBlock"])("div",j,[Object(c["createVNode"])("p",h,"訂單編號："+Object(c["toDisplayString"])(B.tempItem.id),1),g])):B.tempItem.hasOwnProperty("author")?(Object(c["openBlock"])(),Object(c["createBlock"])("div",f,[Object(c["createVNode"])("p",N,Object(c["toDisplayString"])(B.tempItem.title),1),V])):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])("div",k,[Object(c["createVNode"])("button",{type:"button",class:"btn btn-primary w-25 d-block",onClick:t[1]||(t[1]=function(t){return e.$emit("emit-delete-modal")})}," 確認刪除 "),y])])])])],512)}var B=a("5530"),w={props:["temp"],data:function(){return{tempItem:Object(B["a"])({},this.temp)}},watch:{temp:function(){this.tempItem=Object(B["a"])({},this.temp)}},created:function(){this.tempItem=Object(B["a"])({},this.temp)}};w.render=v;t["a"]=w}}]);
//# sourceMappingURL=chunk-0e67eff1.c5bb8ea5.js.map