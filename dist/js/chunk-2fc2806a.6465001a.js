(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fc2806a"],{"0cb2":function(e,t,a){var r=a("7b0b"),c=Math.floor,o="".replace,l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,n=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,a,i,d,s){var u=a+e.length,b=i.length,p=n;return void 0!==d&&(d=r(d),p=l),o.call(s,p,(function(r,o){var l;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,a);case"'":return t.slice(u);case"<":l=d[o.slice(1,-1)];break;default:var n=+o;if(0===n)return r;if(n>b){var s=c(n/10);return 0===s?r:s<=b?void 0===i[s-1]?o.charAt(1):i[s-1]+o.charAt(1):r}l=i[n-1]}return void 0===l?"":l}))}},1276:function(e,t,a){"use strict";var r=a("d784"),c=a("44e7"),o=a("825a"),l=a("1d80"),n=a("4840"),i=a("8aa5"),d=a("50c4"),s=a("14c3"),u=a("9263"),b=a("9f7f"),p=b.UNSUPPORTED_Y,O=[].push,h=Math.min,m=4294967295;r("split",2,(function(e,t,a){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var r=String(l(this)),o=void 0===a?m:a>>>0;if(0===o)return[];if(void 0===e)return[r];if(!c(e))return t.call(r,e,o);var n,i,d,s=[],b=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,h=new RegExp(e.source,b+"g");while(n=u.call(h,r)){if(i=h.lastIndex,i>p&&(s.push(r.slice(p,n.index)),n.length>1&&n.index<r.length&&O.apply(s,n.slice(1)),d=n[0].length,p=i,s.length>=o))break;h.lastIndex===n.index&&h.lastIndex++}return p===r.length?!d&&h.test("")||s.push(""):s.push(r.slice(p)),s.length>o?s.slice(0,o):s}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:t.call(this,e,a)}:t,[function(t,a){var c=l(this),o=void 0==t?void 0:t[e];return void 0!==o?o.call(t,c,a):r.call(String(c),t,a)},function(e,c){var l=a(r,e,this,c,r!==t);if(l.done)return l.value;var u=o(e),b=String(this),O=n(u,RegExp),j=u.unicode,g=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(p?"g":"y"),f=new O(p?"^(?:"+u.source+")":u,g),v=void 0===c?m:c>>>0;if(0===v)return[];if(0===b.length)return null===s(f,b)?[b]:[];var N=0,V=0,y=[];while(V<b.length){f.lastIndex=p?0:V;var k,S=s(f,p?b.slice(V):b);if(null===S||(k=h(d(f.lastIndex+(p?V:0)),b.length))===N)V=i(b,V,j);else{if(y.push(b.slice(N,V)),y.length===v)return y;for(var x=1;x<=S.length-1;x++)if(y.push(S[x]),y.length===v)return y;V=N=k}}return y.push(b.slice(N)),y}]}),p)},"44e7":function(e,t,a){var r=a("861d"),c=a("c6b6"),o=a("b622"),l=o("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[l])?!!t:"RegExp"==c(e))}},5319:function(e,t,a){"use strict";var r=a("d784"),c=a("825a"),o=a("50c4"),l=a("a691"),n=a("1d80"),i=a("8aa5"),d=a("0cb2"),s=a("14c3"),u=Math.max,b=Math.min,p=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,a,r){var O=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,h=r.REPLACE_KEEPS_$0,m=O?"$":"$0";return[function(a,r){var c=n(this),o=void 0==a?void 0:a[e];return void 0!==o?o.call(a,c,r):t.call(String(c),a,r)},function(e,r){if(!O&&h||"string"===typeof r&&-1===r.indexOf(m)){var n=a(t,e,this,r);if(n.done)return n.value}var j=c(e),g=String(this),f="function"===typeof r;f||(r=String(r));var v=j.global;if(v){var N=j.unicode;j.lastIndex=0}var V=[];while(1){var y=s(j,g);if(null===y)break;if(V.push(y),!v)break;var k=String(y[0]);""===k&&(j.lastIndex=i(g,o(j.lastIndex),N))}for(var S="",x=0,D=0;D<V.length;D++){y=V[D];for(var w=String(y[0]),M=u(b(l(y.index),g.length),0),E=[],_=1;_<y.length;_++)E.push(p(y[_]));var B=y.groups;if(f){var C=[w].concat(E,M,g);void 0!==B&&C.push(B);var T=String(r.apply(void 0,C))}else T=d(w,g,M,E,B,r);M>=x&&(S+=g.slice(x,M)+T,x=M+w.length)}return S+g.slice(x)}]}))},"5b64":function(e,t,a){"use strict";a.r(t);a("ac1f"),a("5319");var r=a("7a23"),c={class:"bg-light-primary"},o={class:"container p-4"},l={class:"d-flex justify-content-between"},n=Object(r["createVNode"])("label",{for:"searchOrder",class:"search-icon"},[Object(r["createVNode"])("span",{class:"material-icons"}," search ")],-1),i={key:0,class:"ms-6 text-dark-primary"},d=Object(r["createVNode"])("p",null,"查找不到相關訂單",-1),s={class:"container py-4"},u={class:"table mb-6"},b=Object(r["createVNode"])("thead",null,[Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",{width:"150"},"建立日期"),Object(r["createVNode"])("th",null,"訂單編號"),Object(r["createVNode"])("th",{width:"120"},"金額"),Object(r["createVNode"])("th",{width:"120"},"付款狀態"),Object(r["createVNode"])("th",{width:"120"})])],-1),p={width:"150"},O={class:"pe-4"},h={width:"120"},m={width:"120"},j={width:"120"},g={class:"ms-2"},f=Object(r["createVNode"])("small",null,"訂單內容：",-1);function v(e,t,a,v,N,V){var y=Object(r["resolveComponent"])("order-edit-modal"),k=Object(r["resolveComponent"])("order-delete-modal"),S=Object(r["resolveComponent"])("pagination");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])("div",c,[Object(r["createVNode"])("div",o,[Object(r["createVNode"])("div",l,[Object(r["createVNode"])("div",null,[n,Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"search",id:"searchOrder",class:"search-bar",placeholder:"搜尋訂單編號","onUpdate:modelValue":t[1]||(t[1]=function(e){return N.searchOrder=e})},null,512),[[r["vModelText"],N.searchOrder]])]),Object(r["createVNode"])("button",{type:"button",class:"btn btn-outline-dark d-inline-flex me-2",onClick:t[2]||(t[2]=function(){return V.deleteAll&&V.deleteAll.apply(V,arguments)})}," 刪除所有訂單 ")]),0==V.filterOrder.length?(Object(r["openBlock"])(),Object(r["createBlock"])("small",i,[d])):Object(r["createCommentVNode"])("",!0)])]),Object(r["createVNode"])("div",s,[Object(r["createVNode"])("table",u,[b,Object(r["createVNode"])("tbody",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(V.filterOrder,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],{key:e.id},[Object(r["createVNode"])("tr",{"data-bs-toggle":"collapse",href:"#collapseOrder-"+t,"aria-expanded":"false","aria-controls":"collapseOrder-"+t,class:"light-primary-hover",title:"點擊看詳細內容"},[Object(r["createVNode"])("td",p,Object(r["toDisplayString"])(e.create_at),1),Object(r["createVNode"])("td",O,Object(r["toDisplayString"])(e.id),1),Object(r["createVNode"])("td",h,Object(r["toDisplayString"])(e.total),1),Object(r["createVNode"])("td",m,[Object(r["createVNode"])("span",{class:["material-icons",{"text-success":e.is_paid,"text-secondary":!e.is_paid}]},Object(r["toDisplayString"])(e.is_paid?"credit_score":"credit_card_off"),3)]),Object(r["createVNode"])("td",j,[Object(r["createVNode"])("a",null,[Object(r["createVNode"])("span",{class:"material-icons",onClick:function(t){return V.openModal(e,"editOrder")}}," mode_edit ",8,["onClick"])]),Object(r["createVNode"])("a",g,[Object(r["createVNode"])("span",{class:"material-icons",onClick:function(t){return V.openModal(e,"deleteOrder")},"data-bs-toggle":"modal","data-bs-target":"#deleteModal"}," delete ",8,["onClick"])])])],8,["href","aria-controls"]),Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("td",{colspan:"5",class:"collapse border-bottom-0",id:"collapseOrder-"+t},[f,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.products,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("ul",{key:"product-"+t},[Object(r["createVNode"])("li",null,[Object(r["createVNode"])("small",null,Object(r["toDisplayString"])(e.start_date.replace(/-/g," / "))+" "+Object(r["toDisplayString"])(e.product.title)+" * "+Object(r["toDisplayString"])(e.qty),1)])])})),128))],8,["id"])])],64)})),128))])]),Object(r["createVNode"])(y,{"modal-title":e.modalTitle,temp:N.temp,onEmitOrderModal:V.editOrder},null,8,["modal-title","temp","onEmitOrderModal"]),Object(r["createVNode"])(k,{temp:N.temp,onEmitDeleteModal:V.deleteOrder},null,8,["temp","onEmitDeleteModal"]),Object(r["createVNode"])(S,{page:N.pagination,onEmitPagination:V.getData},null,8,["page","onEmitPagination"])])],64)}var N=a("5530"),V=(a("99af"),a("159b"),a("1276"),a("4de4"),a("466d"),a("1799")),y=a("7b17"),k=(a("b0c0"),{id:"orderModal",ref:"orderModal",class:"modal fade",tabindex:"-1","aria-labelledby":"orderModalLabel","aria-hidden":"true"}),S={class:"modal-dialog modal-xl"},x={class:"modal-content product-modal-bg"},D={class:"modal-body"},w=Object(r["createVNode"])("button",{type:"button",class:"close-modal-btn close-modal-lg-btn bg-light-primary","data-bs-dismiss":"modal","aria-label":"Close"},[Object(r["createVNode"])("span",{class:"material-icons"}," clear ")],-1),M={class:"container-fluid"},E={class:"mb-4"},_=Object(r["createVNode"])("h2",null,"訂單內容",-1),B={class:"mb-2"},C=Object(r["createTextVNode"])(" 訂單編號： "),T=Object(r["createTextVNode"])(" 購買細項： "),$=Object(r["createTextVNode"])(" 客戶訂單備註： "),I={class:"form-check mb-2"},A=Object(r["createVNode"])("label",{class:"form-check-label",for:"paymentStatus"},"付款狀態",-1),P=Object(r["createVNode"])("h2",null,"客戶資料",-1),R={class:"d-flex justify-content-center"},U=Object(r["createVNode"])("button",{type:"button",class:"btn btn-outline-dark w-25 d-block ms-3","data-bs-dismiss":"modal"}," 取消 ",-1);function F(e,t,a,c,o,l){return Object(r["openBlock"])(),Object(r["createBlock"])("div",k,[Object(r["createVNode"])("div",S,[Object(r["createVNode"])("div",x,[Object(r["createVNode"])("div",D,[w,Object(r["createVNode"])("div",M,[Object(r["createVNode"])("div",E,[_,Object(r["createVNode"])("div",B,[Object(r["createVNode"])("ul",null,[Object(r["createVNode"])("li",null,[Object(r["createVNode"])("h3",null,[C,Object(r["createVNode"])("span",null,Object(r["toDisplayString"])(o.tempOrder.id),1)])]),Object(r["createVNode"])("li",null,[Object(r["createVNode"])("h3",null,[T,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(o.tempOrder.products,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("ul",{key:t},[Object(r["createVNode"])("li",null,[Object(r["createVNode"])("p",null,Object(r["toDisplayString"])(e.product.category)+" / "+Object(r["toDisplayString"])(e.product.title)+" * "+Object(r["toDisplayString"])(e.qty),1),Object(r["createVNode"])("p",null,"NT."+Object(r["toDisplayString"])(e.final_total),1)])])})),128))])]),Object(r["createVNode"])("li",null,[Object(r["createVNode"])("h3",null,[$,Object(r["createVNode"])("span",null,Object(r["toDisplayString"])(o.tempOrder.message),1)])])])]),Object(r["createVNode"])("div",I,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"checkbox",class:"form-check-input",id:"paymentStatus","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.tempOrder.is_paid=e})},null,512),[[r["vModelCheckbox"],o.tempOrder.is_paid]]),A]),P,Object(r["createVNode"])("ul",null,[Object(r["createVNode"])("li",null,Object(r["toDisplayString"])(o.tempOrder.user.name)+" "+Object(r["toDisplayString"])("male"==o.tempOrder.user.gender?"先生":"女士"),1),Object(r["createVNode"])("li",null,"身分證字號："+Object(r["toDisplayString"])(o.tempOrder.user.idNum),1),Object(r["createVNode"])("li",null,"護照號碼："+Object(r["toDisplayString"])(o.tempOrder.user.passportNum),1),Object(r["createVNode"])("li",null,"聯繫電話："+Object(r["toDisplayString"])(o.tempOrder.user.tel),1),Object(r["createVNode"])("li",null,"聯繫信箱："+Object(r["toDisplayString"])(o.tempOrder.user.email),1),Object(r["createVNode"])("li",null,"住址："+Object(r["toDisplayString"])(o.tempOrder.user.address),1)])]),Object(r["createVNode"])("div",R,[Object(r["createVNode"])("button",{type:"button",class:"btn btn-primary w-25 d-block",onClick:t[2]||(t[2]=function(t){return e.$emit("emit-order-modal",o.tempOrder)})},Object(r["toDisplayString"])(a.modalTitle),1),U])])])])])],512)}var L={props:["modalTitle","temp"],data:function(){return{tempOrder:{create_at:"",id:"",is_paid:!1,message:"",num:0,products:{},total:0,user:{address:"",email:"",gender:"",idNum:"",name:"",passportNum:"",tel:""}}}},watch:{temp:function(){this.tempOrder=Object(N["a"])({},this.temp)}}};L.render=F;var q=L,J=a("ec05"),G={data:function(){return{orders:[],temp:{},pagination:{},orderModal:{},deleteModal:{},searchOrder:""}},components:{pagination:V["a"],orderEditModal:q,orderDeleteModal:J["a"]},methods:{getData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/admin/orders/?page=").concat(t)).then((function(t){if(t.data.success){var a=t.data;e.orders=a.orders,e.orders.forEach((function(t,a){var r=new Date(1e3*t.create_at).toISOString().split("T")[0].replace(/-/g," / ");e.orders[a].create_at=r})),e.pagination=t.data.pagination}else console.log(t.data.message)})).catch((function(e){console.log(e.response)}))},openModal:function(e,t){switch(t){case"editOrder":this.modalTitle="完成編輯",this.temp=Object(N["a"])({},e),this.orderModal.show();break;case"deleteOrder":this.temp=Object(N["a"])({},e);break;default:break}},clearModal:function(){this.temp={}},editOrder:function(e){var t=this,a={};a.data=Object(N["a"])({},e);var r=e.id;this.$http.put("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/admin/order/").concat(r),a).then((function(e){alert("編輯成功"),e.data.success?(t.getData(),t.orderModal.hide()):alert(e.data.message)})).catch((function(e){console.log(e.response)}))},deleteOrder:function(){var e=this,t=this.temp.id;this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/admin/order/").concat(t)).then((function(t){t.data.success?(alert("刪除成功"),e.getData(),e.clearModal(),e.deleteModal.hide()):alert(t.data.message)})).catch((function(e){console.log(e.response)}))},deleteAll:function(){var e=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("fm0fm0","/admin/orders/all")).then((function(t){t.data.success?(alert("刪除成功"),e.getData()):console.log(t.data.message)})).catch((function(e){console.log(e.response)}))}},computed:{filterOrder:function(){var e=this;return""!==this.searchOrder?this.orders.filter((function(t){return t.id.match(e.searchOrder)})):this.orders}},created:function(){this.getData()},mounted:function(){this.orderModal=new y["a"](document.getElementById("orderModal"),{keyboard:!1}),this.deleteModal=new y["a"](document.getElementById("deleteModal"),{keyboard:!1})}};G.render=v;t["default"]=G},b0c0:function(e,t,a){var r=a("83ab"),c=a("9bf2").f,o=Function.prototype,l=o.toString,n=/^\s*function ([^ (]*)/,i="name";r&&!(i in o)&&c(o,i,{configurable:!0,get:function(){try{return l.call(this).match(n)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-2fc2806a.6465001a.js.map