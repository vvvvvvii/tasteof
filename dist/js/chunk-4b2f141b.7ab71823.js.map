{"version":3,"sources":["webpack:///./src/views/backend/Admin.vue","webpack:///./src/views/backend/Admin.vue?735e","webpack:///./src/components/backend/Alert.vue","webpack:///./src/components/backend/Alert.vue?e94c"],"names":["class","id","ref","tabindex","aria-labelledby","aria-hidden","type","data-bs-dismiss","aria-label","role","href","to","aria-current","active-class","openModal","accountBsModal","accountData","hexLoginName","hexTokenStart","hexTokenExpired","logout","checkSuccess","showAlert","alert-msg","alertMsg","data","hexToken","components","Alert","methods","checkLogin","token","document","cookie","replace","loginName","tokenStart","tokenExpired","this","$http","defaults","headers","common","Authorization","api_token","post","then","res","success","customAlert","$router","push","msg","window","setTimeout","closeCustomAlert","target","show","logoutBtn","$refs","classList","add","children","remove","Object","keys","forEach","item","hide","mounted","accountModal","render","props"],"mappings":"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","file":"js/chunk-4b2f141b.7ab71823.js","sourcesContent":["<template>\n  <!--top navbar-->\n  <nav class=\"navbar navbar-expand-lg navbar-dark bg-primary\">\n    <div class=\"container align-items-center\">\n      <h1>\n        <router-link href=\"#\" to=\"/\" class=\"logo\">\n          旅味\n        </router-link>\n      </h1>\n      <div\n        class=\"collapse navbar-collapse justify-content-between ms-3\"\n        id=\"navbarSupportedContent\"\n      >\n        <ul class=\"navbar-nav\">\n          <li class=\"nav-item\">\n            <router-link\n              to=\"/admin/product\"\n              class=\"nav-link\"\n              aria-current=\"true\"\n              active-class=\"active\"\n            >\n              管理產品\n            </router-link>\n          </li>\n          <li class=\"nav-item\">\n            <router-link to=\"/admin/order\" class=\"nav-link\" active-class=\"active\">\n              管理訂單\n            </router-link>\n          </li>\n          <li class=\"nav-item\">\n            <router-link to=\"/admin/coupon\" class=\"nav-link\" active-class=\"active\">\n              管理優惠券\n            </router-link>\n          </li>\n          <li class=\"nav-item\">\n            <router-link to=\"/admin/article\" class=\"nav-link\" active-class=\"active\">\n              管理文章\n            </router-link>\n          </li>\n        </ul>\n        <ul class=\"navbar-nav h3\">\n          <li class=\"nav-item\">\n            <a class=\"nav-link px-3\" @click=\"openModal(this.accountBsModal)\">\n              <i class=\"bi bi-person-circle\"></i>\n            </a>\n          </li>\n          <li class=\"nav-item\">\n            <a class=\"nav-link px-3\">\n              <i class=\"bi bi-gear-fill\"></i>\n            </a>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </nav>\n  <!-- account modal -->\n  <div\n    class=\"modal fade\"\n    ref=\"accountModal\"\n    tabindex=\"-1\"\n    aria-labelledby=\"accountModalLabel\"\n    aria-hidden=\"true\"\n  >\n    <div class=\"modal-dialog modal-dialog-centered modal-sm\">\n      <div class=\"modal-content bg-secondary\">\n        <div class=\"modal-body px-3\">\n          <div class=\"container-fluid\">\n            <div class=\"text-end\">\n              <button\n                type=\"button\"\n                class=\"bg-transparent border-0 p-2 text-white h3\"\n                data-bs-dismiss=\"modal\"\n                aria-label=\"Close\"\n              >\n                <i class=\"bi bi-x-lg\"></i>\n              </button>\n            </div>\n            <div class=\"row justify-content-center\">\n              <div class=\"text-center text-white\">\n                <i class=\"bi bi-person-circle h1 mb-2\"></i>\n                <h2 class=\"mb-6\">{{ accountData.hexLoginName }}</h2>\n                <ul class=\"text-start d-inline-block\">\n                  <li class=\"mb-2\">\n                    登入時間：<br />\n                    {{ accountData.hexTokenStart }}\n                  </li>\n                  <li class=\"mb-6\">\n                    有效期限：<br />\n                    {{ accountData.hexTokenExpired }}\n                  </li>\n                </ul>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-primary w-50 mx-auto\n                    d-flex justify-content-center align-items-center\"\n                  ref=\"logoutBtn\"\n                  @click=\"logout\"\n                >\n                  <div class=\"spinner-border spinner-border-sm text-dark d-none\" role=\"status\">\n                    <span class=\"visually-hidden\">Loading...</span>\n                  </div>\n                  <p class=\"ms-1\">登出</p>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- 主要內容 -->\n  <router-view v-if=\"checkSuccess\"></router-view>\n  <!--alert-->\n  <Alert v-if=\"showAlert\" :alert-msg=\"alertMsg\"></Alert>\n</template>\n<script>\nimport Alert from '@/components/backend/Alert.vue';\nimport { Modal } from 'bootstrap';\n\nexport default {\n  data() {\n    return {\n      checkSuccess: false,\n      accountBsModal: '',\n      accountData: {\n        hexLoginName: '',\n        hexToken: '',\n        hexTokenStart: '',\n        hexTokenExpired: '',\n      },\n      showAlert: false,\n      alertMsg: '',\n    };\n  },\n  components: {\n    Alert,\n  },\n  methods: {\n    checkLogin() {\n      const token = document.cookie.replace(/(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\n      const loginName = document.cookie.replace(\n        /(?:(?:^|.*;\\s*)hexLoginName\\s*=\\s*([^;]*).*$)|^.*$/,\n        '$1',\n      );\n      const tokenStart = document.cookie.replace(\n        /(?:(?:^|.*;\\s*)hexTokenStart\\s*=\\s*([^;]*).*$)|^.*$/,\n        '$1',\n      );\n      const tokenExpired = document.cookie.replace(\n        /(?:(?:^|.*;\\s*)hexTokenExpired\\s*=\\s*([^;]*).*$)|^.*$/,\n        '$1',\n      );\n      this.accountData.hexLoginName = loginName;\n      this.accountData.hexToken = token;\n      this.accountData.hexTokenStart = tokenStart;\n      this.accountData.hexTokenExpired = tokenExpired;\n      if (token) {\n        this.$http.defaults.headers.common.Authorization = `${token}`;\n        const data = { api_token: this.token };\n        this.$http.post(`${process.env.VUE_APP_API}/api/user/check`, data).then((res) => {\n          if (res.data.success) {\n            this.checkSuccess = true;\n          } else {\n            this.customAlert('您尚未登入');\n            this.$router.push('/login');\n          }\n        });\n      } else {\n        this.customAlert('您尚未登入');\n        this.$router.push('/login');\n      }\n    },\n    customAlert(msg) {\n      this.alertMsg = msg;\n      this.showAlert = true; // 秀出 alert\n      window.setTimeout(this.closeCustomAlert, 5000);\n    },\n    closeCustomAlert() {\n      this.showAlert = false;\n    },\n    openModal(target) {\n      target.show();\n    },\n    logout() {\n      const { logoutBtn } = this.$refs;\n      logoutBtn.classList.add('disabled');\n      logoutBtn.children[0].classList.remove('d-none');\n      Object.keys(this.accountData).forEach((item) => {\n        document.cookie = `${item}=${this.accountData.item};expires=Thu, 01-Jan-70 00:00:01 GMT;path=/`;\n      });\n      logoutBtn.classList.remove('disabled');\n      logoutBtn.children[0].classList.add('d-none');\n      this.customAlert('已成功登出');\n      this.accountBsModal.hide();\n      this.$router.push('/'); // 自動跳轉畫面\n    },\n  },\n  mounted() {\n    this.accountBsModal = new Modal(this.$refs.accountModal);\n    this.checkLogin();\n  },\n};\n</script>\n","import { render } from \"./Admin.vue?vue&type=template&id=241da250\"\nimport script from \"./Admin.vue?vue&type=script&lang=js\"\nexport * from \"./Admin.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"alert alert-primary fade show\" role=\"alert\">\n    <i class=\"bi bi-exclamation-triangle-fill me-2 text-primary\"></i>{{ alertMsg }}\n  </div>\n</template>\n<script>\nexport default {\n  props: ['alertMsg'],\n};\n</script>\n","import { render } from \"./Alert.vue?vue&type=template&id=5a00ffbc\"\nimport script from \"./Alert.vue?vue&type=script&lang=js\"\nexport * from \"./Alert.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}