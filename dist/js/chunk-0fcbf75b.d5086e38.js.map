{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.object.values.js","webpack:///./src/views/frontend/Cart.vue","webpack:///./src/components/frontend/CheckCart.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///./src/components/frontend/CheckCart.vue?8d62","webpack:///./src/components/frontend/ConfirmCart.vue","webpack:///./src/components/frontend/ConfirmCart.vue?d8dd","webpack:///./src/components/frontend/FinishCart.vue","webpack:///./src/components/frontend/FinishCart.vue?f26f","webpack:///./src/views/frontend/Cart.vue?6c07","webpack:///./src/components/backend/Alert.vue","webpack:///./src/components/backend/Alert.vue?e94c","webpack:///./node_modules/flush-promises/index.js","webpack:///./node_modules/mitt/dist/mitt.mjs","webpack:///./src/assets/js/emitter.js"],"names":["$","$values","values","target","stat","O","class","checkCartPageShow","confirmCartPageShow","finishCartPageShow","ref","customer","customerDetail","other-info","otherDetail","cart-info","cart","changeTktNum","deleteProduct","deleteAllProducts","saveCustomerDetail","payment","paymentDetail","checkCoupon","backToFirstPage","addOrder","order-detail","orderDetail","showAlert","alert-msg","alertMsg","role","aria-label","disabled","value","selected","id","aria-labelledby","for","carts","item","itemKey","options","option","key","start_date","src","product","imageUrl","alt","title","optionName","addComma","users","user","userIndex","name","type","autocomplete","qtyDetail","$emit","adult","lowestPriceUnit","child","scrollBtnShow","toNextPage","errors","rules","gender","as","isIdNum","idNum","passportNum","tel","placeholder","email","address","detail","transfer","time","pickUpTime","pickUpPlace","rows","schedule","childRestrict","includeChild","childBd","childHeight","childWeight","translate","eng","jpy","translateLanguage","message","pageWarningShow","data-bs-toggle","data-bs-target","aria-controls","aria-selected","data-bs-placement","deletePax","length","totalProductsMaxPaxQty","addPax","noteWarningShow","Math","floor","final_total","validationCheck","Object","keys","total","to","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","props","emits","data","addPaxTooltip","deletePaxTooltip","productMaxPaxQty","productWarningShow","components","Alert","methods","customAlert","msg","closeCustomAlert","test","num","splice","i","forEach","productKey","qty","includes","window","setTimeout","errorArr","document","querySelectorAll","errorIdArr","errorPageArr","push","split","map","Set","watch","cartInfo","handler","totalOptionNum","flat","otherDetailOptionName","otherDetailStartDate","qtyArr","reduce","x","y","sort","difference","deep","computed","price","parts","toString","replace","join","created","otherInfo","mounted","listener","btn","$refs","scrollBtn","scrollTop","scrollHeight","addEventListener","render","tabindex","aria-hidden","openModal","temp","method","taxIdNum","coupon","remarkModal","show","getElementById","keyboard","orderId","randomProducts","lowestPrice","totalProducts","alert","getTotalProducts","$http","get","res","success","products","index","packageOptionsPrice","packageOptions","unit","getRandomProducts","catch","response","arrSet","maxSize","size","random","add","CheckCart","ConfirmCart","FinishCart","getCartInfo","status","couponCheck","every","e","find","code","percent","children","classList","remove","tktType","calcType","adultStatus","checkCart","childStatus","dataOuter","product_id","put","deleteCartProduct","cartIds","repeatIndex","indexOf","adultArr","childArr","delete","emitter","emit","deleteOrderBtn","backToHomePage","remark","checkCouponBtn","confirmCart","CouponData","post","addOrderBtn","payment_method","scheduler","setImmediate","flushPromises","module","exports","all","n","Map","on","t","set","off","slice","mitt"],"mappings":"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","file":"js/chunk-0fcbf75b.d5086e38.js","sourcesContent":["var $ = require('../internals/export');\nvar $values = require('../internals/object-to-array').values;\n\n// `Object.values` method\n// https://tc39.es/ecma262/#sec-object.values\n$({ target: 'Object', stat: true }, {\n  values: function values(O) {\n    return $values(O);\n  }\n});\n","<template>\n  <div class=\"pt-7 flex-fill\">\n    <div class=\"pt-5\">\n      <ul class=\"step-list d-flex justify-content-center\">\n        <li class=\"step-item\" :class=\"{ 'bg-warning': checkCartPageShow }\">\n          <div class=\"step-icon\">\n            <i class=\"bi bi-flag-fill d-block\" v-if=\"checkCartPageShow\"></i>\n          </div>\n          <p class=\"step-text h3-md h4 text-center\" :class=\"{ 'text-dark': checkCartPageShow }\">\n            查看\n          </p>\n        </li>\n        <li class=\"step-item ms-md-5 ms-3\" :class=\"{ 'bg-danger': confirmCartPageShow }\">\n          <div class=\"step-icon\">\n            <i class=\"bi bi-flag-fill d-block\" v-if=\"confirmCartPageShow\"></i>\n          </div>\n          <p class=\"step-text h3-md h4 text-center\" :class=\"{ 'text-dark': confirmCartPageShow }\">\n            確認\n          </p>\n        </li>\n        <li class=\"step-item ms-md-5 ms-3\" :class=\"{ 'bg-success': finishCartPageShow }\">\n          <div class=\"step-icon\">\n            <i class=\"bi bi-flag-fill d-block\" v-if=\"finishCartPageShow\"></i>\n          </div>\n          <p class=\"step-text h3-md h4 text-center\" :class=\"{ 'text-dark': finishCartPageShow }\">\n            完成\n          </p>\n        </li>\n      </ul>\n      <CheckCart\n        v-if=\"checkCartPageShow\"\n        ref=\"checkCart\"\n        :customer=\"customerDetail\"\n        :other-info=\"otherDetail\"\n        :cart-info=\"cart\"\n        @emit-change-tkt-num=\"changeTktNum\"\n        @emit-delete-product=\"deleteProduct\"\n        @emit-delete-all-products=\"deleteAllProducts\"\n        @emit-next-page=\"saveCustomerDetail\"\n      ></CheckCart>\n      <ConfirmCart\n        v-if=\"confirmCartPageShow\"\n        ref=\"confirmCart\"\n        :customer=\"customerDetail\"\n        :cart-info=\"cart\"\n        :other-info=\"otherDetail\"\n        :payment=\"paymentDetail\"\n        @emit-check-coupon=\"checkCoupon\"\n        @emit-pre-page=\"backToFirstPage\"\n        @emit-add-order=\"addOrder\"\n      ></ConfirmCart>\n      <FinishCart v-if=\"finishCartPageShow\" :order-detail=\"orderDetail\"></FinishCart>\n    </div>\n  </div>\n  <!--alert-->\n  <Alert v-if=\"showAlert\" :alert-msg=\"alertMsg\"></Alert>\n</template>\n<script>\nimport Alert from '@/components/backend/Alert.vue';\nimport CheckCart from '@/components/frontend/CheckCart.vue';\nimport ConfirmCart from '@/components/frontend/ConfirmCart.vue';\nimport FinishCart from '@/components/frontend/FinishCart.vue';\nimport emitter from '../../assets/js/emitter';\n\nexport default {\n  data() {\n    return {\n      customerDetail: {\n        users: [{}],\n        message: '無備註事項',\n      },\n      cart: {},\n      paymentDetail: {\n        method: '',\n        taxIdNum: '',\n        coupon: '',\n      },\n      otherDetail: [],\n      orderDetail: {\n        total: 0,\n        orderId: '',\n      },\n      showAlert: false,\n      alertMsg: '',\n      checkCartPageShow: true,\n      confirmCartPageShow: false,\n      finishCartPageShow: false,\n    };\n  },\n  components: {\n    Alert,\n    CheckCart,\n    ConfirmCart,\n    FinishCart,\n  },\n  methods: {\n    getCartInfo(status) {\n      this.$http\n        .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`)\n        .then((res) => {\n          if (res.data.success) {\n            this.cart = res.data.data;\n            const couponCheck = [];\n            this.cart.carts.forEach((product, key) => {\n              if (Object.keys(product).includes('coupon')) {\n                // 有加入優惠券時，會以商品為一項（即使很多方案），顯示 true\n                couponCheck.push(true); // 如果購物車裡曾有任何一個商品加過優惠碼，顯示 true\n              } else {\n                couponCheck.push(false);\n              }\n              // 在每個商品新增對應客人陣列\n              this.cart.carts[key].users = [];\n            });\n            if (couponCheck.every((e) => e === false)) {\n              // 加商品，尚未加優惠碼\n              // couponCheck 每個都是 false ，計算購物車正確價錢\n              this.cart.total = 0; // 整個購物車的總數歸零\n              this.cart.carts.forEach((product, key) => {\n                this.cart.carts[key].total = 0; // 各項商品的總數也歸零\n                product.options.forEach((option) => {\n                  this.cart.carts[key].total += option.total; // 各項商品真正的價格為各項方案價格相加\n                  this.cart.total += option.total; // 整個購物車真正的價格為各項產品的各方案價格相加\n                });\n                // 各項商品的 final_total 等於 total、整個購物車的 final_total 等於 total\n                this.cart.carts[key].final_total = this.cart.carts[key].total;\n                this.cart.final_total = this.cart.total;\n              });\n            } else if (couponCheck.every((e) => e === true)) {\n              // 加商品，已經加優惠碼\n              // couponCheck 每個都是 true ，計算購物車正確價錢、該價錢乘以 coupon.percent / 100 等於優惠後的價錢\n              const { coupon } = this.cart.carts.find((product) => product.coupon); // 找到已被加過的優惠碼物件\n              this.paymentDetail.coupon = coupon.code;\n              this.cart.total = 0; // 整個購物車的總數歸零\n              this.cart.final_total = 0; // 整個購物車 final_total 歸零\n              this.cart.carts.forEach((product, key) => {\n                this.cart.carts[key].total = 0; // 各項商品的總數也歸零\n                product.options.forEach((option) => {\n                  this.cart.carts[key].total += option.total; // 各項商品真正的價格為各項方案價格相加\n                  this.cart.total += option.total; // 整個購物車真正的價格為各項產品的各方案價格相加\n                });\n                // 各項商品的 final_total 等於 total 乘以優惠幅度、整個購物車的 final_total 等於 total 乘以優惠幅度後相加\n                this.cart.carts[key].final_total = (product.total * product.coupon.percent) / 100;\n                this.cart.final_total += this.cart.carts[key].final_total;\n              });\n              this.cart.final_total = Math.floor(this.cart.final_total); // 去掉小數點\n            } else {\n              // 加商品，已經加優惠碼，又再加新商品（新商品會沒有加到優惠）\n              // couponCheck 有 true 也有 false ，找到有加過優惠的那個 coupon 物件，把每個產品都加上該物件，計算購物車正確價錢\n              const { coupon } = this.cart.carts.find((product) => product.coupon); // 找到已被加過的優惠碼物件\n              this.paymentDetail.coupon = coupon.code;\n              this.cart.total = 0; // 整個購物車的總數歸零\n              this.cart.final_total = 0; // 整個購物車 final_total 歸零\n              this.cart.carts.forEach((product, key) => {\n                this.cart.carts[key].coupon = coupon; // 每個產品都加上該優惠碼物件\n                this.cart.carts[key].total = 0; // 各項商品的總數也歸零\n                product.options.forEach((option) => {\n                  this.cart.carts[key].total += option.total; // 各項商品真正的價格為各項方案價格相加\n                  this.cart.total += option.total; // 整個購物車真正的價格為各項產品的各方案價格相加\n                });\n                // 各項商品的 final_total 等於 total 乘以優惠幅度、整個購物車的 final_total 等於 total 乘以優惠幅度後相加\n                this.cart.carts[key].final_total = (product.total * product.coupon.percent) / 100;\n                this.cart.final_total += this.cart.carts[key].final_total;\n              });\n              this.cart.final_total = Math.floor(this.cart.final_total); // 去掉小數點\n            }\n            if (status) {\n              // 若有傳入參數才進行這塊\n              status.children[0].classList.add('d-none');\n              status.children[1].classList.remove('d-none');\n            }\n          } else {\n            this.customAlert(res.data.message);\n            window.setTimeout(this.closeCustomAlert, 5000);\n            if (status) {\n              // 若有傳入參數才進行這塊\n              status.children[0].classList.add('d-none');\n              status.children[1].classList.remove('d-none');\n            }\n          }\n        })\n        .catch((err) => {\n          this.customAlert(err.response);\n          window.setTimeout(this.closeCustomAlert, 5000);\n          if (status) {\n            // 若有傳入參數才進行這塊\n            status.children[0].classList.add('d-none');\n            status.children[1].classList.remove('d-none');\n          }\n        });\n    },\n    customAlert(msg) {\n      this.alertMsg = msg;\n      this.showAlert = true; // 秀出 alert\n    },\n    closeCustomAlert() {\n      this.showAlert = false;\n    },\n    changeTktNum(tktType, calcType, option, key, id) {\n      const adultStatus = this.$refs.checkCart.$refs[\n        `adultStatus${option.optionName}-${option.start_date}`\n      ];\n      const childStatus = this.$refs.checkCart.$refs[\n        `childStatus${option.optionName}-${option.start_date}`\n      ];\n      const qtyDetail = { ...option.qtyDetail };\n      if (tktType === 'adult') {\n        adultStatus.children[0].classList.remove('d-none');\n        adultStatus.children[1].classList.add('d-none');\n        if (calcType === 'plus') {\n          qtyDetail.adult += 1;\n        } else if (calcType === 'minus' && qtyDetail.adult >= 2) {\n          qtyDetail.adult -= 1;\n        }\n      } else {\n        childStatus.children[0].classList.remove('d-none');\n        childStatus.children[1].classList.add('d-none');\n        if (calcType === 'plus') {\n          qtyDetail.child += 1;\n        } else if (calcType === 'minus' && qtyDetail.child >= 1) {\n          qtyDetail.child -= 1;\n        }\n      }\n      let options = [];\n      this.cart.carts.forEach((item) => {\n        if (item.id === id) {\n          options = [...item.options];\n        }\n      });\n      const dataOuter = {\n        data: {\n          product_id: id,\n          qty: qtyDetail.adult + qtyDetail.child,\n          options,\n        },\n      };\n      dataOuter.data.options[key].qtyDetail = qtyDetail;\n      this.$http\n        .put(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`, dataOuter)\n        .then((res) => {\n          if (res.data.success) {\n            if (tktType === 'adult') {\n              this.getCartInfo(adultStatus);\n            } else {\n              this.getCartInfo(childStatus);\n            }\n          } else {\n            this.customAlert(res.data.message);\n            window.setTimeout(this.closeCustomAlert, 5000);\n            if (tktType === 'adult') {\n              adultStatus.children[0].classList.add('d-none');\n              adultStatus.children[1].classList.remove('d-none');\n            } else {\n              childStatus.children[0].classList.add('d-none');\n              childStatus.children[1].classList.remove('d-none');\n            }\n          }\n        })\n        .catch((err) => {\n          this.customAlert(err.response);\n          window.setTimeout(this.closeCustomAlert, 5000);\n          if (tktType === 'adult') {\n            adultStatus.children[0].classList.add('d-none');\n            adultStatus.children[1].classList.remove('d-none');\n          } else {\n            childStatus.children[0].classList.add('d-none');\n            childStatus.children[1].classList.remove('d-none');\n          }\n        });\n    },\n    deleteProduct(option, key, id) {\n      // 刪除相對應的方案 其他不動 > 用修改購物車的 api 去把該方案數字歸零並刪除\n      const deleteCartProduct = this.$refs.checkCart.$refs[`deleteCartProduct${option.optionName}`];\n      // 取得該筆 id 的所有資料\n      const cartIds = this.cart.carts.map((product) => product.id);\n      const repeatIndex = cartIds.indexOf(id);\n      // 將該筆資料裡的 options 取出來 刪掉 key 那個號碼的資料\n      this.cart.carts[repeatIndex].options.splice(key, 1);\n      if (this.cart.carts[repeatIndex].options.length !== 0) {\n        // 如果該產品還有其他方案 那用修改購物車 api 方式上傳\n        const dataOuter = {\n          data: { ...this.cart.carts[repeatIndex] },\n        };\n        const adultArr = dataOuter.data.options.map((item) => item.qtyDetail.adult);\n        const childArr = dataOuter.data.options.map((item) => item.qtyDetail.child);\n        dataOuter.data.qty = adultArr.reduce((x, y) => x + y) + childArr.reduce((x, y) => x + y);\n        this.$http\n          .put(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`, dataOuter)\n          .then((res) => {\n            if (res.data.success && res.data.message !== '更新購物車有誤') {\n              this.customAlert('已清除商品');\n              window.setTimeout(this.closeCustomAlert, 5000);\n              this.getCartInfo();\n            } else {\n              this.customAlert(res.data.message);\n              window.setTimeout(this.closeCustomAlert, 5000);\n            }\n          })\n          .catch((err) => {\n            this.customAlert(err.response);\n            window.setTimeout(this.closeCustomAlert, 5000);\n          });\n      } else {\n        // 如果該產品已經沒有任何方案 那整個用 delete api 刪掉\n        this.$http\n          .delete(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`)\n          .then((res) => {\n            if (res.data.success) {\n              deleteCartProduct.children[0].classList.remove('d-none');\n              deleteCartProduct.children[1].classList.add('d-none');\n              this.customAlert('已清除商品');\n              this.getCartInfo();\n              window.setTimeout(this.closeCustomAlert, 5000);\n              emitter.emit('update-cart'); // navbar 即時更新\n            } else {\n              this.customAlert(res.data.message);\n              window.setTimeout(this.closeCustomAlert, 5000);\n              emitter.emit('update-cart'); // navbar 即時更新\n            }\n          })\n          .catch((err) => {\n            this.customAlert(err.response);\n            window.setTimeout(this.closeCustomAlert, 5000);\n          });\n      }\n    },\n    deleteAllProducts() {\n      const { deleteOrderBtn } = this.$refs.checkCart.$refs;\n      deleteOrderBtn.classList.add('disabled');\n      deleteOrderBtn.children[0].classList.remove('d-none');\n      this.$http\n        .delete(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`)\n        .then((res) => {\n          if (res.data.success) {\n            this.customAlert('已清除購物車');\n            this.getCartInfo();\n            deleteOrderBtn.classList.remove('disabled');\n            deleteOrderBtn.children[0].classList.add('d-none');\n            window.setTimeout(this.closeCustomAlert, 3500);\n            window.setTimeout(this.backToHomePage, 4000);\n            emitter.emit('update-cart');\n          } else {\n            this.customAlert(res.data.message);\n            window.setTimeout(this.closeCustomAlert, 5000);\n            deleteOrderBtn.classList.remove('disabled');\n            deleteOrderBtn.children[0].classList.add('d-none');\n            emitter.emit('update-cart');\n          }\n        })\n        .catch((err) => {\n          this.customAlert(err.response);\n          window.setTimeout(this.closeCustomAlert, 5000);\n          deleteOrderBtn.classList.remove('disabled');\n          deleteOrderBtn.children[0].classList.add('d-none');\n        });\n    },\n    saveCustomerDetail(info, remark) {\n      this.customerDetail = info;\n      this.otherDetail = remark;\n      this.checkCartPageShow = false; // 關掉第一頁\n      this.confirmCartPageShow = true; // 換成第二頁\n    },\n    backToFirstPage() {\n      this.checkCartPageShow = true;\n      this.confirmCartPageShow = false;\n    },\n    checkCoupon(item) {\n      const { checkCouponBtn } = this.$refs.confirmCart.$refs;\n      checkCouponBtn.classList.add('disabled');\n      checkCouponBtn.children[0].classList.remove('d-none');\n      const CouponData = {\n        data: {\n          code: item,\n        },\n      };\n      this.$http\n        .post(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/coupon`, CouponData)\n        .then((res) => {\n          if (res.data.success) {\n            const { data } = res;\n            this.customAlert(data.message);\n            window.setTimeout(this.closeCustomAlert, 5000);\n            this.getCartInfo();\n            checkCouponBtn.classList.remove('disabled');\n            checkCouponBtn.children[0].classList.add('d-none');\n          } else {\n            this.customAlert(res.data.message);\n            window.setTimeout(this.closeCustomAlert, 5000);\n            checkCouponBtn.classList.remove('disabled');\n            checkCouponBtn.children[0].classList.add('d-none');\n          }\n        })\n        .catch((err) => {\n          this.customAlert(err.response);\n          window.setTimeout(this.closeCustomAlert, 5000);\n          checkCouponBtn.classList.remove('disabled');\n          checkCouponBtn.children[0].classList.add('d-none');\n        });\n    },\n    addOrder(info) {\n      this.paymentDetail = info;\n      const { addOrderBtn } = this.$refs.confirmCart.$refs;\n      addOrderBtn.classList.add('disabled');\n      addOrderBtn.children[0].classList.remove('d-none');\n      const data = {\n        data: {\n          user: {\n            ...this.customerDetail.users[0],\n            paymentDetail: {\n              total: this.cart.total,\n              final_total: this.cart.final_total,\n              payment_method: this.paymentDetail.method,\n              taxIdNum: this.paymentDetail.taxIdNum,\n              coupon: this.paymentDetail.coupon,\n            },\n          },\n          message: this.customerDetail.message,\n        },\n      };\n      this.orderDetail.total = this.cart.final_total;\n      this.$http\n        .post(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order`, data)\n        .then((res) => {\n          if (res.data.success) {\n            this.orderDetail.orderId = res.data.orderId;\n            this.getCartInfo();\n            addOrderBtn.classList.remove('disabled');\n            addOrderBtn.children[0].classList.add('d-none');\n            this.confirmCartPageShow = false;\n            this.finishCartPageShow = true;\n            emitter.emit('update-cart');\n          } else {\n            this.customAlert(res.data.message);\n            window.setTimeout(this.closeCustomAlert, 5000);\n            addOrderBtn.classList.remove('disabled');\n            addOrderBtn.children[0].classList.add('d-none');\n            emitter.emit('update-cart');\n          }\n        })\n        .catch((err) => {\n          this.customAlert(err.response);\n          window.setTimeout(this.closeCustomAlert, 5000);\n          addOrderBtn.classList.remove('disabled');\n          addOrderBtn.children[0].classList.add('d-none');\n        });\n    },\n  },\n  created() {\n    this.getCartInfo();\n  },\n};\n</script>\n","<template>\n  <div class=\"container py-8 position-relative\">\n    <div class=\"bg-light rounded-3 p-7\">\n      <div v-show=\"cart.total > 0\" class=\"row g-7\">\n        <div class=\"col-6 cart-scroll-box position-relative\" ref=\"scrollBtn\">\n          <!--訂單內容-->\n          <template v-for=\"(item, itemKey) in cart.carts\" :key=\"item.id\">\n            <div v-for=\"(option, key) in item.options\" :key=\"key\">\n              <div\n                class=\"px-3 py-4 mb-6 border border-primary rounded-1 position-relative\"\n                :class=\"{\n                  'border-danger': productWarningShow[itemKey],\n                }\"\n              >\n                <div\n                  class=\"row justify-content-between pb-3 mb-2\n                border-bottom border-gray\"\n                >\n                  <div class=\"col-4\">\n                    <p class=\"mb-2\">{{ option.start_date }}</p>\n                    <img :src=\"item.product.imageUrl\" :alt=\"item.title\" class=\"cart-img\" />\n                  </div>\n                  <div class=\"col-8 d-flex flex-column justify-content-between\">\n                    <div>\n                      <p class=\"h3-sm\">{{ item.product.title }}</p>\n                      <p class=\"h4-sm h5 mb-3\">{{ option.optionName }}</p>\n                    </div>\n                    <p class=\"text-end\">\n                      NT\n                      {{\n                        addComma(\n                          option.optionPrice * (option.qtyDetail.adult + option.qtyDetail.child),\n                        )\n                      }}\n                    </p>\n                  </div>\n                  <div class=\"mt-3 d-flex\">\n                    <p\n                      class=\"w-25\"\n                      :class=\"{\n                        'fw-bold': productWarningShow[itemKey],\n                        'text-danger': productWarningShow[itemKey],\n                      }\"\n                    >\n                      選擇旅客：\n                    </p>\n                    <!-- 套用客人輸入的名字全部顯示在這裡，並可選擇 -->\n                    <div\n                      class=\"d-flex flex-wrap btn-group\"\n                      role=\"group\"\n                      aria-label=\"Basic checkbox toggle button group\"\n                    >\n                      <div\n                        class=\"me-2 mb-2\"\n                        v-for=\"(user, userIndex) in customerDetail.users\"\n                        :key=\"user.name\"\n                      >\n                        <!-- 因為名字客人可能會改來改去， v-model 姓名會導致無法即時更新\n                          所以綁定他在 customerDetail.users 的 index 位置，需要的時候（例如確認訂單頁）再找到最終不會再更改的名字對應回去-->\n                        <input\n                          type=\"checkbox\"\n                          :id=\"`${user.name}-${option.optionName}-${option.start_date}`\"\n                          autocomplete=\"off\"\n                          class=\"btn-check\"\n                          :disabled=\"\n                            user.name === undefined ||\n                              (item.users.length >= item.qty &&\n                                item.users.includes(userIndex) === false)\n                          \"\n                          :value=\"userIndex\"\n                          v-model=\"item.users\"\n                        />\n                        <label\n                          :for=\"`${user.name}-${option.optionName}-${option.start_date}`\"\n                          class=\"btn btn-outline-secondary rounded-2\"\n                          >{{ user.name || '待填' }}\n                        </label>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"d-flex justify-content-evenly\">\n                  <div class=\"d-flex align-items-center h4-sm h5\" v-if=\"option.qtyDetail\">\n                    <button\n                      type=\"button\"\n                      class=\"border-0 bg-transparent p-2\"\n                      @click=\"$emit('emit-change-tkt-num', 'adult', 'minus', option, key, item.id)\"\n                    >\n                      <i class=\"bi bi-dash-lg\"></i>\n                    </button>\n                    <div class=\"p-1\" :ref=\"`adultStatus${option.optionName}-${option.start_date}`\">\n                      <div class=\"spinner-border spinner-border-sm text-dark d-none\" role=\"status\">\n                        <span class=\"visually-hidden\">Loading...</span>\n                      </div>\n                      <p>{{ option.qtyDetail.adult }}</p>\n                    </div>\n                    <button\n                      type=\"button\"\n                      class=\"border-0 bg-transparent p-2\"\n                      @click=\"$emit('emit-change-tkt-num', 'adult', 'plus', option, key, item.id)\"\n                    >\n                      <i class=\"bi bi-plus-lg\"></i>\n                    </button>\n                    <span v-if=\"item.product.lowestPriceUnit === '每人'\">大</span>\n                    <span\n                      v-else-if=\"\n                        item.product.category !== '包車服務' &&\n                          item.product.lowestPriceUnit !== '每人'\n                      \"\n                      >組</span\n                    >\n                    <span\n                      v-else-if=\"\n                        item.product.category === '包車服務' &&\n                          item.product.lowestPriceUnit !== '每人'\n                      \"\n                      >台</span\n                    >\n                  </div>\n                  <div\n                    class=\"d-flex align-items-center h4-sm h5\"\n                    v-if=\"option.qtyDetail && item.product.lowestPriceUnit === '每人'\"\n                  >\n                    <button\n                      type=\"button\"\n                      class=\"border-0 bg-transparent p-2\"\n                      @click=\"$emit('emit-change-tkt-num', 'child', 'minus', option, key, item.id)\"\n                    >\n                      <i class=\"bi bi-dash-lg\"></i>\n                    </button>\n                    <div class=\"p-1\" :ref=\"`childStatus${option.optionName}-${option.start_date}`\">\n                      <div class=\"spinner-border spinner-border-sm text-dark d-none\" role=\"status\">\n                        <span class=\"visually-hidden\">Loading...</span>\n                      </div>\n                      <p>{{ option.qtyDetail.child }}</p>\n                    </div>\n                    <button\n                      type=\"button\"\n                      class=\"border-0 bg-transparent p-2\"\n                      @click=\"$emit('emit-change-tkt-num', 'child', 'plus', option, key, item.id)\"\n                    >\n                      <i class=\"bi bi-plus-lg\"></i>\n                    </button>\n                    小\n                  </div>\n                  <a\n                    type=\"button\"\n                    class=\"delete-cart-icon\"\n                    :ref=\"`deleteCartProduct${option.optionName}`\"\n                  >\n                    <div class=\"spinner-border spinner-border-sm text-dark d-none\" role=\"status\">\n                      <span class=\"visually-hidden\">Loading...</span>\n                    </div>\n                    <i\n                      class=\"bi bi-trash-fill\"\n                      @click=\"$emit('emit-delete-product', option, key, item.id)\"\n                    ></i>\n                  </a>\n                </div>\n              </div>\n            </div>\n          </template>\n          <!-- 提示可往下滑的圖案 -->\n          <div class=\"scroll-btn\" v-if=\"scrollBtnShow\">\n            <i class=\"bi bi-arrow-down-short\"></i>\n          </div>\n        </div>\n        <div class=\"col-6\">\n          <!--客戶資料-->\n          <Form v-slot=\"{ errors }\" @submit=\"toNextPage\">\n            <div class=\"tab-content mb-6\">\n              <div\n                v-for=\"(item, key) in customerDetail.users\"\n                :key=\"key\"\n                class=\"tab-pane fade\"\n                :class=\"{ show: key === 0, active: key === 0 }\"\n                :id=\"`pills-pax-${key}`\"\n                role=\"tabpanel\"\n                :aria-labelledby=\"`pills-tab-${key}`\"\n              >\n                <p class=\"mb-6 h3\">\n                  第 {{ key + 1 }} 位旅客\n                  <span v-if=\"key === 0\"> / 主要聯絡人</span>\n                </p>\n                <div class=\"mb-3\">\n                  <label :for=\"`bookNameCartInput-${key}`\" class=\"form-label\">姓名</label>\n                  <Field\n                    type=\"text\"\n                    :id=\"`bookNameCartInput-${key}`\"\n                    :name=\"`第 ${key + 1} 位姓名`\"\n                    class=\"form-control\"\n                    :class=\"{ 'is-invalid': errors[`第 ${key + 1} 位姓名`] }\"\n                    rules=\"required\"\n                    v-model=\"customerDetail.users[key].name\"\n                  ></Field>\n                  <ErrorMessage\n                    :name=\"`第 ${key + 1} 位姓名`\"\n                    class=\"invalid-feedback\"\n                  ></ErrorMessage>\n                </div>\n                <div class=\"mb-3\">\n                  <label :for=\"`bookGenderCartInput-${key}`\" class=\"form-label\">稱謂</label>\n                  <Field\n                    :name=\"`第 ${key + 1} 位稱謂`\"\n                    class=\"form-select\"\n                    :id=\"`bookGenderCartInput-${key}`\"\n                    :class=\"{ 'is-invalid': errors[`第 ${key + 1} 位稱謂`] }\"\n                    rules=\"required\"\n                    v-model=\"customerDetail.users[key].gender\"\n                    as=\"select\"\n                  >\n                    <option disabled value=\"\">請選擇稱謂</option>\n                    <option selected value=\"先生\">先生</option>\n                    <option value=\"女士\">女士</option>\n                  </Field>\n                  <ErrorMessage\n                    :name=\"`第 ${key + 1} 位稱謂`\"\n                    class=\"invalid-feedback\"\n                  ></ErrorMessage>\n                </div>\n                <div class=\"mb-3\">\n                  <label :for=\"`bookIdNumCartInput-${key}`\" class=\"form-label\">身分證字號</label>\n                  <Field\n                    type=\"text\"\n                    :name=\"`第 ${key + 1} 位身分證`\"\n                    class=\"form-control\"\n                    :id=\"`bookIdNumCartInput-${key}`\"\n                    :class=\"{ 'is-invalid': errors[`第 ${key + 1} 位身分證`] }\"\n                    :rules=\"isIdNum\"\n                    v-model=\"customerDetail.users[key].idNum\"\n                  ></Field>\n                  <ErrorMessage\n                    :name=\"`第 ${key + 1} 位身分證`\"\n                    class=\"invalid-feedback\"\n                  ></ErrorMessage>\n                </div>\n                <div class=\"mb-3\">\n                  <label :for=\"`bookPassportNumCartInput-${key}`\" class=\"form-label\">\n                    護照號碼\n                  </label>\n                  <Field\n                    type=\"text\"\n                    :name=\"`第 ${key + 1} 位護照號碼`\"\n                    class=\"form-control\"\n                    :id=\"`bookPassportNumCartInput-${key}`\"\n                    :class=\"{ 'is-invalid': errors[`第 ${key + 1} 位護照號碼`] }\"\n                    rules=\"length:9|numeric\"\n                    v-model=\"customerDetail.users[key].passportNum\"\n                  ></Field>\n                  <ErrorMessage\n                    :name=\"`第 ${key + 1} 位護照號碼`\"\n                    class=\"invalid-feedback\"\n                  ></ErrorMessage>\n                </div>\n                <div class=\"mb-3\">\n                  <label :for=\"`bookTelCartInput-${key}`\" class=\"form-label\">聯繫電話</label>\n                  <Field\n                    type=\"tel\"\n                    :name=\"`第 ${key + 1} 位電話`\"\n                    class=\"form-control\"\n                    :id=\"`bookTelCartInput-${key}`\"\n                    :class=\"{ 'is-invalid': errors[`第 ${key + 1} 位電話`] }\"\n                    rules=\"required|numeric|max:10\"\n                    v-model=\"customerDetail.users[key].tel\"\n                  ></Field>\n                  <ErrorMessage\n                    :name=\"`第 ${key + 1} 位電話`\"\n                    class=\"invalid-feedback\"\n                  ></ErrorMessage>\n                </div>\n                <div class=\"mb-3\">\n                  <label :for=\"`bookEmailCartInput-${key}`\" class=\"form-label\">\n                    電子信箱\n                  </label>\n                  <Field\n                    type=\"email\"\n                    :name=\"`第 ${key + 1} 位 email`\"\n                    class=\"form-control\"\n                    :id=\"`bookEmailCartInput-${key}`\"\n                    placeholder=\"customer@example.com\"\n                    :class=\"{ 'is-invalid': errors[`第 ${key + 1} 位 email`] }\"\n                    rules=\"email|required\"\n                    v-model=\"customerDetail.users[key].email\"\n                  ></Field>\n                  <ErrorMessage\n                    :name=\"`第 ${key + 1} 位 email`\"\n                    class=\"invalid-feedback\"\n                  ></ErrorMessage>\n                </div>\n                <div class=\"mb-3\">\n                  <label :for=\"`bookAddrCartInput-${key}`\" class=\"form-label\">地址</label>\n                  <Field\n                    type=\"text\"\n                    :name=\"`第 ${key + 1} 位地址`\"\n                    class=\"form-control\"\n                    :id=\"`bookAddrCartInput-${key}`\"\n                    :class=\"{ 'is-invalid': errors[`第 ${key + 1} 位地址`] }\"\n                    rules=\"required\"\n                    v-model=\"customerDetail.users[key].address\"\n                  ></Field>\n                  <ErrorMessage\n                    :name=\"`第 ${key + 1} 位地址`\"\n                    class=\"invalid-feedback\"\n                  ></ErrorMessage>\n                </div>\n              </div>\n              <div\n                class=\"tab-pane fade\"\n                id=\"pills-pax-note\"\n                role=\"tabpanel\"\n                aria-labelledby=\"pills-tab-note\"\n              >\n                <template v-for=\"(detail, key) in otherDetail\" :key=\"key\">\n                  <div class=\"mb-6 pb-6 border-bottom border-gray\">\n                    <div class=\"mb-3\">\n                      <h4 class=\"h3 mb-1\">{{ detail.product.title }}</h4>\n                      <h4>{{ detail.optionName }}</h4>\n                    </div>\n                    <div class=\"mb-3\" v-if=\"detail.product.transfer.time\">\n                      <label :for=\"`note-pickupTime-${key}`\" class=\"form-label\">接送時間</label>\n                      <Field\n                        type=\"text\"\n                        :id=\"`note-pickupTime-${key}`\"\n                        :name=\"`${detail.product.title}：${detail.optionName} 的接送時間`\"\n                        class=\"form-control\"\n                        :class=\"{\n                          'is-invalid':\n                            errors[`${detail.product.title}：${detail.optionName} 的接送時間`],\n                        }\"\n                        rules=\"required\"\n                        v-model=\"otherDetail[key].pickUpTime\"\n                      >\n                      </Field>\n                      <ErrorMessage\n                        :name=\"`${detail.product.title}：${detail.optionName} 的接送時間`\"\n                        class=\"invalid-feedback\"\n                      ></ErrorMessage>\n                    </div>\n                    <div\n                      class=\"mb-3\"\n                      v-if=\"\n                        detail.product.transfer.place &&\n                          detail.optionName.includes('火車' || '高鐵') === false\n                      \"\n                    >\n                      <label :for=\"`note-pickupPlace-${key}`\" class=\"form-label\">接送地點</label>\n                      <Field\n                        type=\"text\"\n                        :id=\"`note-pickupPlace-${key}`\"\n                        :name=\"`${detail.product.title}：${detail.optionName} 的接送地點`\"\n                        class=\"form-control\"\n                        :class=\"{\n                          'is-invalid':\n                            errors[`${detail.product.title}：${detail.optionName} 的接送地點`],\n                        }\"\n                        rules=\"required\"\n                        v-model=\"otherDetail[key].pickUpPlace\"\n                      >\n                      </Field>\n                      <ErrorMessage\n                        :name=\"`${detail.product.title}：${detail.optionName} 的接送地點`\"\n                        class=\"invalid-feedback\"\n                      ></ErrorMessage>\n                    </div>\n                    <div\n                      class=\"mb-3\"\n                      v-if=\"\n                        detail.product.category === '包車服務' &&\n                          detail.product.title.includes('包車')\n                      \"\n                    >\n                      <label :for=\"`note-rentCarSchedule-${key}`\" class=\"form-label\"\n                        >包車行程規劃</label\n                      >\n                      <textarea\n                        class=\"form-control\"\n                        :id=\"`note-rentCarSchedule-${key}`\"\n                        rows=\"6\"\n                        v-model=\"otherDetail[key].schedule\"\n                        placeholder=\"歡迎提供您對包車行程的初步規劃，我們的司機將與您討論並協助行程安排\"\n                      ></textarea>\n                    </div>\n                    <div class=\"mb-3\" v-if=\"detail.product.transfer.childRestrict\">\n                      <div class=\"form-check\">\n                        <input\n                          class=\"form-check-input\"\n                          type=\"checkbox\"\n                          :id=\"`note-rentCarChildInclude-${key}`\"\n                          v-model=\"otherDetail[key].includeChild\"\n                        />\n                        <label class=\"form-check-label\" :for=\"`note-rentCarChildInclude-${key}`\">\n                          旅客中有未滿 4 歲孩童\n                        </label>\n                      </div>\n                    </div>\n                    <div v-if=\"otherDetail[key].includeChild\">\n                      <div class=\"mb-3\">\n                        <label :for=\"`note-rentCarChildBd-${key}`\" class=\"form-label\"\n                          >孩童出生年月日</label\n                        >\n                        <Field\n                          type=\"text\"\n                          :id=\"`note-rentCarChildBd-${key}`\"\n                          :name=\"`${detail.product.title}：${detail.optionName} 的出生日期`\"\n                          class=\"form-control\"\n                          :class=\"{\n                            'is-invalid':\n                              errors[`${detail.product.title}：${detail.optionName} 的出生日期`],\n                          }\"\n                          rules=\"required\"\n                          placeholder=\"1900 / 01 / 01\"\n                          v-model=\"otherDetail[key].childBd\"\n                        ></Field>\n                        <ErrorMessage\n                          :name=\"`${detail.product.title}：${detail.optionName} 的出生日期`\"\n                          class=\"invalid-feedback\"\n                        ></ErrorMessage>\n                      </div>\n                      <div class=\"mb-3\">\n                        <label :for=\"`note-rentCarChildHeight-${key}`\" class=\"form-label\"\n                          >孩童身高</label\n                        >\n                        <Field\n                          type=\"text\"\n                          :id=\"`note-rentCarChildHeight-${key}`\"\n                          :name=\"`${detail.product.title}：${detail.optionName} 的孩童身高`\"\n                          class=\"form-control\"\n                          :class=\"{\n                            'is-invalid':\n                              errors[`${detail.product.title}：${detail.optionName} 的孩童身高`],\n                          }\"\n                          rules=\"required\"\n                          placeholder=\"公分\"\n                          v-model=\"otherDetail[key].childHeight\"\n                        ></Field>\n                        <ErrorMessage\n                          :name=\"`${detail.product.title}：${detail.optionName} 的孩童身高`\"\n                          class=\"invalid-feedback\"\n                        ></ErrorMessage>\n                      </div>\n                      <div class=\"mb-3\">\n                        <label :for=\"`note-rentCarChildWeight-${key}`\" class=\"form-label\"\n                          >孩童體重</label\n                        >\n                        <Field\n                          type=\"text\"\n                          :id=\"`note-rentCarChildWeight-${key}`\"\n                          :name=\"`${detail.product.title}：${detail.optionName} 的孩童體重`\"\n                          class=\"form-control\"\n                          :class=\"{\n                            'is-invalid':\n                              errors[`${detail.product.title}：${detail.optionName} 的孩童體重`],\n                          }\"\n                          rules=\"required\"\n                          placeholder=\"公斤\"\n                          v-model=\"otherDetail[key].childWeight\"\n                        ></Field>\n                        <ErrorMessage\n                          :name=\"`${detail.product.title}：${detail.optionName} 的孩童體重`\"\n                          class=\"invalid-feedback\"\n                        ></ErrorMessage>\n                      </div>\n                    </div>\n                    <div\n                      class=\"mb-3\"\n                      v-if=\"detail.product.translate.eng || detail.product.translate.jpy\"\n                    >\n                      <label for=\"note-translateLanguage\" class=\"form-label\">導覽語言</label>\n                      <select\n                        class=\"form-select\"\n                        id=\"note-translateLanguage\"\n                        v-model=\"otherDetail[key].translateLanguage\"\n                      >\n                        <option value=\"中文\" selected>中文</option>\n                        <option value=\"英文\" v-if=\"detail.product.translate.eng\">英文</option>\n                        <option value=\"日文\" v-if=\"detail.product.translate.jpy\">日文</option>\n                      </select>\n                    </div>\n                  </div>\n                </template>\n                <label for=\"note-bookMessageCart\" class=\"form-label\"\n                  >其他特殊需求（飲食、禁菸房...）</label\n                >\n                <textarea\n                  class=\"form-control mb-3\"\n                  id=\"note-bookMessageCart\"\n                  rows=\"2\"\n                  v-model=\"customerDetail.message\"\n                  placeholder=\"此備註不在商品包含範圍，不保證提供，但我們仍將盡力替您達成特殊需求\"\n                ></textarea>\n              </div>\n            </div>\n            <ul\n              class=\"nav nav-pills justify-content-center flex-wrap mb-8\"\n              id=\"pills-tab\"\n              role=\"tablist\"\n            >\n              <li\n                class=\"nav-item mb-1 position-relative\"\n                role=\"presentation\"\n                v-for=\"(user, key) in customerDetail.users\"\n                :key=\"`paxNum-${key}`\"\n                :class=\"{ 'ms-3': key !== 0 }\"\n              >\n                <i\n                  class=\"bi bi-exclamation-triangle-fill warning-icon\"\n                  v-if=\"pageWarningShow[key]\"\n                ></i>\n                <button\n                  type=\"button\"\n                  class=\"nav-link nav-link-outline-primary rounded-1\"\n                  :class=\"{ active: key === 0, 'nav-link-danger': pageWarningShow[key] }\"\n                  :id=\"`pills-tab-${key}`\"\n                  data-bs-toggle=\"pill\"\n                  :data-bs-target=\"`#pills-pax-${key}`\"\n                  role=\"tab\"\n                  :aria-controls=\"`pills-pax-${key}`\"\n                  aria-selected=\"false\"\n                >\n                  {{ key + 1 }}\n                </button>\n                <div>\n                  <button\n                    type=\"button\"\n                    ref=\"deletePaxTooltip\"\n                    class=\"delete-pax-num\"\n                    :class=\"{\n                      'd-none': key === 0 || customerDetail.users.length <= productMaxPaxQty,\n                    }\"\n                    data-bs-toggle=\"tooltip\"\n                    data-bs-placement=\"top\"\n                    :title=\"`刪除第 ${key + 1} 位旅客`\"\n                    @click=\"deletePax(key)\"\n                  >\n                    <i class=\"bi bi-x\"></i>\n                  </button>\n                </div>\n              </li>\n              <li class=\"nav-item\">\n                <button\n                  type=\"button\"\n                  ref=\"addPaxTooltip\"\n                  class=\"nav-link nav-link-outline-primary rounded-1 ms-3\"\n                  :class=\"{ 'd-none': customerDetail.users.length >= totalProductsMaxPaxQty }\"\n                  data-bs-toggle=\"tooltip\"\n                  data-bs-placement=\"top\"\n                  title=\"新增旅客\"\n                  @click=\"addPax()\"\n                >\n                  <i class=\"bi bi-person-plus\"></i>\n                </button>\n              </li>\n              <li class=\"nav-item ms-3 position-relative\" role=\"presentation\">\n                <i class=\"bi bi-exclamation-triangle-fill warning-icon\" v-if=\"noteWarningShow\"></i>\n                <button\n                  type=\"button\"\n                  class=\"nav-link nav-link-outline-primary rounded-1\"\n                  :class=\"{ 'nav-link-danger': noteWarningShow }\"\n                  id=\"pills-tab-note\"\n                  data-bs-toggle=\"pill\"\n                  data-bs-target=\"#pills-pax-note\"\n                  role=\"tab\"\n                  aria-controls=\"pills-pax-note\"\n                  aria-selected=\"false\"\n                >\n                  備註\n                </button>\n              </li>\n            </ul>\n            <div class=\"d-flex flex-column align-items-end\">\n              <h5 class=\"h3 mb-3\">\n                總金額\n                <span class=\"h2 text-primary\">NT {{ addComma(Math.floor(cart.final_total)) }}</span>\n              </h5>\n              <button\n                type=\"submit\"\n                class=\"btn btn-primary d-block px-5 py-2\"\n                @click=\"validationCheck\"\n                :disabled=\"Object.keys(cart).length == 0 || cart.total == 0\"\n              >\n                <p class=\"h3\">下一步</p>\n              </button>\n            </div>\n          </Form>\n        </div>\n      </div>\n      <!--無商品時顯示-->\n      <div class=\"text-center\" v-show=\"cart.total === 0\">\n        <p class=\"mb-4\">\n          購物車目前還沒有商品耶\n          <i class=\"bi bi-eraser\"></i>\n        </p>\n        <p class=\"mb-2\">\n          客倌要不要\n          <router-link :to=\"`/product_list`\" title=\"前往產品頁\" class=\"text-secondary h3\">\n            來這裡挑挑看、選選看\n          </router-link>\n          呢？\n        </p>\n        <p>\n          也可以\n          <router-link :to=\"`/article_list`\" title=\"前往文章頁\" class=\"text-secondary h3\">\n            來這裡尋找玩樂靈感\n          </router-link>\n          唷！\n        </p>\n      </div>\n    </div>\n  </div>\n  <!--alert-->\n  <Alert v-if=\"showAlert\" :alert-msg=\"alertMsg\"></Alert>\n</template>\n<script>\nimport Alert from '@/components/backend/Alert.vue';\nimport flushPromises from 'flush-promises';\n\nexport default {\n  props: ['cartInfo', 'customer', 'otherInfo'],\n  emits: [\n    'emit-delete-all-products',\n    'emit-change-tkt-num',\n    'emit-delete-product',\n    'emit-add-pax',\n    'emit-delete-pax',\n    'emit-next-page',\n  ],\n  data() {\n    return {\n      cart: {},\n      customerDetail: {},\n      otherDetail: [],\n      addPaxTooltip: '',\n      deletePaxTooltip: '',\n      productMaxPaxQty: 0,\n      totalProductsMaxPaxQty: 0,\n      scrollBtnShow: true,\n      noteWarningShow: false,\n      pageWarningShow: [],\n      productWarningShow: [],\n      showAlert: false,\n    };\n  },\n  components: {\n    Alert,\n  },\n  methods: {\n    customAlert(msg) {\n      this.alertMsg = msg;\n      this.showAlert = true; // 秀出 alert\n    },\n    closeCustomAlert() {\n      this.showAlert = false;\n    },\n    isIdNum(value) {\n      const idNum = /^[A-Z][0-9]{9}$/;\n      return idNum.test(value) ? true : '請輸入正確的身分證字號';\n    },\n    addPax() {\n      // 新增一個空物件讓新方案的內容可以放入\n      this.customerDetail.users[this.customerDetail.users.length] = {};\n    },\n    // 若綁定姓名確認沒問題可拿掉這串\n    // 可達成功能，但想讓他可以自動改而不是手動調\n    // addUser(cartItem, name, userIndex) {\n    //   // 確認 cartItem.users 裡的物件，是否有相同的 userIndex\n    //   const userIndexArr = cartItem.users.map((item) => item.userIndex);\n    //   if (userIndexArr.includes(userIndex) === false) {\n    //     // 不曾加過這個編號的客人就加進去\n    //     cartItem.users.push({\n    //       name,\n    //       userIndex,\n    //     });\n    //   } else {\n    //     // 曾加過的話判斷是改名字？還是要拿掉？\n    //     const repeatItem = cartItem.users[userIndexArr.indexOf(userIndex)];\n    //     if (name !== repeatItem.name) {\n    //       repeatItem.name = name;\n    //     } else {\n    //       cartItem.users.splice(cartItem.users.indexOf(name), 1);\n    //     }\n    //   }\n    //   console.log(cartItem);\n    // },\n    deletePax(num) {\n      this.customerDetail.users.splice(num, 1);\n    },\n    toNextPage() {\n      // 初始化 productWarningShow ，長度要等於商品數，每個都調成 false\n      for (let i = 0; i < this.cart.carts.length; i += 1) {\n        this.productWarningShow[i] = false;\n      }\n      this.cart.carts.forEach((product, productKey) => {\n        // 確認是否每個商品登陸的人數，等於該商品要使用的人數（不可放在 async validationCheck 會來不及正確運行）\n        if (product.users.length !== product.qty) {\n          // 沒有的那項調成 true\n          this.productWarningShow[productKey] = true;\n        }\n      });\n      // 只要 productWarningShow 裡含有 true 就秀警告且不可繼續運行 emit\n      if (this.productWarningShow.includes(true)) {\n        this.customAlert('請登錄每項商品的客戶');\n        window.setTimeout(this.closeCustomAlert, 5000);\n      } else {\n        this.$emit('emit-next-page', this.customerDetail, this.otherDetail);\n      }\n    },\n    async validationCheck() {\n      // 如果有東西沒填，會直接不跑 toNextPage() ，所以按下下一步時多設一個函式檢查\n      await flushPromises(); // 先確定渲染完，再跑下面的\n      const errorArr = document.querySelectorAll('.is-invalid');\n      const errorIdArr = [];\n      let errorPageArr = [];\n      if (errorArr.length > 0) {\n        // 如果陣列裡有東西代表有錯誤\n        this.customAlert('請填寫客戶資料及相關備註');\n        window.setTimeout(this.closeCustomAlert, 5000);\n        errorArr.forEach((error) => {\n          errorIdArr.push(error.id.split('-'));\n        });\n        this.noteWarningShow = !!errorIdArr.map((id) => id[0]).includes('note'); // id 陣列的第 0 項如果有 note 代表有備註沒填\n        errorIdArr.forEach((id) => {\n          if (id[0] !== 'note') {\n            // 代表是客人資料沒填\n            // 檢查陣列最後一項的數字，加一就是第幾位\n            errorPageArr.push(id[id.length - 1]);\n          }\n        });\n        errorPageArr = [...new Set(errorPageArr)]; // 刪掉重複的值\n        // 初始化 pageWarningShow 陣列，讓長度等同目前客人數並調為 false\n        for (let i = 0; i < this.customerDetail.users.length; i += 1) {\n          this.pageWarningShow[i] = false;\n        }\n        // 有出現在 errorPageArr 陣列的調為 true\n        errorPageArr.forEach((i) => {\n          this.pageWarningShow[i] = true;\n        });\n      } else {\n        // 沒錯誤時要把值調回 false\n        this.noteWarningShow = false;\n        for (let i = 0; i < this.customerDetail.users.length; i += 1) {\n          this.pageWarningShow[i] = false;\n        }\n      }\n    },\n  },\n  watch: {\n    cartInfo: {\n      handler() {\n        this.cart = {\n          ...this.cartInfo,\n        }; // props 有變時更改資料\n        const totalOptionNum = this.cart.carts.map((i) => i.options).flat().length;\n        if (totalOptionNum <= 2) {\n          this.scrollBtnShow = false;\n        }\n        this.cart.final_total = this.cartInfo.final_total;\n        this.cart.carts.forEach((item) => {\n          // 處理特殊備註是否要顯示翻譯接送等表格\n          if (\n            Object.values(item.product.transfer).includes(true)\n            || Object.values(item.product.translate).includes(true)\n          ) {\n            if (this.otherDetail.map((i) => i.id).includes(item.id)) {\n              // 確認有沒有方案名相同或時間相同的\n              const otherDetailOptionName = this.otherDetail.map((i) => i.optionName);\n              const otherDetailStartDate = this.otherDetail.map((i) => i.start_date);\n              item.options.forEach((i) => {\n                if (\n                  otherDetailOptionName.includes(i.optionName) === false\n                  && otherDetailStartDate.includes(i.start_date) === false\n                ) {\n                  this.otherDetail.push({\n                    id: item.id,\n                    product: { ...item.product },\n                    optionName: i.optionName,\n                    start_date: i.start_date,\n                    pickUpTime: '',\n                    pickUpPlace: '',\n                    schedule: '',\n                    includeChild: false,\n                    childBd: '',\n                    childHeight: '',\n                    childWeight: '',\n                    translateLanguage: '中文',\n                  });\n                }\n              });\n            } else {\n              item.options.forEach((i) => {\n                this.otherDetail.push({\n                  id: item.id,\n                  product: { ...item.product },\n                  optionName: i.optionName,\n                  start_date: i.start_date,\n                  pickUpTime: '',\n                  pickUpPlace: '',\n                  schedule: '',\n                  includeChild: false,\n                  childBd: '',\n                  childHeight: '',\n                  childWeight: '',\n                  translateLanguage: '中文',\n                });\n              });\n            }\n          }\n        });\n        // 把各項商品方案的總人數抽出來相加，代表如果每個方案的人都不一樣，最多可以有這麼多不同的旅客資料\n        const qtyArr = this.cart.carts.map((i) => i.qty);\n        this.totalProductsMaxPaxQty = qtyArr.reduce((x, y) => x + y, 0);\n        // 把各項商品方案的總人數抽出來，找到最高值，this.customerDetail.users 要包進 productMaxPaxQty 長度的空物件\n        [this.productMaxPaxQty] = qtyArr.sort((x, y) => y - x);\n        const difference = this.customerDetail.users.length - this.productMaxPaxQty;\n        if (difference > 0) {\n          // this.customerDetail.users.length 比較大 > 剪掉 this.customerDetail.users 後面的空物件直到長度相同\n          this.customerDetail.users.splice(-1, difference);\n        } else if (difference < 0) {\n          // this.customerDetail.users.length 比較小 > 增加 this.customerDetail.users 後面的空物件直到長度相同\n          this.customerDetail.users = [{}];\n          for (let i = 0; i < this.productMaxPaxQty - 1; i += 1) {\n            this.customerDetail.users.push({});\n          }\n        }\n      },\n      deep: true,\n    },\n    customer: {\n      handler() {\n        this.customerDetail = { ...this.customer };\n      },\n      deep: true,\n    },\n  },\n  computed: {\n    addComma() {\n      return (price) => {\n        const parts = price.toString().split('.');\n        parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n        return `${parts.join(',')}`;\n      };\n    },\n  },\n  created() {\n    this.cart = { ...this.cartInfo };\n    this.customerDetail = { ...this.customer };\n    this.otherDetail = [...this.otherInfo];\n  },\n  mounted() {\n    this.listener = () => {\n      const btn = this.$refs.scrollBtn;\n      this.scrollBtnShow = btn.scrollTop < btn.scrollHeight - 800;\n    };\n    this.$refs.scrollBtn.addEventListener('scroll', this.listener);\n  },\n};\n</script>\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import { render } from \"./CheckCart.vue?vue&type=template&id=576c478f\"\nimport script from \"./CheckCart.vue?vue&type=script&lang=js\"\nexport * from \"./CheckCart.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"container py-8\">\n    <div class=\"bg-light rounded-3 p-7\">\n      <h2 class=\"h3 text-primary mb-6\">訂單內容</h2>\n      <div class=\"row mb-7 rounded-1\">\n        <template v-for=\"item in cart.carts\" :key=\"item.id\">\n          <div v-for=\"(option, key) in item.options\" :key=\"key\" class=\"col-md-6\">\n            <div class=\"px-3 py-4 mb-2 border border-primary rounded-1 position-relative\">\n              <div\n                class=\"d-flex justify-content-between pb-2 mb-2\n                border-bottom border-gray\"\n              >\n                <div>\n                  <p class=\"mb-2\">{{ option.start_date }}</p>\n                  <img :src=\"item.product.imageUrl\" :alt=\"item.title\" class=\"cart-img\" />\n                </div>\n                <div class=\"w-50\">\n                  <p class=\"h3\">{{ item.product.title }}</p>\n                  <p class=\"h4 mb-3\">{{ option.optionName }}</p>\n                  <p class=\"text-end\">\n                    NT\n                    {{\n                      addComma(\n                        option.optionPrice * (option.qtyDetail.adult + option.qtyDetail.child),\n                      )\n                    }}\n                  </p>\n                </div>\n              </div>\n              <div class=\"d-flex justify-content-between\">\n                <div class=\"d-flex justify-content-evenly w-50\">\n                  <div class=\"d-flex align-items-center\">\n                    {{ option.qtyDetail.adult }}\n                    <span v-if=\"item.product.lowestPriceUnit === '每人'\" class=\"ms-1\">大</span>\n                    <span\n                      v-else-if=\"\n                        item.product.category !== '包車服務' &&\n                          item.product.lowestPriceUnit !== '每人'\n                      \"\n                      class=\"ms-1\"\n                    >\n                      組\n                    </span>\n                    <span\n                      v-else-if=\"\n                        item.product.category === '包車服務' &&\n                          item.product.lowestPriceUnit !== '每人'\n                      \"\n                      class=\"ms-1\"\n                    >\n                      台\n                    </span>\n                  </div>\n                  <div\n                    class=\"d-flex align-items-center\"\n                    v-if=\"item.product.lowestPriceUnit === '每人'\"\n                  >\n                    {{ option.qtyDetail.child }}\n                    <span class=\"ms-1\">小</span>\n                  </div>\n                </div>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-primary\"\n                  data-bs-toggle=\"modal\"\n                  data-bs-target=\"#productRemark\"\n                  @click=\"openModal(item, option)\"\n                >\n                  查看備註\n                </button>\n              </div>\n            </div>\n          </div>\n        </template>\n      </div>\n      <!-- Remark Modal -->\n      <div\n        class=\"modal fade\"\n        id=\"productRemark\"\n        tabindex=\"-1\"\n        aria-labelledby=\"productRemarkLabel\"\n        aria-hidden=\"true\"\n      >\n        <div class=\"modal-dialog\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header bg-wave mb-3 position-relative\">\n              <h3 class=\"modal-title\">商品備註</h3>\n              <div class=\"cable-car\"></div>\n            </div>\n            <div class=\"modal-body p-6\">\n              <ul>\n                <li v-if=\"temp.pickUpTime\">接送時間：{{ temp.pickUpTime }}</li>\n                <li v-if=\"temp.pickUpPlace\">接送地點：{{ temp.pickUpPlace }}</li>\n                <li v-if=\"temp.schedule\">包車行程規劃：{{ temp.schedule }}</li>\n                <li v-if=\"temp.includeChild\">\n                  <p>含有 4 歲以下幼童</p>\n                  <p>出生年月日：{{ temp.childBd }}</p>\n                  <p>{{ temp.childHeight }} 公分 / {{ temp.childWeight }} 公斤</p>\n                </li>\n                <li v-if=\"temp.translateLanguage && temp.translateLanguage !== '中文'\">\n                  導覽翻譯：{{ temp.translateLanguage }}\n                </li>\n                <li>其他特殊需求（飲食、禁菸房...）：{{ temp.message }}</li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n      <h2 class=\"h3 text-primary mb-6\">客戶資料</h2>\n      <div class=\"row mb-7\">\n        <div class=\"col-lg-6\" v-for=\"(item, key) in customer.users\" :key=\"key\">\n          <div class=\"position-relative p-md-6 p-3 bg-white\">\n            <div class=\"d-flex justify-content-between\">\n              <div class=\"w-50 d-flex flex-column justify-content-between\">\n                <p class=\"h3 mb-5\">\n                  {{ item.name }}\n                  <span class=\"h4 ms-1\">\n                    {{ item.gender }}\n                  </span>\n                </p>\n                <p class=\"pax-num d-sm-inline d-none\">{{ `第${key + 1}位旅客` }}</p>\n                <img\n                  src=\"https://github.com/vvvvvvii/tasteof/blob/main/public/img/num.png?raw=true\"\n                  :alt=\"`第${key + 1}位旅客`\"\n                  class=\"pax-num-img d-sm-block d-none\"\n                />\n              </div>\n              <div class=\"w-50\">\n                <p class=\"mb-2\">身分證字號： {{ item.idNum }}</p>\n                <p class=\"mb-4\">護照號碼： {{ item.passportNum }}</p>\n                <p class=\"mb-2 d-sm-block d-none\">{{ item.tel }}</p>\n                <p class=\"mb-2 d-sm-block d-none\">{{ item.email }}</p>\n                <p class=\"mb-2 d-sm-block d-none\">{{ item.address }}</p>\n              </div>\n            </div>\n            <p class=\"mb-2 h5 d-sm-none\">{{ item.tel }}</p>\n            <p class=\"mb-2 h5 d-sm-none\">{{ item.email }}</p>\n            <p class=\"mb-2 h5 d-sm-none\">{{ item.address }}</p>\n          </div>\n        </div>\n      </div>\n      <h2 class=\"h3 text-primary mb-6\">付款資料</h2>\n      <Form v-slot=\"{ errors }\" @submit=\"addOrder\">\n        <div class=\"row mb-7\">\n          <div class=\"col-lg-4 col-md-6 mb-lg-0 mb-3\">\n            <label for=\"paymentMethodInput\" class=\"form-label\">付款方式</label>\n            <Field\n              name=\"付款方式\"\n              class=\"form-select\"\n              id=\"paymentMethodInput\"\n              :class=\"{ 'is-invalid': errors['付款方式'] }\"\n              rules=\"required\"\n              v-model=\"paymentDetail.method\"\n              as=\"select\"\n            >\n              <option disabled value=\"\">請選擇付款方式</option>\n              <option selected value=\"線上刷卡\">線上刷卡</option>\n              <option value=\"匯款\">匯款</option>\n            </Field>\n            <ErrorMessage name=\"付款方式\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n          <div class=\"col-lg-4 col-md-6 mb-md-0 mb-3\">\n            <label for=\"taxIdInput\" class=\"form-label\">統一編號（選填）</label>\n            <input\n              type=\"text\"\n              id=\"taxIdInput\"\n              name=\"統一編號\"\n              class=\"form-control\"\n              v-model=\"paymentDetail.taxIdNum\"\n            />\n          </div>\n          <div class=\"col-lg-4 col-md-6\">\n            <label for=\"couponInput\" class=\"form-label\">優惠券（選填）</label>\n            <div class=\"input-group mb-2\">\n              <input\n                type=\"text\"\n                id=\"couponInput\"\n                name=\"優惠券\"\n                class=\"form-control\"\n                v-model=\"paymentDetail.coupon\"\n              />\n              <div\n                ref=\"checkCouponBtn\"\n                class=\"input-group-text btn btn-primary\"\n                @click=\"$emit('emit-check-coupon', paymentDetail.coupon)\"\n              >\n                <div class=\"spinner-border spinner-border-sm text-light d-none me-1\" role=\"status\">\n                  <span class=\"visually-hidden\">Loading...</span>\n                </div>\n                套用優惠碼\n              </div>\n            </div>\n            <p v-if=\"paymentDetail.coupon\" class=\"ms-1 h5 text-primary\">\n              已套用優惠券 {{ paymentDetail.coupon }}\n            </p>\n          </div>\n        </div>\n        <div class=\"d-flex flex-column align-items-end\">\n          <h5 class=\"h3 mb-3\">\n            總金額\n            <span class=\"h2 text-primary\">NT {{ addComma(Math.floor(cart.final_total)) }}</span>\n          </h5>\n          <div class=\"d-flex\">\n            <button\n              type=\"button\"\n              class=\"btn btn-outline-primary px-5 py-2 h3\"\n              @click=\"$emit('emit-pre-page')\"\n            >\n              上一頁\n            </button>\n            <button\n              type=\"submit\"\n              class=\"btn btn-primary px-5 py-2 ms-2\n              d-flex justify-content-center align-items-center\"\n              ref=\"addOrderBtn\"\n              :disabled=\"Object.keys(cart).length == 0 || cart.total == 0\"\n            >\n              <div class=\"spinner-border spinner-border-sm text-light d-none me-1\" role=\"status\">\n                <span class=\"visually-hidden\">Loading...</span>\n              </div>\n              <p class=\"h3\">結帳</p>\n            </button>\n          </div>\n        </div>\n      </Form>\n    </div>\n  </div>\n</template>\n<script>\nimport { Modal } from 'bootstrap';\n\nexport default {\n  props: ['cartInfo', 'customer', 'otherInfo', 'payment'],\n  emits: ['emit-check-coupon', 'emit-pre-page', 'emit-add-order'],\n  data() {\n    return {\n      cart: {},\n      customerDetail: {},\n      otherDetail: [],\n      paymentDetail: {},\n      remarkModal: {},\n      temp: {},\n    };\n  },\n  methods: {\n    addOrder() {\n      this.$emit('emit-add-order', this.paymentDetail);\n    },\n    openModal(item, option) {\n      this.temp = {};\n      this.otherDetail.forEach((detail) => {\n        if (detail.id === item.id && detail.optionName === option.optionName) {\n          this.temp = {\n            ...detail,\n          };\n        }\n      });\n      this.temp.message = this.customerDetail.message;\n      this.remarkModal.show();\n    },\n  },\n  watch: {\n    cartInfo: {\n      handler() {\n        this.cart = { ...this.cartInfo }; // props 有變時更改資料\n        this.cart.final_total = this.cartInfo.final_total;\n      },\n      deep: true,\n    },\n    customer() {\n      this.customerDetail = { ...this.customer };\n    },\n    otherInfo() {\n      this.otherDetail = [...this.otherInfo];\n    },\n    payment: {\n      handler() {\n        this.paymentDetail = { ...this.payment };\n      },\n      deep: true,\n    },\n  },\n  computed: {\n    addComma() {\n      return (price) => {\n        const parts = price.toString().split('.');\n        parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n        return `${parts.join(',')}`;\n      };\n    },\n  },\n  created() {\n    this.cart = { ...this.cartInfo };\n    this.customerDetail = { ...this.customer };\n    this.otherDetail = [...this.otherInfo];\n    this.paymentDetail = { ...this.payment };\n  },\n  mounted() {\n    this.remarkModal = new Modal(document.getElementById('productRemark'), {\n      keyboard: false,\n    });\n  },\n};\n</script>\n","import { render } from \"./ConfirmCart.vue?vue&type=template&id=4d2a4528\"\nimport script from \"./ConfirmCart.vue?vue&type=script&lang=js\"\nexport * from \"./ConfirmCart.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"container py-8\">\n    <div class=\"d-flex flex-md-row flex-column align-items-center\">\n      <img\n        src=\"https://github.com/vvvvvvii/tasteof/blob/main/public/img/finish%20cart.png?raw=true\"\n        alt=\"恭喜您完成付款\"\n        class=\"w-50\"\n      />\n      <div class=\"text-primary\">\n        <h2 class=\"h1 mb-lg-7 mb-3 text-md-start text-center\">\n          完成付款！\n          <span class=\"h2 ms-lg-3 d-lg-inline d-none\"\n            >NT {{ addComma(Math.floor(orderDetail.total)) }}</span\n          >\n        </h2>\n        <p class=\"h2 text-md-end text-center d-lg-none mb-6\">\n          NT {{ addComma(Math.floor(orderDetail.total)) }}\n        </p>\n        <p class=\"mb-3 text-md-start text-center\"><a class=\"h3-md text-primary\">查看訂單細節</a></p>\n        <p class=\"h2 text-md-start text-center\">{{ orderDetail.orderId }}</p>\n      </div>\n    </div>\n  </div>\n  <div class=\"bg-wave py-7\" id=\"moreActivitiesSection\">\n    <div class=\"container\">\n      <h3 class=\"text-primary mb-5\">更多活動？</h3>\n      <div class=\"row\">\n        <div class=\"col-4\" v-for=\"(item, key) in randomProducts\" :key=\"key\">\n          <router-link :to=\"`/product/${item.id}`\" title=\"查看更多\" class=\"card overflow-hidden\">\n            <div class=\"card-img-outer\">\n              <img :src=\"item.imageUrl\" :alt=\"item.title\" class=\"card-img\" />\n            </div>\n            <div class=\"card-body\">\n              <h4 class=\"card-title ellipsis ellipsis-one-line\">{{ item.title }}</h4>\n              <p class=\"h3-md h5 text-end\">NT {{ item.lowestPrice }} 起</p>\n            </div>\n          </router-link>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!--alert-->\n  <alert v-if=\"showAlert\" :alert-msg=\"alertMsg\"></alert>\n</template>\n<script>\nimport alert from '@/components/backend/Alert.vue';\n\nexport default {\n  props: ['orderDetail'],\n  data() {\n    return {\n      totalProducts: [],\n      randomProducts: [],\n      showAlert: false,\n      alertMsg: '',\n    };\n  },\n  components: {\n    alert,\n  },\n  methods: {\n    getTotalProducts() {\n      this.$http\n        .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`)\n        .then((res) => {\n          if (res.data.success) {\n            this.totalProducts = res.data.products;\n            this.totalProducts.forEach((item, index) => {\n              // 個別取出每個產品\n              let packageOptionsPrice = item.packageOptions.map((i) => i.price); // 取出該產品的所有方案中的價格\n              packageOptionsPrice = packageOptionsPrice.sort((x, y) => x - y); // 價格小排到大\n              // this.products[index].lowestPrice = packageOptionsPrice[0];\n              const [lowestPrice] = packageOptionsPrice; // 該產品最低價格為陣列第一個數\n              this.totalProducts[index].lowestPrice = lowestPrice;\n              // 找到該價格對應的單位\n              item.packageOptions.forEach((i) => {\n                if (i.price === lowestPrice) {\n                  this.totalProducts[index].lowestPriceUnit = i.unit;\n                }\n              });\n            });\n            this.getRandomProducts();\n          } else {\n            this.customAlert(res.data.message);\n            window.setTimeout(this.closeCustomAlert, 5000);\n          }\n        })\n        .catch((err) => {\n          this.customAlert(err.response);\n          window.setTimeout(this.closeCustomAlert, 5000);\n        });\n    },\n    getRandomProducts() {\n      const arrSet = new Set([]);\n      const maxSize = this.totalProducts.length < 3 ? this.totalProducts.length : 3;\n      for (let index = 0; arrSet.size < maxSize; index + 1) {\n        const { length } = this.totalProducts;\n        const num = Math.floor(Math.random(length) * length); // 隨機取得商品\n        arrSet.add(num);\n      }\n      arrSet.forEach((i) => {\n        this.randomProducts.push(this.totalProducts[i]); // 取得未重複的商品放進 randomProducts 陣列中\n      });\n    },\n    customAlert(msg) {\n      this.alertMsg = msg;\n      this.showAlert = true; // 秀出 alert\n    },\n    closeCustomAlert() {\n      this.showAlert = false;\n    },\n  },\n  computed: {\n    addComma() {\n      return (price) => {\n        const parts = price.toString().split('.');\n        parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n        return `${parts.join('.')}`;\n      };\n    },\n  },\n  created() {\n    this.getTotalProducts();\n  },\n};\n</script>\n","import { render } from \"./FinishCart.vue?vue&type=template&id=a145bb22\"\nimport script from \"./FinishCart.vue?vue&type=script&lang=js\"\nexport * from \"./FinishCart.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Cart.vue?vue&type=template&id=7f63efe8\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"alert alert-primary fade show\" role=\"alert\">\n    <i class=\"bi bi-exclamation-triangle-fill me-2 text-primary\"></i>{{ alertMsg }}\n  </div>\n</template>\n<script>\nexport default {\n  props: ['alertMsg'],\n};\n</script>\n","import { render } from \"./Alert.vue?vue&type=template&id=5a00ffbc\"\nimport script from \"./Alert.vue?vue&type=script&lang=js\"\nexport * from \"./Alert.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","var scheduler = typeof setImmediate === 'function' ? setImmediate : setTimeout;\n\nfunction flushPromises() {\n  return new Promise(function(resolve) {\n    scheduler(resolve);\n  });\n}\n\nmodule.exports = flushPromises;\n","export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import mitt from 'mitt';\n\nconst emitter = mitt();\n\nexport default emitter;\n"],"sourceRoot":""}