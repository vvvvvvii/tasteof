(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b2d82e1"],{"294f":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),o={class:"py-8"},s={class:"container"},r={class:"row justify-content-center"},n={class:"col-4 position-relative"},l={class:"customer-modal-inner primary-customer-modal-inner"},i=Object(a["createVNode"])("h2",{class:"text-center mb-6"},"登入管理後台",-1),d={class:"mb-3"},u=Object(a["createVNode"])("label",{for:"loginInputEmail",class:"form-label"},"帳號",-1),m={class:"mb-3"},b=Object(a["createVNode"])("label",{for:"loginInputPassword",class:"form-label"},"密碼",-1),p={class:"mb-5 form-check d-flex align-items-center"},h=Object(a["createVNode"])("label",{class:"form-check-label small ms-2",for:"loginCheck"},[Object(a["createTextVNode"])(" 我遵守 "),Object(a["createVNode"])("a",{class:"text-secondary"},"客戶條款")],-1),j={class:"d-grid gap-2 mx-auto text-center"},O=Object(a["createVNode"])("div",{class:"spinner-border spinner-border-sm text-light d-none",role:"status"},[Object(a["createVNode"])("span",{class:"visually-hidden"},"Loading...")],-1),f=Object(a["createVNode"])("p",{class:"ms-1"},"登入",-1),g=Object(a["createVNode"])("a",{class:"text-secondary"},"忘記密碼？",-1),N=Object(a["createVNode"])("p",null,[Object(a["createTextVNode"])(" 還沒有帳號？ "),Object(a["createVNode"])("a",{class:"text-secondary"},"註冊")],-1),V=Object(a["createVNode"])("div",{class:"customer-modal-inner-shadow primary-customer-modal-inner-shadow"},null,-1);function v(e,t,c,v,w,k){var x=Object(a["resolveComponent"])("Field"),y=Object(a["resolveComponent"])("ErrorMessage"),M=Object(a["resolveComponent"])("Form"),A=Object(a["resolveComponent"])("Alert");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])("div",o,[Object(a["createVNode"])("div",s,[Object(a["createVNode"])("div",r,[Object(a["createVNode"])("div",n,[Object(a["createVNode"])("div",l,[i,Object(a["createVNode"])(M,{onSubmit:k.checkLogin},{default:Object(a["withCtx"])((function(e){var c=e.errors;return[Object(a["createVNode"])("div",d,[u,Object(a["createVNode"])(x,{type:"email",id:"loginInputEmail",name:"帳號",class:["form-control",{"is-invalid":c["帳號"]}],rules:"required",placeholder:"example@gmail.com",autocomplete:"username",modelValue:w.userName,"onUpdate:modelValue":t[1]||(t[1]=function(e){return w.userName=e}),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),Object(a["createVNode"])(y,{name:"帳號",class:"invalid-feedback"})]),Object(a["createVNode"])("div",m,[b,Object(a["createVNode"])(x,{type:"password",id:"loginInputPassword",name:"密碼",class:["form-control",{"is-invalid":c["密碼"]}],rules:"required",autocomplete:"current-password",modelValue:w.password,"onUpdate:modelValue":t[2]||(t[2]=function(e){return w.password=e}),modelModifiers:{trim:!0}},null,8,["class","modelValue"]),Object(a["createVNode"])(y,{name:"密碼",class:"invalid-feedback"})]),Object(a["createVNode"])("div",p,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"checkbox",class:"form-check-input mt-0",id:"loginCheck","onUpdate:modelValue":t[3]||(t[3]=function(e){return w.check=e})},null,512),[[a["vModelCheckbox"],w.check]]),h]),Object(a["createVNode"])("div",j,[Object(a["createVNode"])("button",{type:"submit",class:"btn btn-secondary mb-1 d-flex justify-content-center align-items-center",ref:"loginBtn",disabled:""===w.userName||""===w.password||!1===w.check},[O,f],8,["disabled"]),g,N])]})),_:1},8,["onSubmit"])]),V])])])]),w.showAlert?(Object(a["openBlock"])(),Object(a["createBlock"])(A,{key:0,"alert-msg":w.alertMsg},null,8,["alert-msg"])):Object(a["createCommentVNode"])("",!0)],64)}c("99af"),c("fb6a"),c("ac1f"),c("1276");var w=c("a02d"),k={data:function(){return{userName:"",password:"",check:!1,showAlert:!1,alertMsg:""}},components:{Alert:w["a"]},methods:{customAlert:function(e){this.alertMsg=e,this.showAlert=!0,window.setTimeout(this.closeCustomAlert,5e3)},closeCustomAlert:function(){this.showAlert=!1},checkLogin:function(){var e=this,t=this.$refs.loginBtn;t.classList.add("disabled"),t.children[0].classList.remove("d-none"),this.$http.post("".concat("https://vue3-course-api.hexschool.io","/admin/signin"),{username:this.userName,password:this.password}).then((function(c){if(c.data.success){e.customAlert("登入成功，請稍候");var a=c.data,o=a.token,s=a.expired,r=new Date,n=new Date(s),l=["日","一","二","三","四","五","六"],i="".concat(r.getFullYear()," 年 ").concat(r.getMonth()+1," 月 ").concat(r.getDate()," 日 星期").concat(l[r.getDay()]," ").concat(r.getHours(),":").concat("00".concat(r.getMinutes()).slice(-2)),d="".concat(n.getFullYear()," 年 ").concat(n.getMonth()+1," 月 ").concat(n.getDate()," 日 星期").concat(l[n.getDay()]," ").concat(n.getHours(),":").concat("00".concat(n.getMinutes()).slice(-2));return document.cookie="hexToken=".concat(o,";expires=").concat(new Date(s),";path=/"),document.cookie="hexLoginName=".concat(e.userName.split("@",1),";expires=").concat(new Date(s),";path=/"),document.cookie="hexTokenStart=".concat(i,";expires=").concat(new Date(s),";path=/"),document.cookie="hexTokenExpired=".concat(d,";expires=").concat(new Date(s),";path=/"),t.classList.remove("disabled"),t.children[0].classList.add("d-none"),void e.$router.push("/admin/product")}e.customAlert("登入失敗，請確認帳密是否正確"),t.classList.remove("disabled"),t.children[0].classList.add("d-none")})).catch((function(c){e.customAlert(c.response),t.classList.remove("disabled"),t.children[0].classList.add("d-none")}))}}};k.render=v;t["default"]=k},a02d:function(e,t,c){"use strict";var a=c("7a23"),o={class:"alert alert-primary fade show",role:"alert"},s=Object(a["createVNode"])("i",{class:"bi bi-exclamation-triangle-fill me-2 text-primary"},null,-1);function r(e,t,c,r,n,l){return Object(a["openBlock"])(),Object(a["createBlock"])("div",o,[s,Object(a["createTextVNode"])(Object(a["toDisplayString"])(c.alertMsg),1)])}var n={props:["alertMsg"]};n.render=r;t["a"]=n}}]);
//# sourceMappingURL=chunk-4b2d82e1.25a5efdd.js.map