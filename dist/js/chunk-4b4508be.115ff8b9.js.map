{"version":3,"sources":["webpack:///./src/components/backend/Alert.vue","webpack:///./src/components/backend/Alert.vue?e94c","webpack:///./src/views/frontend/Article.vue","webpack:///./src/views/frontend/Article.vue?7bd9"],"names":["class","role","alertMsg","props","render","id","randomProducts","length","article","title","author","create_at","tagCheck","item","key","centeredSlides","loop","navigation","thumbs","thumbsSwiper","imagesUrl","src","setThumbsSwiper","slidesPerView","spaceBetween","freeMode","watchSlidesVisibility","watchSlidesProgress","content","to","imageUrl","alt","addComma","lowestPrice","btnShow","scrollToTop","showAlert","alert-msg","data","totalProducts","components","Alert","methods","getArticleData","seed","this","$http","get","then","res","success","Date","toISOString","split","replace","getTotalProducts","customAlert","message","window","setTimeout","closeCustomAlert","catch","err","response","products","forEach","index","packageOptionsPrice","packageOptions","map","i","price","sort","x","y","lowestPriceUnit","unit","getRandomProducts","area","find","e","filterArr","push","arrSet","Set","maxSize","size","num","Math","floor","random","add","swiper","msg","scrollTo","computed","parts","toString","join","mounted","listener","scrollY","addEventListener","unmounted","removeEventListener","watch","getData"],"mappings":"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","file":"js/chunk-4b4508be.115ff8b9.js","sourcesContent":["<template>\n  <div class=\"alert alert-primary alert-dismissible fade show\" role=\"alert\">\n    {{ alertMsg }}\n  </div>\n</template>\n<script>\nexport default {\n  props: ['alertMsg'],\n};\n</script>\n","import { render } from \"./Alert.vue?vue&type=template&id=2883ed4f\"\nimport script from \"./Alert.vue?vue&type=script&lang=js\"\nexport * from \"./Alert.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"pt-7 flex-fill\">\n    <div class=\"container\">\n      <div class=\"row justify-content-center pt-8\" :class=\"{ 'pb-8': randomProducts.length !== 0 }\">\n        <div class=\"col-lg-8\">\n          <div class=\"d-flex justify-content-between mb-lg-6 mb-md-4 mb-2\">\n            <div>\n              <h2 class=\"mb-2\">{{ article.title }}</h2>\n              <p class=\"text-gray-dark\">文：{{ article.author }}</p>\n            </div>\n            <p>{{ article.create_at }}</p>\n          </div>\n          <div class=\"mb-4\">\n            <span\n              v-for=\"(item, key) in article.tagCheck\"\n              :key=\"key\"\n              class=\"text-secondary\"\n              :class=\"{ 'ms-2': key !== 0 }\"\n              >#{{ item }}</span\n            >\n          </div>\n          <div class=\"mb-8\">\n            <Swiper\n              :centeredSlides=\"true\"\n              :loop=\"true\"\n              :navigation=\"true\"\n              :thumbs=\"{ swiper: thumbsSwiper }\"\n              class=\"gallery-top rounded-2\"\n            >\n              <SwiperSlide v-for=\"item in article.imagesUrl\" :key=\"item.id\">\n                <img :src=\"item\" class=\"swiper-img rounded-2\" />\n              </SwiperSlide>\n            </Swiper>\n            <Swiper\n              @swiper=\"setThumbsSwiper\"\n              :slidesPerView=\"4\"\n              :spaceBetween=\"10\"\n              :freeMode=\"true\"\n              :watchSlidesVisibility=\"true\"\n              :watchSlidesProgress=\"true\"\n              class=\"gallery-thumbs rounded-2\"\n            >\n              <SwiperSlide v-for=\"item in article.imagesUrl\" :key=\"item.id\">\n                <img :src=\"item\" class=\"swiper-img\" />\n              </SwiperSlide>\n            </Swiper>\n          </div>\n          <div v-html=\"article.content\" class=\"ckeditor-content\"></div>\n        </div>\n      </div>\n    </div>\n    <div class=\"bg-wave pt-6 pb-8\" id=\"moreActivitiesSection\">\n      <div class=\"container\">\n        <h3 class=\"text-primary mb-5\">更多相似活動</h3>\n        <div class=\"row\">\n          <div class=\"col-4\" v-for=\"(item, key) in randomProducts\" :key=\"key\">\n            <router-link :to=\"`/product/${item.id}`\" title=\"查看更多\" class=\"card overflow-hidden\">\n              <div class=\"card-img-outer\">\n                <img :src=\"item.imageUrl\" :alt=\"item.title\" class=\"card-img\" />\n              </div>\n              <div class=\"card-body\">\n                <h4 class=\"card-title ellipsis ellipsis-one-line\">{{ item.title }}</h4>\n                <p class=\"h3-md h5 text-end\">NT {{ addComma(item.lowestPrice) }} 起</p>\n              </div>\n            </router-link>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"to-top-btn\" @click=\"scrollToTop\" v-if=\"btnShow\">\n      <div class=\"to-top-btn-text\">\n        <p>回到</p>\n        <p>上方</p>\n      </div>\n    </div>\n    <!--alert-->\n    <Alert v-if=\"showAlert\" :alert-msg=\"alertMsg\"></Alert>\n  </div>\n</template>\n<script>\nimport Alert from '@/components/backend/Alert.vue';\n\nexport default {\n  data() {\n    return {\n      article: [],\n      content: [],\n      totalProducts: [],\n      randomProducts: [],\n      showAlert: false,\n      alertMsg: '',\n      btnShow: true,\n      thumbsSwiper: null,\n    };\n  },\n  props: ['id'],\n  components: {\n    Alert,\n  },\n  methods: {\n    getArticleData() {\n      const seed = this.id;\n      this.$http\n        .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/article/${seed}`)\n        .then((res) => {\n          if (res.data.success) {\n            this.article = res.data.article;\n            this.article.create_at = new Date(this.article.create_at * 1000)\n              .toISOString()\n              .split('T')[0]\n              .replace(/-/g, ' / ');\n            // 如果 imagesUrl 裡有空字串，把它刪掉再顯示，避免圖片顯示錯誤\n            // this.moreInfo.productInfo.imagesUrl = this.moreInfo.productInfo.imagesUrl.filter(\n            //   (e) => e !== '',\n            // );\n            this.getTotalProducts();\n          } else {\n            this.customAlert(res.data.message);\n            window.setTimeout(this.closeCustomAlert, 5000);\n          }\n        })\n        .catch((err) => {\n          this.customAlert(err.response);\n          window.setTimeout(this.closeCustomAlert, 5000);\n        });\n    },\n    getTotalProducts() {\n      this.$http\n        .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`)\n        .then((res) => {\n          if (res.data.success) {\n            this.totalProducts = res.data.products;\n            this.totalProducts.forEach((item, index) => {\n              // 個別取出每個產品\n              let packageOptionsPrice = item.packageOptions.map((i) => i.price); // 取出該產品的所有方案中的價格\n              packageOptionsPrice = packageOptionsPrice.sort((x, y) => x - y); // 價格小排到大\n              const [lowestPrice] = packageOptionsPrice; // 該產品最低價格為陣列第一個數\n              this.totalProducts[index].lowestPrice = lowestPrice;\n              // 找到該價格對應的單位\n              item.packageOptions.forEach((i) => {\n                if (i.price === lowestPrice) {\n                  this.totalProducts[index].lowestPriceUnit = i.unit;\n                }\n              });\n            });\n            this.getRandomProducts();\n          } else {\n            this.customAlert(res.data.message);\n            window.setTimeout(this.closeCustomAlert, 5000);\n          }\n        })\n        .catch((err) => {\n          this.customAlert(err.response);\n          window.setTimeout(this.closeCustomAlert, 5000);\n        });\n    },\n    getRandomProducts() {\n      const { tagCheck } = this.article;\n      let area;\n      if (\n        tagCheck.find(\n          (e) => e === '基隆'\n            || e === '台北'\n            || e === '新北'\n            || e === '桃園'\n            || e === '新竹'\n            || e === '苗栗',\n        )\n      ) {\n        area = '雙北';\n      } else if (\n        tagCheck.find((e) => e === '台中' || e === '彰化' || e === '南投' || e === '雲林')\n      ) {\n        area = '中彰投';\n      } else if (tagCheck.find((e) => e === '嘉義' || e === '台南')) {\n        area = '嘉南';\n      } else if (tagCheck.find((e) => e === '高雄' || e === '屏東')) {\n        area = '高屏';\n      } else if (\n        tagCheck.find((e) => e === '宜蘭' || e === '花蓮' || e === '台東' || e === '離島')\n      ) {\n        area = '花東';\n      }\n      const filterArr = [];\n      this.totalProducts.forEach((item) => {\n        item.tagCheck.forEach((i) => {\n          if (i === area) {\n            filterArr.push(item);\n          }\n        });\n      });\n      const arrSet = new Set([]);\n      const maxSize = filterArr.length < 3 ? filterArr.length : 3; // 該品項項目少於三項時，顯示該品項數量即可\n      for (let index = 0; arrSet.size < maxSize; index + 1) {\n        const { length } = filterArr;\n        const num = Math.floor(Math.random(length) * length); // 隨機取得商品\n        arrSet.add(num);\n      }\n      arrSet.forEach((i) => {\n        this.randomProducts.push(filterArr[i]); // 取得未重複的商品放進 randomProducts 陣列中\n      });\n    },\n    setThumbsSwiper(swiper) {\n      this.thumbsSwiper = swiper;\n    },\n    customAlert(msg) {\n      this.alertMsg = msg;\n      this.showAlert = true; // 秀出 alert\n    },\n    closeCustomAlert() {\n      this.showAlert = false;\n    },\n    scrollToTop() {\n      window.scrollTo(0, 0);\n    },\n  },\n  computed: {\n    addComma() {\n      return (price) => {\n        const parts = price.toString().split('.');\n        parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n        return `${parts.join(',')}`;\n      };\n    },\n  },\n  mounted() {\n    this.getArticleData();\n    this.listener = () => {\n      this.btnShow = window.scrollY > 0;\n    };\n    window.addEventListener('scroll', this.listener);\n  },\n  unmounted() {\n    window.removeEventListener('scroll', this.listener);\n  },\n  watch: {\n    id() {\n      this.getData();\n    },\n  },\n};\n</script>\n","import { render } from \"./Article.vue?vue&type=template&id=1a4aa890\"\nimport script from \"./Article.vue?vue&type=script&lang=js\"\nexport * from \"./Article.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}